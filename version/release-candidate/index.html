

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Cloud Controller API Reference</title>
    <link href="stylesheets/custom.css" rel="stylesheet" media="screen" />
    <link href="images/favicon.ico" rel="icon" type="image/ico" />

    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sa {
  color: #ae81ff;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <script src="javascripts/all.js"></script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="" />
      </span>
    </a>

    <nav class="toc-wrapper">
      <img src="images/logo.png" alt="" />

      <div class="dropdown version-dropdown">
        <button type="button" id="version-dropdown-button" class="version-dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Release Candidate<span class="caret">&#x25BE;</span></button>

        <ul id="version-dropdown-menu" class="dropdown-menu" role="menu" aria-labelledby="version-dropdown-button">
          <div class="dropdown-content">
            <ul class="dropdown-list" id="version-list">
            </ul>
          </div>
          <div class="dropdown-footer dropdown-content">
            <ul class="dropdown-list">
              <li><a id="release-candidate" href="/version/release-candidate">Release Candidate</a></li>
              <li><a id="latest-release" href="/">Latest</a></li>
            </ul>
          </div>
        </ul>
      </div>

      <div class="search">
        <input type="search" class="search" id="input-search" placeholder='Search (press "/")' aria-label="Search sections (press '/' to focus this input)">
      </div>
      <ul class="search-results"></ul>

      <div id="toc">
        <ul class='toc-header'><li class='toc-item'><a class='toc-link' href='#introduction'>Introduction</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#overview'>Overview</a></li><li class='toc-item'><a class='toc-link' href='#getting-help'>Getting help</a></li><li class='toc-item'><a class='toc-link' href='#more-resources'>More resources</a></li></ul><ul class='toc-header'><li class='toc-item'><a class='toc-link' href='#concepts'>Concepts</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#api-resource'>API Resource</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#required-fields'>Required fields</a></li><li class='toc-item'><a class='toc-link' href='#links'>Links</a></li></ul><li class='toc-item'><a class='toc-link' href='#authentication'>Authentication</a></li><li class='toc-item'><a class='toc-link' href='#authorization'>Authorization</a></li><li class='toc-item'><a class='toc-link' href='#errors'>Errors</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-error-object'>The error object</a></li><li class='toc-item'><a class='toc-link' href='#common-errors'>Common errors</a></li></ul><li class='toc-item'><a class='toc-link' href='#fields'>Fields</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#fields-parameter'>Fields parameter</a></li><li class='toc-item'><a class='toc-link' href='#resources-with-fields'>Resources with Fields</a></li><li class='toc-item'><a class='toc-link' href='#fields-sample-requests'>Fields Sample requests</a></li></ul><li class='toc-item'><a class='toc-link' href='#filters'>Filters</a></li><li class='toc-item'><a class='toc-link' href='#include'>Include</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#resources-with-includes'>Resources with includes</a></li><li class='toc-item'><a class='toc-link' href='#sample-requests'>Sample requests</a></li></ul><li class='toc-item'><a class='toc-link' href='#lifecycles'>Lifecycles</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#buildpack-lifecycle'>Buildpack lifecycle</a></li><li class='toc-item'><a class='toc-link' href='#cloud-native-buildpacks-lifecycle-experimental'>Cloud Native Buildpacks Lifecycle (experimental)</a></li><li class='toc-item'><a class='toc-link' href='#docker-lifecycle'>Docker lifecycle</a></li></ul><li class='toc-item'><a class='toc-link' href='#metadata'>Metadata</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#annotations'>Annotations</a></li><li class='toc-item'><a class='toc-link' href='#labels-and-selectors'>Labels and selectors</a></li><li class='toc-item'><a class='toc-link' href='#updating-labels-and-annotations'>Updating labels and annotations</a></li></ul><li class='toc-item'><a class='toc-link' href='#pagination'>Pagination</a></li><li class='toc-item'><a class='toc-link' href='#procfiles'>Procfiles</a></li><li class='toc-item'><a class='toc-link' href='#query-parameters'>Query Parameters</a></li><li class='toc-item'><a class='toc-link' href='#relationships'>Relationships</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#to-one-relationships'>To-one relationships</a></li><li class='toc-item'><a class='toc-link' href='#to-many-relationships'>To-many relationships</a></li></ul><li class='toc-item'><a class='toc-link' href='#status-codes'>Status Codes</a></li><li class='toc-item'><a class='toc-link' href='#timestamps'>Timestamps</a></li><li class='toc-item'><a class='toc-link' href='#updating-actual-state'>Updating Actual State</a></li><li class='toc-item'><a class='toc-link' href='#warnings'>Warnings</a></li></ul><ul class='toc-header'><li class='toc-item'><a class='toc-link' href='#resources'>Resources</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#admin'>Admin</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#clear-buildpack-cache'>Clear buildpack cache</a></li></ul><li class='toc-item'><a class='toc-link' href='#apps'>Apps</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-app-object'>The app object</a></li><li class='toc-item'><a class='toc-link' href='#create-an-app'>Create an app</a></li><li class='toc-item'><a class='toc-link' href='#get-an-app'>Get an app</a></li><li class='toc-item'><a class='toc-link' href='#list-apps'>List apps</a></li><li class='toc-item'><a class='toc-link' href='#update-an-app'>Update an app</a></li><li class='toc-item'><a class='toc-link' href='#delete-an-app'>Delete an app</a></li><li class='toc-item'><a class='toc-link' href='#get-current-droplet'>Get current droplet</a></li><li class='toc-item'><a class='toc-link' href='#get-current-droplet-association-for-an-app'>Get current droplet association for an app</a></li><li class='toc-item'><a class='toc-link' href='#get-environment-for-an-app'>Get environment for an app</a></li><li class='toc-item'><a class='toc-link' href='#get-environment-variables-for-an-app'>Get environment variables for an app</a></li><li class='toc-item'><a class='toc-link' href='#get-permissions-for-an-app'>Get permissions for an app</a></li><li class='toc-item'><a class='toc-link' href='#set-current-droplet'>Set current droplet</a></li><li class='toc-item'><a class='toc-link' href='#get-ssh-enabled-for-an-app'>Get SSH enabled for an app</a></li><li class='toc-item'><a class='toc-link' href='#start-an-app'>Start an app</a></li><li class='toc-item'><a class='toc-link' href='#stop-an-app'>Stop an app</a></li><li class='toc-item'><a class='toc-link' href='#restart-an-app'>Restart an app</a></li><li class='toc-item'><a class='toc-link' href='#clear-buildpack-cache-for-application'>Clear buildpack cache for application</a></li><li class='toc-item'><a class='toc-link' href='#update-environment-variables-for-an-app'>Update environment variables for an app</a></li></ul><li class='toc-item'><a class='toc-link' href='#app-features'>App Features</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-app-feature-object'>The app feature object</a></li><li class='toc-item'><a class='toc-link' href='#supported-app-features'>Supported app features</a></li><li class='toc-item'><a class='toc-link' href='#get-an-app-feature'>Get an app feature</a></li><li class='toc-item'><a class='toc-link' href='#list-app-features'>List app features</a></li><li class='toc-item'><a class='toc-link' href='#update-an-app-feature'>Update an app feature</a></li></ul><li class='toc-item'><a class='toc-link' href='#app-usage-events'>App Usage Events</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-app-usage-event-object'>The app usage event object</a></li><li class='toc-item'><a class='toc-link' href='#get-an-app-usage-event'>Get an app usage event</a></li><li class='toc-item'><a class='toc-link' href='#list-app-usage-events'>List app usage events</a></li><li class='toc-item'><a class='toc-link' href='#purge-and-seed-app-usage-events'>Purge and seed app usage events</a></li></ul><li class='toc-item'><a class='toc-link' href='#audit-events'>Audit Events</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-audit-event-object'>The audit event object</a></li><li class='toc-item'><a class='toc-link' href='#get-an-audit-event'>Get an audit event</a></li><li class='toc-item'><a class='toc-link' href='#list-audit-events'>List audit events</a></li></ul><li class='toc-item'><a class='toc-link' href='#builds'>Builds</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-build-object'>The build object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-build'>Create a build</a></li><li class='toc-item'><a class='toc-link' href='#get-a-build'>Get a build</a></li><li class='toc-item'><a class='toc-link' href='#list-builds'>List builds</a></li><li class='toc-item'><a class='toc-link' href='#list-builds-for-an-app'>List builds for an app</a></li><li class='toc-item'><a class='toc-link' href='#update-a-build'>Update a build</a></li></ul><li class='toc-item'><a class='toc-link' href='#buildpacks'>Buildpacks</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-buildpack-object'>The buildpack object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-buildpack'>Create a buildpack</a></li><li class='toc-item'><a class='toc-link' href='#get-a-buildpack'>Get a buildpack</a></li><li class='toc-item'><a class='toc-link' href='#list-buildpacks'>List buildpacks</a></li><li class='toc-item'><a class='toc-link' href='#update-a-buildpack'>Update a buildpack</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-buildpack'>Delete a buildpack</a></li><li class='toc-item'><a class='toc-link' href='#upload-buildpack-bits'>Upload buildpack bits</a></li></ul><li class='toc-item'><a class='toc-link' href='#deployments'>Deployments</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-deployment-object'>The deployment object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-deployment'>Create a deployment</a></li><li class='toc-item'><a class='toc-link' href='#get-a-deployment'>Get a deployment</a></li><li class='toc-item'><a class='toc-link' href='#list-deployments'>List deployments</a></li><li class='toc-item'><a class='toc-link' href='#update-a-deployment'>Update a deployment</a></li><li class='toc-item'><a class='toc-link' href='#cancel-a-deployment'>Cancel a deployment</a></li><li class='toc-item'><a class='toc-link' href='#continue-a-deployment'>Continue a deployment</a></li></ul><li class='toc-item'><a class='toc-link' href='#domains'>Domains</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-domain-object'>The domain object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-domain'>Create a domain</a></li><li class='toc-item'><a class='toc-link' href='#get-a-domain'>Get a domain</a></li><li class='toc-item'><a class='toc-link' href='#list-domains'>List domains</a></li><li class='toc-item'><a class='toc-link' href='#list-domains-for-an-organization'>List domains for an organization</a></li><li class='toc-item'><a class='toc-link' href='#update-a-domain'>Update a domain</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-domain'>Delete a domain</a></li><li class='toc-item'><a class='toc-link' href='#share-a-domain'>Share a domain</a></li><li class='toc-item'><a class='toc-link' href='#unshare-a-domain'>Unshare a domain</a></li></ul><li class='toc-item'><a class='toc-link' href='#droplets'>Droplets</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-droplet-object'>The droplet object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-droplet'>Create a droplet</a></li><li class='toc-item'><a class='toc-link' href='#get-a-droplet'>Get a droplet</a></li><li class='toc-item'><a class='toc-link' href='#list-droplets'>List droplets</a></li><li class='toc-item'><a class='toc-link' href='#list-droplets-for-a-package'>List droplets for a package</a></li><li class='toc-item'><a class='toc-link' href='#list-droplets-for-an-app'>List droplets for an app</a></li><li class='toc-item'><a class='toc-link' href='#update-a-droplet'>Update a droplet</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-droplet'>Delete a droplet</a></li><li class='toc-item'><a class='toc-link' href='#copy-a-droplet'>Copy a droplet</a></li><li class='toc-item'><a class='toc-link' href='#download-droplet-bits'>Download droplet bits</a></li><li class='toc-item'><a class='toc-link' href='#upload-droplet-bits'>Upload droplet bits</a></li></ul><li class='toc-item'><a class='toc-link' href='#environment-variable-groups'>Environment Variable Groups</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-environment-variable-group-object'>The environment variable group object</a></li><li class='toc-item'><a class='toc-link' href='#get-an-environment-variable-group'>Get an environment variable group</a></li><li class='toc-item'><a class='toc-link' href='#update-environment-variable-group'>Update environment variable group</a></li></ul><li class='toc-item'><a class='toc-link' href='#feature-flags'>Feature Flags</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-feature-flag-object'>The feature flag object</a></li><li class='toc-item'><a class='toc-link' href='#list-of-feature-flags'>List of feature flags</a></li><li class='toc-item'><a class='toc-link' href='#get-a-feature-flag'>Get a feature flag</a></li><li class='toc-item'><a class='toc-link' href='#list-feature-flags'>List feature flags</a></li><li class='toc-item'><a class='toc-link' href='#update-a-feature-flag'>Update a feature flag</a></li></ul><li class='toc-item'><a class='toc-link' href='#info'>Info</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#get-platform-info'>Get platform info</a></li><li class='toc-item'><a class='toc-link' href='#get-platform-usage-summary'>Get platform usage summary</a></li></ul><li class='toc-item'><a class='toc-link' href='#isolation-segments'>Isolation Segments</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-isolation-segment-object'>The isolation segment object</a></li><li class='toc-item'><a class='toc-link' href='#create-an-isolation-segment'>Create an isolation segment</a></li><li class='toc-item'><a class='toc-link' href='#get-an-isolation-segment'>Get an isolation segment</a></li><li class='toc-item'><a class='toc-link' href='#list-isolation-segments'>List isolation segments</a></li><li class='toc-item'><a class='toc-link' href='#list-organizations-relationship'>List organizations relationship</a></li><li class='toc-item'><a class='toc-link' href='#list-spaces-relationship'>List spaces relationship</a></li><li class='toc-item'><a class='toc-link' href='#update-an-isolation-segment'>Update an isolation segment</a></li><li class='toc-item'><a class='toc-link' href='#delete-an-isolation-segment'>Delete an isolation segment</a></li><li class='toc-item'><a class='toc-link' href='#entitle-organizations-for-an-isolation-segment'>Entitle organizations for an isolation segment</a></li><li class='toc-item'><a class='toc-link' href='#revoke-entitlement-to-isolation-segment-for-an-organization'>Revoke entitlement to isolation segment for an organization</a></li></ul><li class='toc-item'><a class='toc-link' href='#jobs'>Jobs</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-job-object'>The job object</a></li><li class='toc-item'><a class='toc-link' href='#get-a-job'>Get a job</a></li></ul><li class='toc-item'><a class='toc-link' href='#manifests'>Manifests</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-manifest-schema'>The manifest schema</a></li><li class='toc-item'><a class='toc-link' href='#apply-a-manifest-to-a-space'>Apply a manifest to a space</a></li><li class='toc-item'><a class='toc-link' href='#generate-a-manifest-for-an-app'>Generate a manifest for an app</a></li><li class='toc-item'><a class='toc-link' href='#create-a-manifest-diff-for-a-space-experimental'>Create a manifest diff for a space (experimental)</a></li></ul><li class='toc-item'><a class='toc-link' href='#organizations'>Organizations</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-organization-object'>The organization object</a></li><li class='toc-item'><a class='toc-link' href='#create-an-organization'>Create an organization</a></li><li class='toc-item'><a class='toc-link' href='#get-an-organization'>Get an organization</a></li><li class='toc-item'><a class='toc-link' href='#list-organizations'>List organizations</a></li><li class='toc-item'><a class='toc-link' href='#list-organizations-for-isolation-segment'>List organizations for isolation segment</a></li><li class='toc-item'><a class='toc-link' href='#update-an-organization'>Update an organization</a></li><li class='toc-item'><a class='toc-link' href='#delete-an-organization'>Delete an organization</a></li><li class='toc-item'><a class='toc-link' href='#assign-default-isolation-segment'>Assign default isolation segment</a></li><li class='toc-item'><a class='toc-link' href='#get-default-isolation-segment'>Get default isolation segment</a></li><li class='toc-item'><a class='toc-link' href='#get-default-domain'>Get default domain</a></li><li class='toc-item'><a class='toc-link' href='#get-usage-summary'>Get usage summary</a></li><li class='toc-item'><a class='toc-link' href='#list-users-for-an-organization'>List users for an organization</a></li></ul><li class='toc-item'><a class='toc-link' href='#organization-quotas'>Organization Quotas</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-organization-quota-object'>The organization quota object</a></li><li class='toc-item'><a class='toc-link' href='#create-an-organization-quota'>Create an organization quota</a></li><li class='toc-item'><a class='toc-link' href='#get-an-organization-quota'>Get an organization quota</a></li><li class='toc-item'><a class='toc-link' href='#list-organization-quotas'>List organization quotas</a></li><li class='toc-item'><a class='toc-link' href='#apply-an-organization-quota-to-an-organization'>Apply an organization quota to an organization</a></li><li class='toc-item'><a class='toc-link' href='#delete-an-organization-quota'>Delete an organization quota</a></li><li class='toc-item'><a class='toc-link' href='#update-an-organization-quota'>Update an organization quota</a></li></ul><li class='toc-item'><a class='toc-link' href='#packages'>Packages</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-package-object'>The package object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-package'>Create a package</a></li><li class='toc-item'><a class='toc-link' href='#get-a-package'>Get a package</a></li><li class='toc-item'><a class='toc-link' href='#list-packages'>List packages</a></li><li class='toc-item'><a class='toc-link' href='#list-packages-for-an-app'>List packages for an app</a></li><li class='toc-item'><a class='toc-link' href='#update-a-package'>Update a package</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-package'>Delete a package</a></li><li class='toc-item'><a class='toc-link' href='#copy-a-package'>Copy a package</a></li><li class='toc-item'><a class='toc-link' href='#download-package-bits'>Download package bits</a></li><li class='toc-item'><a class='toc-link' href='#stage-a-package'>Stage a package</a></li><li class='toc-item'><a class='toc-link' href='#upload-package-bits'>Upload package bits</a></li></ul><li class='toc-item'><a class='toc-link' href='#processes'>Processes</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-process-object'>The process object</a></li><li class='toc-item'><a class='toc-link' href='#the-health-check-object'>The health check object</a></li><li class='toc-item'><a class='toc-link' href='#the-readiness-health-check-object'>The readiness health check object</a></li><li class='toc-item'><a class='toc-link' href='#the-process-stats-object'>The process stats object</a></li><li class='toc-item'><a class='toc-link' href='#get-a-process'>Get a process</a></li><li class='toc-item'><a class='toc-link' href='#get-stats-for-a-process'>Get stats for a process</a></li><li class='toc-item'><a class='toc-link' href='#list-processes'>List processes</a></li><li class='toc-item'><a class='toc-link' href='#list-processes-for-app'>List processes for app</a></li><li class='toc-item'><a class='toc-link' href='#update-a-process'>Update a process</a></li><li class='toc-item'><a class='toc-link' href='#scale-a-process'>Scale a process</a></li><li class='toc-item'><a class='toc-link' href='#terminate-a-process-instance'>Terminate a process instance</a></li></ul><li class='toc-item'><a class='toc-link' href='#resource-matches'>Resource Matches</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-resource-match-object'>The resource match object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-resource-match'>Create a resource match</a></li></ul><li class='toc-item'><a class='toc-link' href='#revisions'>Revisions</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-revision-object'>The revision object</a></li><li class='toc-item'><a class='toc-link' href='#the-process-snapshot-object'>The process snapshot object</a></li><li class='toc-item'><a class='toc-link' href='#the-sidecar-snapshot-object'>The sidecar snapshot object</a></li><li class='toc-item'><a class='toc-link' href='#get-a-revision'>Get a revision</a></li><li class='toc-item'><a class='toc-link' href='#get-environment-variables-for-a-revision'>Get environment variables for a revision</a></li><li class='toc-item'><a class='toc-link' href='#list-revisions-for-an-app'>List revisions for an app</a></li><li class='toc-item'><a class='toc-link' href='#list-deployed-revisions-for-an-app'>List deployed revisions for an app</a></li><li class='toc-item'><a class='toc-link' href='#update-a-revision'>Update a revision</a></li></ul><li class='toc-item'><a class='toc-link' href='#roles'>Roles</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-role-object'>The role object</a></li><li class='toc-item'><a class='toc-link' href='#valid-role-types'>Valid role types</a></li><li class='toc-item'><a class='toc-link' href='#create-a-role'>Create a role</a></li><li class='toc-item'><a class='toc-link' href='#get-a-role'>Get a role</a></li><li class='toc-item'><a class='toc-link' href='#list-roles'>List roles</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-role'>Delete a role</a></li></ul><li class='toc-item'><a class='toc-link' href='#root'>Root</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#global-api-root'>Global API Root</a></li><li class='toc-item'><a class='toc-link' href='#v3-api-root'>V3 API Root</a></li></ul><li class='toc-item'><a class='toc-link' href='#routes'>Routes</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-route-object'>The route object</a></li><li class='toc-item'><a class='toc-link' href='#the-destination-object'>The destination object</a></li><li class='toc-item'><a class='toc-link' href='#the-route-options-object'>The route options object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-route'>Create a route</a></li><li class='toc-item'><a class='toc-link' href='#get-a-route'>Get a route</a></li><li class='toc-item'><a class='toc-link' href='#list-routes'>List routes</a></li><li class='toc-item'><a class='toc-link' href='#list-routes-for-an-app'>List routes for an app</a></li><li class='toc-item'><a class='toc-link' href='#update-a-route'>Update a route</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-route'>Delete a route</a></li><li class='toc-item'><a class='toc-link' href='#check-reserved-routes-for-a-domain'>Check reserved routes for a domain</a></li><li class='toc-item'><a class='toc-link' href='#lists-shared-spaces-relationship-experimental'>Lists shared spaces relationship (experimental)</a></li><li class='toc-item'><a class='toc-link' href='#share-a-route-with-other-spaces-experimental'>Share a route with other spaces (experimental)</a></li><li class='toc-item'><a class='toc-link' href='#unshare-a-route-that-was-shared-with-another-space-experimental'>Unshare a route that was shared with another space (experimental)</a></li><li class='toc-item'><a class='toc-link' href='#transfer-ownership-experimental'>Transfer ownership (experimental)</a></li><li class='toc-item'><a class='toc-link' href='#list-destinations-for-a-route'>List destinations for a route</a></li><li class='toc-item'><a class='toc-link' href='#insert-destinations-for-a-route'>Insert destinations for a route</a></li><li class='toc-item'><a class='toc-link' href='#replace-all-destinations-for-a-route'>Replace all destinations for a route</a></li><li class='toc-item'><a class='toc-link' href='#update-a-destination-protocol-for-a-route'>Update a destination protocol for a route</a></li><li class='toc-item'><a class='toc-link' href='#remove-destination-for-a-route'>Remove destination for a route</a></li><li class='toc-item'><a class='toc-link' href='#delete-unmapped-routes-for-a-space'>Delete unmapped routes for a space</a></li></ul><li class='toc-item'><a class='toc-link' href='#security-groups'>Security Groups</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-security-group-object'>The security group object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-security-group'>Create a security group</a></li><li class='toc-item'><a class='toc-link' href='#get-a-security-group'>Get a security group</a></li><li class='toc-item'><a class='toc-link' href='#list-security-groups'>List security groups</a></li><li class='toc-item'><a class='toc-link' href='#update-a-security-group'>Update a security group</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-security-group'>Delete a security group</a></li><li class='toc-item'><a class='toc-link' href='#bind-a-running-security-group-to-spaces'>Bind a running security group to spaces</a></li><li class='toc-item'><a class='toc-link' href='#bind-a-staging-security-group-to-spaces'>Bind a staging security group to spaces</a></li><li class='toc-item'><a class='toc-link' href='#unbind-a-running-security-group-from-a-space'>Unbind a running security group from a space</a></li><li class='toc-item'><a class='toc-link' href='#unbind-a-staging-security-group-from-a-space'>Unbind a staging security group from a space</a></li><li class='toc-item'><a class='toc-link' href='#list-running-security-groups-for-a-space'>List running security groups for a space</a></li><li class='toc-item'><a class='toc-link' href='#list-staging-security-groups-for-a-space'>List staging security groups for a space</a></li></ul><li class='toc-item'><a class='toc-link' href='#service-brokers'>Service Brokers</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-service-broker-object'>The service broker object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-service-broker'>Create a service broker</a></li><li class='toc-item'><a class='toc-link' href='#get-a-service-broker'>Get a service broker</a></li><li class='toc-item'><a class='toc-link' href='#list-service-brokers'>List service brokers</a></li><li class='toc-item'><a class='toc-link' href='#update-a-service-broker'>Update a service broker</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-service-broker'>Delete a service broker</a></li><li class='toc-item'><a class='toc-link' href='#service-broker-jobs'>Service broker jobs</a></li></ul><li class='toc-item'><a class='toc-link' href='#service-offerings'>Service Offerings</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#visibility-of-service-offerings'>Visibility of service offerings</a></li><li class='toc-item'><a class='toc-link' href='#the-service-offering-object'>The service offering object</a></li><li class='toc-item'><a class='toc-link' href='#get-a-service-offering'>Get a service offering</a></li><li class='toc-item'><a class='toc-link' href='#list-service-offerings'>List service offerings</a></li><li class='toc-item'><a class='toc-link' href='#update-a-service-offering'>Update a service offering</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-service-offering'>Delete a service offering</a></li></ul><li class='toc-item'><a class='toc-link' href='#service-plans'>Service Plans</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-service-plan-object'>The service plan object</a></li><li class='toc-item'><a class='toc-link' href='#get-a-service-plan'>Get a service plan</a></li><li class='toc-item'><a class='toc-link' href='#list-service-plans'>List service plans</a></li><li class='toc-item'><a class='toc-link' href='#update-a-service-plan'>Update a service plan</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-service-plan'>Delete a service plan</a></li></ul><li class='toc-item'><a class='toc-link' href='#service-plan-visibility'>Service Plan Visibility</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-service-plan-visibility-object'>The service plan visibility object</a></li><li class='toc-item'><a class='toc-link' href='#list-of-visibility-types'>List of visibility types</a></li><li class='toc-item'><a class='toc-link' href='#get-a-service-plan-visibility'>Get a service plan visibility</a></li><li class='toc-item'><a class='toc-link' href='#update-a-service-plan-visibility'>Update a service plan visibility</a></li><li class='toc-item'><a class='toc-link' href='#apply-a-service-plan-visibility'>Apply a service plan visibility</a></li><li class='toc-item'><a class='toc-link' href='#remove-organization-from-a-service-plan-visibility'>Remove organization from a service plan visibility</a></li></ul><li class='toc-item'><a class='toc-link' href='#service-instances'>Service Instances</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-service-instance-object'>The service instance object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-service-instance'>Create a service instance</a></li><li class='toc-item'><a class='toc-link' href='#get-a-service-instance'>Get a service instance</a></li><li class='toc-item'><a class='toc-link' href='#list-service-instances'>List service instances</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-service-instance'>Delete a service instance</a></li><li class='toc-item'><a class='toc-link' href='#update-a-service-instance'>Update a service instance</a></li><li class='toc-item'><a class='toc-link' href='#get-credentials-for-a-user-provided-service-instance'>Get credentials for a user-provided service instance</a></li><li class='toc-item'><a class='toc-link' href='#get-usage-summary-in-shared-spaces'>Get usage summary in shared spaces</a></li><li class='toc-item'><a class='toc-link' href='#list-shared-spaces-relationship'>List shared spaces relationship</a></li><li class='toc-item'><a class='toc-link' href='#get-parameters-for-a-managed-service-instance'>Get parameters for a managed service instance</a></li><li class='toc-item'><a class='toc-link' href='#get-permissions-for-a-service-instance'>Get permissions for a service instance</a></li><li class='toc-item'><a class='toc-link' href='#share-a-service-instance-to-other-spaces'>Share a service instance to other spaces</a></li><li class='toc-item'><a class='toc-link' href='#unshare-a-service-instance-from-another-space'>Unshare a service instance from another space</a></li></ul><li class='toc-item'><a class='toc-link' href='#service-credential-binding'>Service Credential Binding</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-service-credential-binding-object'>The service credential binding object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-service-credential-binding'>Create a service credential binding</a></li><li class='toc-item'><a class='toc-link' href='#get-a-service-credential-binding'>Get a service credential binding</a></li><li class='toc-item'><a class='toc-link' href='#list-service-credential-bindings'>List service credential bindings</a></li><li class='toc-item'><a class='toc-link' href='#update-a-service-credential-binding'>Update a service credential binding</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-service-credential-binding'>Delete a service credential binding</a></li><li class='toc-item'><a class='toc-link' href='#get-a-service-credential-binding-details'>Get a service credential binding details</a></li><li class='toc-item'><a class='toc-link' href='#get-parameters-for-a-service-credential-binding'>Get parameters for a service credential binding</a></li></ul><li class='toc-item'><a class='toc-link' href='#service-route-binding'>Service Route Binding</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-service-route-binding-object'>The service route binding object</a></li><li class='toc-item'><a class='toc-link' href='#get-a-service-route-binding'>Get a service route binding</a></li><li class='toc-item'><a class='toc-link' href='#list-service-route-bindings'>List service route bindings</a></li><li class='toc-item'><a class='toc-link' href='#create-a-service-route-binding'>Create a service route binding</a></li><li class='toc-item'><a class='toc-link' href='#update-a-service-route-binding'>Update a service route binding</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-service-route-binding'>Delete a service route binding</a></li><li class='toc-item'><a class='toc-link' href='#get-parameters-for-a-route-binding'>Get parameters for a route binding</a></li></ul><li class='toc-item'><a class='toc-link' href='#service-usage-events'>Service Usage Events</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-service-usage-event-object'>The service usage event object</a></li><li class='toc-item'><a class='toc-link' href='#get-a-service-usage-event'>Get a service usage event</a></li><li class='toc-item'><a class='toc-link' href='#list-service-usage-events'>List service usage events</a></li><li class='toc-item'><a class='toc-link' href='#purge-and-seed-service-usage-events'>Purge and seed service usage events</a></li></ul><li class='toc-item'><a class='toc-link' href='#sidecars'>Sidecars</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-sidecar-object'>The sidecar object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-sidecar-associated-with-an-app'>Create a sidecar associated with an app</a></li><li class='toc-item'><a class='toc-link' href='#get-a-sidecar'>Get a sidecar</a></li><li class='toc-item'><a class='toc-link' href='#update-a-sidecar'>Update a sidecar</a></li><li class='toc-item'><a class='toc-link' href='#list-sidecars-for-app'>List sidecars for app</a></li><li class='toc-item'><a class='toc-link' href='#list-sidecars-for-process'>List sidecars for process</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-sidecar'>Delete a sidecar</a></li></ul><li class='toc-item'><a class='toc-link' href='#spaces'>Spaces</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-space-object'>The space object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-space'>Create a space</a></li><li class='toc-item'><a class='toc-link' href='#get-a-space'>Get a space</a></li><li class='toc-item'><a class='toc-link' href='#list-spaces'>List spaces</a></li><li class='toc-item'><a class='toc-link' href='#update-a-space'>Update a space</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-space'>Delete a space</a></li><li class='toc-item'><a class='toc-link' href='#get-assigned-isolation-segment'>Get assigned isolation segment</a></li><li class='toc-item'><a class='toc-link' href='#manage-isolation-segment'>Manage isolation segment</a></li><li class='toc-item'><a class='toc-link' href='#list-users-for-a-space'>List users for a space</a></li></ul><li class='toc-item'><a class='toc-link' href='#space-features'>Space Features</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-space-feature-object'>The space feature object</a></li><li class='toc-item'><a class='toc-link' href='#get-a-space-feature'>Get a space feature</a></li><li class='toc-item'><a class='toc-link' href='#list-space-features'>List space features</a></li><li class='toc-item'><a class='toc-link' href='#update-space-features'>Update space features</a></li></ul><li class='toc-item'><a class='toc-link' href='#space-quotas'>Space Quotas</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-space-quota-object'>The space quota object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-space-quota'>Create a space quota</a></li><li class='toc-item'><a class='toc-link' href='#get-a-space-quota'>Get a space quota</a></li><li class='toc-item'><a class='toc-link' href='#list-space-quotas'>List space quotas</a></li><li class='toc-item'><a class='toc-link' href='#update-a-space-quota'>Update a space quota</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-space-quota'>Delete a space quota</a></li><li class='toc-item'><a class='toc-link' href='#apply-a-space-quota-to-a-space'>Apply a space quota to a space</a></li><li class='toc-item'><a class='toc-link' href='#remove-a-space-quota-from-a-space'>Remove a space quota from a space</a></li></ul><li class='toc-item'><a class='toc-link' href='#stacks'>Stacks</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-stack-object'>The stack object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-stack'>Create a stack</a></li><li class='toc-item'><a class='toc-link' href='#get-a-stack'>Get a stack</a></li><li class='toc-item'><a class='toc-link' href='#list-stacks'>List stacks</a></li><li class='toc-item'><a class='toc-link' href='#list-apps-on-a-stack'>List apps on a stack</a></li><li class='toc-item'><a class='toc-link' href='#update-a-stack'>Update a stack</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-stack'>Delete a stack</a></li></ul><li class='toc-item'><a class='toc-link' href='#tasks'>Tasks</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-task-object'>The task object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-task'>Create a task</a></li><li class='toc-item'><a class='toc-link' href='#get-a-task'>Get a task</a></li><li class='toc-item'><a class='toc-link' href='#list-tasks'>List tasks</a></li><li class='toc-item'><a class='toc-link' href='#list-tasks-for-an-app'>List tasks for an app</a></li><li class='toc-item'><a class='toc-link' href='#update-a-task'>Update a task</a></li><li class='toc-item'><a class='toc-link' href='#cancel-a-task'>Cancel a task</a></li></ul><li class='toc-item'><a class='toc-link' href='#users'>Users</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#the-user-object'>The user object</a></li><li class='toc-item'><a class='toc-link' href='#create-a-user'>Create a user</a></li><li class='toc-item'><a class='toc-link' href='#get-a-user'>Get a user</a></li><li class='toc-item'><a class='toc-link' href='#list-users'>List users</a></li><li class='toc-item'><a class='toc-link' href='#update-a-user'>Update a user</a></li><li class='toc-item'><a class='toc-link' href='#delete-a-user'>Delete a user</a></li></ul></ul><ul class='toc-header'><li class='toc-item'><a class='toc-link' href='#experimental-resources'>Experimental Resources</a></li></ul><ul class='toc-header'><li class='toc-item'><a class='toc-link' href='#upgrade-guide'>Upgrade Guide</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#conceptual-changes'>Conceptual Changes</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#app-sub-resources'>App Sub-Resources</a></li><li class='toc-item'><a class='toc-link' href='#starting-apps'>Starting Apps</a></li><li class='toc-item'><a class='toc-link' href='#asynchronous-operations'>Asynchronous Operations</a></li><li class='toc-item'><a class='toc-link' href='#errors-v3'>Errors</a></li><li class='toc-item'><a class='toc-link' href='#filtering'>Filtering</a></li><li class='toc-item'><a class='toc-link' href='#including-associated-resources'>Including Associated Resources</a></li><li class='toc-item'><a class='toc-link' href='#resource-summaries'>Resource Summaries</a></li></ul><li class='toc-item'><a class='toc-link' href='#new-concepts'>New Concepts</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#actions'>Actions</a></li><li class='toc-item'><a class='toc-link' href='#links-v3'>Links</a></li><li class='toc-item'><a class='toc-link' href='#metadata-v3'>Metadata</a></li><li class='toc-item'><a class='toc-link' href='#relationships-v3'>Relationships</a></li></ul><li class='toc-item'><a class='toc-link' href='#new-resources'>New Resources</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#app-features-v3'>App Features</a></li><li class='toc-item'><a class='toc-link' href='#builds-v3'>Builds</a></li><li class='toc-item'><a class='toc-link' href='#deployments-v3'>Deployments</a></li><li class='toc-item'><a class='toc-link' href='#isolation-segments-v3'>Isolation Segments</a></li><li class='toc-item'><a class='toc-link' href='#manifests-v3'>Manifests</a></li><li class='toc-item'><a class='toc-link' href='#revisions-v3'>Revisions</a></li><li class='toc-item'><a class='toc-link' href='#service-route-bindings'>Service Route Bindings</a></li><li class='toc-item'><a class='toc-link' href='#sidecars-v3'>Sidecars</a></li><li class='toc-item'><a class='toc-link' href='#tasks-v3'>Tasks</a></li></ul><li class='toc-item'><a class='toc-link' href='#changed-resources'>Changed Resources</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#audit-events-in-v3'>Audit Events in V3</a></li><li class='toc-item'><a class='toc-link' href='#domains-in-v3'>Domains in V3</a></li><li class='toc-item'><a class='toc-link' href='#info-in-v3'>Info in V3</a></li><li class='toc-item'><a class='toc-link' href='#organization-quotas-in-v3'>Organization Quotas in V3</a></li><li class='toc-item'><a class='toc-link' href='#routes-in-v3'>Routes in V3</a></li><li class='toc-item'><a class='toc-link' href='#security-groups-in-v3'>Security Groups in V3</a></li><li class='toc-item'><a class='toc-link' href='#service-brokers-in-v3'>Service Brokers in V3</a></li><li class='toc-item'><a class='toc-link' href='#service-instances-in-v3'>Service Instances in V3</a></li><li class='toc-item'><a class='toc-link' href='#service-bindings-in-v3'>Service Bindings in V3</a></li><li class='toc-item'><a class='toc-link' href='#service-offerings-in-v3'>Service Offerings in V3</a></li><li class='toc-item'><a class='toc-link' href='#service-plans-in-v3'>Service Plans in V3</a></li><li class='toc-item'><a class='toc-link' href='#service-plan-visibility-in-v3'>Service Plan Visibility in V3</a></li><li class='toc-item'><a class='toc-link' href='#space-quotas-in-v3'>Space Quotas in V3</a></li><li class='toc-item'><a class='toc-link' href='#usage-events-in-v3'>Usage Events in V3</a></li><li class='toc-item'><a class='toc-link' href='#users-and-roles-in-v3'>Users and Roles in V3</a></li></ul><li class='toc-item'><a class='toc-link' href='#deprecated-endpoints'>Deprecated Endpoints</a></li><ul class='toc-subheader'><li class='toc-item'><a class='toc-link' href='#restage'>Restage</a></li></ul></ul></ul>
      </div>
    </nav>

    <main class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
























































































<h1 id="introduction">Introduction</h1>

<h2 id="overview">Overview</h2>

<p>Welcome to the Cloud Foundry V3 API docs! Version 3 adds support for several
key features:</p>

<ul>
<li>Running one-off tasks on Cloud Foundry</li>
<li>Applications consisting of several processes via a Procfile</li>
<li>Direct access to application packages and droplets</li>
<li>Changing application source code without stopping the app via deployments</li>
</ul>

<h2 id="getting-help">Getting help</h2>

<p>The CAPI team can most easily be reached on our <a href="https://cloudfoundry.slack.com/messages/capi/">Slack channel</a> for
questions and issues regarding the API. To report an issue with the docs or API, please feel free to file a GitHub
issue on our API repo, <a href="https://github.com/cloudfoundry/cloud_controller_ng">cloud_controller_ng</a>.</p>

<p>We recommend reaching out to Slack first as we will be most responsive there.</p>

<h2 id="more-resources">More resources</h2>

<ul>
<li>The <a href="http://v2-apidocs.cloudfoundry.org/">Cloud Foundry V2 API</a> is still available for interacting with Cloud Foundry.</li>
<li><a href="https://docs.cloudfoundry.org/devguide/using-tasks.html">Running Tasks</a></li>
<li><a href="https://github.com/cloudfoundry/cloud_controller_ng/tree/main/docs/v3">V3 API Documentation Source Code</a></li>
</ul>
<h1 id="concepts">Concepts</h1>
<h2 id="api-resource">API Resource</h2>

<p>A resource represents an individual object within the system, such as an app or a service. It is represented as a JSON object.</p>

<p>A resource consists of several required resource fields and other attributes specific to the resource.</p>

<p>See <a href="#resources">Resources</a> and <a href="#experimental-resources">Experimental Resources</a> for specific resources.</p>

<h3 id="required-fields">Required fields</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Person Resource
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T23:26:46Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-17T20:00:42Z"</span><span class="p">,</span><span class="w">

  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">

  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/people/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>The unique identifier for the resource</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The ISO8601 compatible date and time when resource was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The ISO8601 compatible date and time when resource was last updated</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>URLs to related resources and actions for the current resource</td>
</tr>
</tbody></table>

<h3 id="links">Links</h3>

<p>Links provide URLs to <a href="#relationships">relationships</a> and actions for a resource. Links are represented as a JSON object and always contain a <code class="prettyprint">self</code> link.</p>

<p>Each link is keyed by its type and will include a <code class="prettyprint">href</code> for the URL and an optional <code class="prettyprint">method</code> for links that cannot be followed using <code class="prettyprint">GET</code>.</p>

<h4 id="the-link-object">The link object</h4>
<div class="highlight"><pre class="highlight plaintext"><code>Example Link object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/some/endpoint"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>href</strong></td>
<td><em>string</em></td>
<td>The absolute URL</td>
</tr>
<tr>
<td><strong>method</strong></td>
<td><em>string</em></td>
<td>An optional field containing the HTTP method to be used when following the URL</td>
</tr>
</tbody></table>
<h2 id="authentication">Authentication</h2>

<p>The Cloud Foundry V3 API is secured using OAuth 2. Clients are expected to present a valid bearer token via HTTP header: <code class="prettyprint">Authorization: bearer &lt;token&gt;</code></p>

<p>Tokens can be obtained from the Cloud Foundry UAA server. For more information, see the <a href="http://docs.cloudfoundry.org/api/uaa/index.html">UAA API Documentation</a></p>

<aside class="notice">
Use the CF CLI to obtain a bearer token: <code>cf oauth-token</code>
</aside>
<h2 id="authorization">Authorization</h2>

<p>Access to resources is determined by combining scopes in the OAuth 2 token with user roles that are managed by the API.</p>

<h4 id="oauth-2-scopes">OAuth 2 scopes</h4>

<table><thead>
<tr>
<th>Scope</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">cloud_controller.admin</code></td>
<td>This scope provides read and write access to all resources</td>
</tr>
<tr>
<td><code class="prettyprint">cloud_controller.admin_read_only</code></td>
<td>This scope provides read only access to all resources</td>
</tr>
<tr>
<td><code class="prettyprint">cloud_controller.global_auditor</code></td>
<td>This scope provides read only access to all resources except secrets (such as environment variables)</td>
</tr>
<tr>
<td><code class="prettyprint">cloud_controller.read</code></td>
<td>This scope provides read access to resources based on user roles</td>
</tr>
<tr>
<td><code class="prettyprint">cloud_controller.write</code></td>
<td>This scope provides write access to resources based on user roles</td>
</tr>
<tr>
<td><code class="prettyprint">cloud_controller.update_build_state</code></td>
<td>This scope allows its bearer to update the state of a build; currently only used when <a href="#update-a-build">updating builds</a></td>
</tr>
<tr>
<td><code class="prettyprint">cloud_controller_service_permissions.read</code></td>
<td>This scope provides read only access for <a href="#get-permissions-for-a-service-instance">service instance permissions</a></td>
</tr>
</tbody></table>

<h4 id="cloud-foundry-user-roles">Cloud Foundry user roles</h4>

<p>Users that interact with the API should have one or more of these roles. Some of them (e.g. admin)
are controlled via scopes on the user&rsquo;s token. Others (e.g. space developer) are controlled via the
<a href="#roles">roles resource</a>.</p>

<table><thead>
<tr>
<th>Role</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td>Allows a user to manage the platform; OAuth token must contain <code class="prettyprint">cloud_controller.admin</code> scope</td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td>Allows a user to read all resources on the platform; OAuth token must contain <code class="prettyprint">cloud_controller.admin_read_only</code> scope</td>
</tr>
<tr>
<td>Global Auditor</td>
<td>Allows a user to read all resources on the platform, excluding sensitive data such as environment variables and service bindings. OAuth token must contain <code class="prettyprint">cloud_controller.global_auditor</code> scope</td>
</tr>
<tr>
<td>Org User</td>
<td>Allows a user to be assigned other roles within an organization and its spaces</td>
</tr>
<tr>
<td>Org Manager</td>
<td>Provides organization management access</td>
</tr>
<tr>
<td>Org Auditor</td>
<td>Provides read-only access to an organization for auditing purposes</td>
</tr>
<tr>
<td>Org Billing Manager</td>
<td>Allows a user to create and manage billing account and payment information</td>
</tr>
<tr>
<td>Space Developer</td>
<td>Allows developers to create and manage apps and services in a space</td>
</tr>
<tr>
<td>Space Manager</td>
<td>Provides space management access</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Provides read-only access to a space for auditing purposes</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Troubleshoot and debug apps and service bindings in a space</td>
</tr>
</tbody></table>

<h4 id="component-roles">Component roles</h4>

<p>Components that interact with the Cloud Controller in the back-end can be given these roles to allow
limited access to API resources. These roles are controlled via scopes on the component&rsquo;s token.</p>

<table><thead>
<tr>
<th>Role</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Build State Updater</td>
<td>Allows a component to update the state of build resources; OAuth token must contain <code class="prettyprint">cloud_controller.update_build_state</code> scope</td>
</tr>
</tbody></table>
<h2 id="errors">Errors</h2>
<div class="highlight"><pre class="highlight plaintext"><code>Example Error
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">10008</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CF-UnprocessableEntity"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something went wrong"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>An error response will always return a list of error objects. Errors appear on the <a href="#jobs">job resource</a> for asynchronous operations.</p>

<h3 id="the-error-object">The error object</h3>

<p>Clients should use the <code class="prettyprint">code</code> and <code class="prettyprint">title</code> fields for programmatically handling specific errors.
The message in the <code class="prettyprint">detail</code> field is subject to change over time.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>code</strong></td>
<td><em>integer</em></td>
<td>A numeric code for this error</td>
</tr>
<tr>
<td><strong>title</strong></td>
<td><em>string</em></td>
<td>Name of the error</td>
</tr>
<tr>
<td><strong>detail</strong></td>
<td><em>string</em></td>
<td>Detailed description of the error</td>
</tr>
</tbody></table>

<h3 id="common-errors">Common errors</h3>

<p>These are some of the more common errors returned by many endpoints.</p>

<table><thead>
<tr>
<th>Title</th>
<th>Code</th>
<th>HTTP Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">CF-BadQueryParameter</code></td>
<td>10005</td>
<td>400</td>
<td>An invalid query parameter was given</td>
</tr>
<tr>
<td><code class="prettyprint">CF-InvalidAuthToken</code></td>
<td>1000</td>
<td>401</td>
<td>An invalid auth token was given</td>
</tr>
<tr>
<td><code class="prettyprint">CF-NotAuthenticated</code></td>
<td>10002</td>
<td>401</td>
<td>No auth token was given, but authentication is required for this endpoint</td>
</tr>
<tr>
<td><code class="prettyprint">CF-NotAuthorized</code></td>
<td>10003</td>
<td>403</td>
<td>The authenticated user does not have permission to perform this operation</td>
</tr>
<tr>
<td><code class="prettyprint">CF-ResourceNotFound</code></td>
<td>10010</td>
<td>404</td>
<td>The specified resource does not exist, or the authenticated user cannot read it</td>
</tr>
<tr>
<td><code class="prettyprint">CF-UnprocessableEntity</code></td>
<td>10008</td>
<td>422</td>
<td>Catch-all error when an operation fails to complete; the <code class="prettyprint">detail</code> field will contain more information</td>
</tr>
<tr>
<td><code class="prettyprint">CF-UaaRateLimited</code></td>
<td>20008</td>
<td>429</td>
<td>Too many requests were made to the UAA instance. The request can be retried after the period stated in the <code class="prettyprint">Retry-After</code> header</td>
</tr>
<tr>
<td><code class="prettyprint">UnknownError</code></td>
<td>10001</td>
<td>500</td>
<td>An unexpected, uncaught error occurred; the CC logs will contain more information</td>
</tr>
</tbody></table>
<h2 id="fields">Fields</h2>

<p>The <code class="prettyprint">fields</code> parameter allows clients to fetch resources and include information of parent objects
in the response.  It works in a similar way to <a href="#include">include</a>, but the response only displays
the requested fields rather than the entire resource.</p>

<p>For example, a response to <code class="prettyprint">/v3/service_instances/:guid?fields[space.organization]=name</code> will contain detailed
information about the service instance, as well as the name of the organization it belongs to.</p>

<p>Developers may choose to use the <code class="prettyprint">fields</code> feature to reduce the number of API calls. The fields
query param can be used with a single resource or a list of resources.</p>

<p>The fields query parameter may also grant visibility to parts of resources where the whole resource is not visible.
For instance, the name of an organization may be retrieved with fields, where the whole organization resource may
not be visible.</p>

<h3 id="fields-parameter">Fields parameter</h3>

<p>The fields parameter is structured as: <code class="prettyprint">fields[resource]=keys&amp;fields[parent.resource]=other,keys</code></p>

<ul>
<li><code class="prettyprint">resource</code> is the name of the resource being requested, qualified by the relationship to the current resource.
For example <code class="prettyprint">/v3/service_instances?fields[space]=name</code> where <code class="prettyprint">space</code> is a direct relationship of a service instance,
or <code class="prettyprint">/v3/service_instances?fields[space.organization]=name</code> where <code class="prettyprint">organization</code> is a relationship of <code class="prettyprint">space</code>.</li>
<li><code class="prettyprint">keys</code> is a comma-separated list of the fields in the object being requested. For example,
<code class="prettyprint">/v3/service_instances?fields[space]=name,guid</code> will return just the <code class="prettyprint">name</code> and <code class="prettyprint">guid</code> of the space in the includes section.</li>
</ul>

<p>For information on <code class="prettyprint">fields</code> support for each resource refer to its documentation.</p>

<h3 id="resources-with-fields">Resources with Fields</h3>

<table><thead>
<tr>
<th>Resource</th>
<th>Endpoint</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Service Instances</strong></td>
<td><a href="#list-service-instances">v3/service_instances</a>, <a href="/#get-a-service-instance">v3/service_instances/:guid</a></td>
</tr>
<tr>
<td><strong>Shared Spaces</strong></td>
<td><a href="#list-shared-spaces-relationship">/v3/service_instances/:guid/relationships/shared_spaces</a></td>
</tr>
<tr>
<td><strong>Service Offerings</strong></td>
<td><a href="#list-service-offerings">v3/service_offerings</a>, <a href="/#get-a-service-offering">v3/service_offerings/:guid</a></td>
</tr>
<tr>
<td><strong>Service Plans</strong></td>
<td><a href="#list-service-plans">v3/service_plans</a>, <a href="/#get-a-service-plan">v3/service_plans/:guid</a></td>
</tr>
</tbody></table>

<h3 id="fields-sample-requests">Fields Sample requests</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example request to service instances resource to include parent orgs and spaces
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances?fields[space]=name,guid,relationships.organization&amp;fields[space.organization]=name,guid"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example response
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
       </span><span class="nl">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42ad8d5a-8124-4fc7-baf2-3f39bfe1c170"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"service_instance_1"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b90f287b-fcdd-4cbb-9523-1a8dbd2a9837"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"service_instance_2"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nl">"included"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"134f95ad-b5eb-4b55-9ce0-b906c513d54b"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                     </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b2075a71-28b6-411a-a896-56f75d892f58"</span><span class="w">
                  </span><span class="p">}</span><span class="w">
               </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00b76d5c-5176-4cbc-be5d-0bd76363dca9"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                     </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b56fbd01-296b-442b-8faf-a559aebf985e"</span><span class="w">
                  </span><span class="p">}</span><span class="w">
               </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b2075a71-28b6-411a-a896-56f75d892f58"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"org1"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b56fbd01-296b-442b-8faf-a559aebf985e"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"org2"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id="filters">Filters</h2>

<p>Endpoints which return lists of resources also support filtering the returned resources using query parameters. Each
resource&rsquo;s list endpoint documents the allowed filters for that endpoint. For details about the syntax of query parameters
in general, see <a href="#query-parameters">query parameters</a>.</p>

<h4 id="examples">Examples</h4>

<h5 id="single-value-request"><strong>Single value request</strong></h5>

<p><code class="prettyprint">GET /v3/apps?names=the_name</code></p>

<p>This will return all apps with name <code class="prettyprint">the_name</code>.</p>

<h5 id="multiple-value-request"><strong>Multiple value request</strong></h5>

<p><code class="prettyprint">GET /v3/apps?names=first_name,second_name</code></p>

<p>This will return all apps with name <code class="prettyprint">the_name</code> OR <code class="prettyprint">second_name</code>.</p>

<p>In the case of audit events, multiple timestamps can be requested, which will return all audit
events that occurred at those timestamps. In the following request, all audit events that occurred
New Year&rsquo;s just before midnight and July 4th at noon will be returned:</p>

<p><code class="prettyprint">GET /v3/audit_events?created_ats=2019-12-31T23:59:59Z,2020-07-04T12:00:00Z</code></p>

<h6 id="exception"><strong>Exception</strong></h6>

<p>The <code class="prettyprint">label_selector</code> query parameter will act as AND function, not an OR.</p>

<p><code class="prettyprint">GET /v3/spaces?label_selector=production,east_coast</code></p>

<p>This will return all spaces whose metadata has labels with keys <code class="prettyprint">production</code> AND <code class="prettyprint">east_coast</code>.</p>

<h5 id="combined-filters"><strong>Combined filters</strong></h5>

<p><code class="prettyprint">GET /v3/apps?names=the_name&amp;stacks=cflinuxfs4</code></p>

<p>This will return all apps with name <code class="prettyprint">the_name</code> AND stack <code class="prettyprint">cflinuxfs4</code>.</p>

<h5 id="empty-filters"><strong>Empty filters</strong></h5>

<p>An empty filter (<code class="prettyprint">/v3/resources?fields=</code>) can mean either empty string (<code class="prettyprint">&quot;&quot;</code>) or <code class="prettyprint">NULL</code>, depending on the resource type.</p>

<p><code class="prettyprint">GET /v3/buildpacks?stacks=</code></p>

<p>This will return all buildpacks with stack <code class="prettyprint">NULL</code>.</p>

<p><code class="prettyprint">GET /v3/routes?hosts=hostname1,,hostname2</code></p>

<p>This will return all routes with hostname <code class="prettyprint">&quot;hostname1&quot;</code>, <code class="prettyprint">&quot;&quot;</code> OR <code class="prettyprint">&quot;hostname2&quot;</code>.</p>

<h4 id="relational-operators">Relational Operators</h4>

<p>Some fields (e.g. <code class="prettyprint">created_at</code> and <code class="prettyprint">updated_at</code>) can be filtered using relational operators when listing resources.</p>

<p>For example, a response to <code class="prettyprint">GET /v3/audit_events?created_ats[lt]=2020-06-30T12:34:56Z</code> will contain
audit events with a <code class="prettyprint">created_at</code> timestamp strictly earlier than <code class="prettyprint">2020-06-30T12:34:56Z</code>.</p>

<p>Multiple relational operators can be combined to further refine the listed resources. For example, a
response to <code class="prettyprint">GET /v3/audit_events?created_ats[lt]=2020-01-02T00:00:00Z&amp;created_ats[gt]=2019-12-31T23:59:59Z</code>
will return all audit events occurring on New Year&rsquo;s Day.</p>

<p>Timestamps must be in <a href="#timestamps">standard timestamp format</a>.</p>

<h5 id="valid-relational-operators">Valid relational operators</h5>

<table><thead>
<tr>
<th><strong>Operator</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td><strong>lt</strong></td>
<td>Return resources strictly less than the given value for the filtered attribute</td>
</tr>
<tr>
<td><strong>lte</strong></td>
<td>Return resources less than or equal to the given value for the filtered attribute</td>
</tr>
<tr>
<td><strong>gt</strong></td>
<td>Return resources strictly greater than the given value for the filtered attribute</td>
</tr>
<tr>
<td><strong>gte</strong></td>
<td>Return resources greater than or equal to the given value for the filtered attribute</td>
</tr>
</tbody></table>

<h4 id="exclusion-operator">Exclusion Operator</h4>

<p>Some fields support filtering on all values except a given set of values.</p>

<p>For example, a response to <code class="prettyprint">GET /v3/audit_events?target_guids[not]=guid-1,guid-2</code>
will contain audit events with a <code class="prettyprint">target.guid</code> not equal to <code class="prettyprint">guid-1</code> nor <code class="prettyprint">guid-2</code>.</p>

<table><thead>
<tr>
<th><strong>Operator</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td><strong>not</strong></td>
<td>Return resources not equal to the given value(s) for the filtered attribute</td>
</tr>
</tbody></table>
<h2 id="include">Include</h2>

<p>The <code class="prettyprint">include</code> parameter allows clients to fetch resources and include information of parent objects in the response.
For example, a response to <code class="prettyprint">/v3/spaces/:guid?include=organization</code> will contain detailed information about the space and its parent organization.</p>

<p>Developers may choose to use the <code class="prettyprint">include</code> feature to reduce the number of API calls. The include
query param can be used with a single resource or a list of resources.</p>

<h3 id="resources-with-includes">Resources with includes</h3>

<p>The following resources can take an <code class="prettyprint">include</code> parameter:</p>

<table><thead>
<tr>
<th>Resource</th>
<th>Allowed values</th>
</tr>
</thead><tbody>
<tr>
<td><strong>apps</strong></td>
<td><code class="prettyprint">space.organization</code>, <code class="prettyprint">space</code></td>
</tr>
<tr>
<td><strong>apps/[:guid]</strong></td>
<td><code class="prettyprint">space.organization</code>, <code class="prettyprint">space</code></td>
</tr>
<tr>
<td><strong>roles</strong></td>
<td><code class="prettyprint">user</code>, <code class="prettyprint">space</code>, <code class="prettyprint">organization</code></td>
</tr>
<tr>
<td><strong>roles/[:guid]</strong></td>
<td><code class="prettyprint">user</code>, <code class="prettyprint">space</code>, <code class="prettyprint">organization</code></td>
</tr>
<tr>
<td><strong>routes</strong></td>
<td><code class="prettyprint">domain</code>, <code class="prettyprint">space.organization</code>, <code class="prettyprint">space</code></td>
</tr>
<tr>
<td><strong>routes/[:guid]</strong></td>
<td><code class="prettyprint">domain</code>, <code class="prettyprint">space.organization</code>, <code class="prettyprint">space</code></td>
</tr>
<tr>
<td><strong>service_plans</strong></td>
<td><code class="prettyprint">space.organization</code>, <code class="prettyprint">service_offering</code></td>
</tr>
<tr>
<td><strong>service_plans/[:guid]</strong></td>
<td><code class="prettyprint">space.organization</code>, <code class="prettyprint">service_offering</code></td>
</tr>
<tr>
<td><strong>service_credential_bindings</strong></td>
<td><code class="prettyprint">app</code>, <code class="prettyprint">service_instance</code></td>
</tr>
<tr>
<td><strong>service_credential_bindings/[:guid]</strong></td>
<td><code class="prettyprint">app</code>, <code class="prettyprint">service_instance</code></td>
</tr>
<tr>
<td><strong>service_route_bindings</strong></td>
<td><code class="prettyprint">route</code>, <code class="prettyprint">service_instance</code></td>
</tr>
<tr>
<td><strong>service_route_bindings/[:guid]</strong></td>
<td><code class="prettyprint">route</code>, <code class="prettyprint">service_instance</code></td>
</tr>
<tr>
<td><strong>spaces</strong></td>
<td><code class="prettyprint">organization</code></td>
</tr>
<tr>
<td><strong>spaces/[:guid]</strong></td>
<td><code class="prettyprint">organization</code></td>
</tr>
</tbody></table>

<h3 id="sample-requests">Sample requests</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example request to apps resource to include parent orgs and spaces
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps?include=space.organization"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example response
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
     </span><span class="nl">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42ad8d5a-8124-4fc7-baf2-3f39bfe1c170"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app1"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b90f287b-fcdd-4cbb-9523-1a8dbd2a9837"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app2"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nl">"included"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"134f95ad-b5eb-4b55-9ce0-b906c513d54b"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00b76d5c-5176-4cbc-be5d-0bd76363dca9"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b2075a71-28b6-411a-a896-56f75d892f58"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"org1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b56fbd01-296b-442b-8faf-a559aebf985e"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"org2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example request for a single app instance to include its parent space
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]?include=space"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example response
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b90f287b-fcdd-4cbb-9523-1a8dbd2a9837"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"staticfile"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
   </span><span class="nl">"included"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00b76d5c-5176-4cbc-be5d-0bd76363dca9"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space1a"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id="lifecycles">Lifecycles</h2>

<p>Lifecycles inform the platform of how to build droplets and run apps. For example, a <code class="prettyprint">docker</code> lifecycle will
pull a Docker image from a registry to run an app.</p>

<h4 id="the-lifecycle-object">The lifecycle object</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Type of the lifecycle; valid values are <code class="prettyprint">buildpack</code>, <code class="prettyprint">cnb</code>, <code class="prettyprint">docker</code></td>
</tr>
<tr>
<td><strong>data</strong></td>
<td><em>object</em></td>
<td>Data that is used during staging and running for a lifecycle</td>
</tr>
</tbody></table>

<h3 id="buildpack-lifecycle">Buildpack lifecycle</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Buildpack Lifecycle
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"java_buildpack"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This is the default lifecycle for Cloud Foundry for VMs. When staging an app with this lifecycle, the app source code will be
compiled using a buildpack, resulting in a droplet.  When running an app with this lifecycle, a container running a rootfs
will be created and the droplet will be expanded inside that container to be executed.</p>

<p>If buildpacks are not specified, then Cloud Foundry will automatically detect a
compatible buildpack, based on the files in an app&rsquo;s package. If a stack is not
specified, then the app will default to the operator-configured default stack.</p>

<h4 id="buildpack-lifecycle-object">Buildpack lifecycle object</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td><code class="prettyprint">buildpack</code></td>
</tr>
<tr>
<td><strong>data.buildpacks</strong></td>
<td><em>list of strings</em></td>
<td>A list of the names of buildpacks, URLs from which they may be downloaded, or <code class="prettyprint">null</code> to auto-detect a suitable buildpack during staging</td>
</tr>
<tr>
<td><strong>data.stack</strong></td>
<td><em>string</em></td>
<td>The root filesystem to use with the buildpack, for example <code class="prettyprint">cflinuxfs4</code></td>
</tr>
</tbody></table>

<h3 id="cloud-native-buildpacks-lifecycle-experimental">Cloud Native Buildpacks Lifecycle <em>(experimental)</em></h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Cloud Native Buildpacks lifecycle
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cnb"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"docker://example.org/java-buildpack:latest"</span><span class="w">
            </span><span class="s2">"docker://second-example.org/logging-buildpack:latest"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"example.org"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"****"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"second-example.org"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"****"</span><span class="w">
            </span><span class="p">},</span><span class="w">
        </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This lifecycle allows Cloud Foundry to stage an application using the <a href="https://buildpacks.io/">Cloud Native Buildpacks</a>.</p>

<p><strong>Note</strong>: the <strong>data.buildpacks</strong> field is required (at least 1 buildpack must be set).</p>

<h4 id="cloud-native-buildpacks-lifecycle-object">Cloud Native Buildpacks lifecycle object</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td><code class="prettyprint">cnb</code></td>
</tr>
<tr>
<td><strong>data.buildpacks</strong></td>
<td><em>list of strings</em></td>
<td>A list of URLs with either <code class="prettyprint">docker://</code> or <code class="prettyprint">http(s)://</code> scheme, pointing to the Cloud Native Buildpack OCI image. <br/>When the scheme is <code class="prettyprint">http(s)://</code>, an OCI tarball is expected to be present at the specified location.</td>
</tr>
<tr>
<td><strong>data.credentials</strong></td>
<td><em>object</em></td>
<td>Credentials used to download the configured buildpacks. This can either contain username/password  or a token.</td>
</tr>
<tr>
<td><strong>data.stack</strong></td>
<td><em>string</em></td>
<td>The root filesystem to use with the buildpack, for example <code class="prettyprint">cflinuxfs4</code></td>
</tr>
</tbody></table>

<h3 id="docker-lifecycle">Docker lifecycle</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Docker Lifecycle
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"docker"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This allows Cloud Foundry to run pre-built Docker images. When staging an app with this lifecycle, the Docker registry is queried for
metadata about the image, such as ports and start command.  When running an app with this lifecycle, a container is created
and the Docker image is executed inside of it.</p>

<h4 id="docker-lifecycle-object">Docker lifecycle object</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td><code class="prettyprint">docker</code></td>
</tr>
<tr>
<td><strong>data</strong></td>
<td><em>object</em></td>
<td>Data is not used by the Docker lifecycle; valid value is <code class="prettyprint">{}</code></td>
</tr>
</tbody></table>
<h2 id="metadata">Metadata</h2>

<p>Metadata allows you to tag <a href="#api-resource">API resources</a> with information that does not directly affect its functionality.</p>

<h3 id="annotations">Annotations</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Resource with Annotations
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T23:26:46Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-17T20:00:42Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api-server"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"contacts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bill tel(1111111) email(bill@fixme), Bob tel(222222) pager(3333333#555) email(bob@fixme)"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Annotations are user-specified key-value pairs that are attached to <a href="#api-resource">API resources</a>. They do not affect the operation of Cloud Foundry. Annotations cannot be used in <a href="#filters">filters</a>.</p>

<p>When a service instance is being created, the service broker is sent the annotations of the service instance, and the space and organization in which the service instance resides.
When a service instance is being updated, the service broker is sent the annotations of the space and organization in which the service instance resides.
When a service binding is being created, the service broker is sent annotations of any associated app, and the space and organization in which the binding resides.
Only annotations with a prefix (e.g. <code class="prettyprint">company.com/contacts</code>) are sent to service brokers.</p>

<p>Examples may include (but are not limited to):</p>

<ul>
<li><code class="prettyprint">&quot;contact info&quot;: &quot;bob@example.com jane@example.com&quot;</code></li>
<li><code class="prettyprint">&quot;library versions&quot;: &quot;Spring: 5.1, Redis Client: a184098. yaml parser: 38&quot;</code></li>
<li><code class="prettyprint">&quot;git-sha&quot;: &quot;d56fe0367554ae5e878e37ed6c5b9a82f5995512&quot;</code></li>
</ul>

<h4 id="annotation-keys">Annotation keys</h4>

<p>Annotation keys are made up of an (optional) prefix and name. If a prefix is present, it is separated from the name by a <code class="prettyprint">/</code>.
Prefixes are DNS names intended to enable namespacing of annotation keys.</p>

<p>An annotation key <code class="prettyprint">prefix</code> must adhere to the following restrictions:</p>

<ul>
<li>Length: 0-253 characters</li>
<li>Allowed characters: a-z, A-Z, 0-9, <code class="prettyprint">-</code>, and <code class="prettyprint">.</code>; emojis cannot be used in keys</li>
<li>DNS subdomain format (series of subdomain annotations separated by <code class="prettyprint">.</code>)</li>
</ul>

<p>An annotation key <code class="prettyprint">name</code> must adhere to the following restrictions:</p>

<ul>
<li>Length: 1-63 characters</li>
<li>Allowed characters: a-z, A-Z, 0-9, <code class="prettyprint">-</code>, <code class="prettyprint">_</code>, and <code class="prettyprint">.</code>; emojis cannot be used in keys</li>
<li>Must begin and end with an alphanumeric character</li>
</ul>

<h4 id="annotation-values">Annotation values</h4>

<p>Annotation values must adhere to the following restrictions:</p>

<ul>
<li>Length: 0-5000 unicode characters</li>
</ul>

<h3 id="labels-and-selectors">Labels and selectors</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Resource with Labels
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T23:26:46Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-17T20:00:42Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api-server"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"environment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"internet-facing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Labels are user-specified key/value pairs that are attached to <a href="#api-resource">API Resources</a>.
They are queryable, identifying attributes of a resource, but they do not affect the operation of CloudFoundry.</p>

<p>For example, an app may be assigned a label with key <code class="prettyprint">sensitive</code> and possible values <code class="prettyprint">true</code> or <code class="prettyprint">false</code>.</p>

<p>Users could then find all sensitive apps with a selector for <code class="prettyprint">sensitive=true</code>, resulting in a response containing
only apps having the label key <code class="prettyprint">sensitive</code> with a label value of <code class="prettyprint">true</code>.</p>

<h4 id="labels">Labels</h4>

<p>Labels allow users to apply identifying attributes to resources that are meaningful to the user, but not the CloudFoundry system.</p>

<p>Examples may include (but are not limited to):</p>

<ul>
<li><code class="prettyprint">&quot;production&quot; : &quot;true&quot;</code> or <code class="prettyprint">&quot;production&quot; : &quot;false&quot;</code></li>
<li><code class="prettyprint">&quot;env&quot; : &quot;dev&quot;</code> or <code class="prettyprint">&quot;env&quot; : &quot;test&quot;</code> or <code class="prettyprint">&quot;env&quot; : &quot;prod&quot;</code></li>
<li><code class="prettyprint">&quot;chargeback-code&quot; : &quot;abc123&quot;</code></li>
</ul>

<h5 id="label-keys">Label keys</h5>

<p>Label keys are made up of an (optional) prefix, and name. If a prefix is present, it is separated from the name by a <code class="prettyprint">/</code>.
Prefixes are dns names intended to enable namespacing of label keys.</p>

<p>A label key <code class="prettyprint">prefix</code> must adhere to the following restrictions:</p>

<ul>
<li>Length: 0-253 characters</li>
<li>Allowed characters: alphanumeric ( [a-z0-9A-Z] ), <code class="prettyprint">-</code>, and <code class="prettyprint">.</code></li>
<li>DNS subdomain format (series of subdomain labels separated by <code class="prettyprint">.</code>)</li>
</ul>

<p>A label key <code class="prettyprint">name</code> must adhere to the following restrictions:</p>

<ul>
<li>Length: 1-63 characters</li>
<li>Allowed characters: alphanumeric ( [a-z0-9A-Z] ), <code class="prettyprint">-</code>, <code class="prettyprint">_</code>, and <code class="prettyprint">.</code></li>
<li>Must begin and end with an alphanumeric character</li>
</ul>

<h5 id="label-values">Label values</h5>

<p>Label values must adhere to the following restrictions:</p>

<ul>
<li>Length: 0-63 characters</li>
<li>Allowed characters: alphanumeric ( [a-z0-9A-Z] ), <code class="prettyprint">-</code>, <code class="prettyprint">_</code>, and <code class="prettyprint">.</code></li>
<li>Must begin and end with an alphanumeric character</li>
<li>Empty values are allowed</li>
</ul>

<h4 id="selectors">Selectors</h4>
<div class="highlight"><pre class="highlight plaintext"><code>Example label selector
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>cf curl /v3/apps?label_selector<span class="o">=</span><span class="nb">env</span><span class="o">=</span>dev,%21chargeback-code,tier%20in%20%28backend,worker%29
</code></pre></div>
<p>Selectors allow users to filter and group API resources by the labels applied to them. A selector consists of one or
more <code class="prettyprint">requirements</code> in a comma-delimited list. The maximum number of <code class="prettyprint">requirements</code> in a single selector is 50.</p>

<p><em>eg:</em> <code class="prettyprint">env=dev,!chargeback-code,tier in (backend,worker)</code></p>

<p>Selectors can be used to filter and group resources using the query parameter <code class="prettyprint">label_selector</code> on list endpoints.</p>

<aside class="notice">
When included in a url, the selector must be appropriately escaped.
</aside>

<p>A requirement consists of a <em>key</em>, an <code class="prettyprint">operator</code>, and optional <em>value(s)</em>.</p>

<table><thead>
<tr>
<th>Requirement</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>existence</td>
<td><em>key</em></td>
<td>Returns all resources that have been assigned a label with the given <em>key</em> (with any <em>value</em>)</td>
</tr>
<tr>
<td>non-existence</td>
<td><code class="prettyprint">!</code><em>key</em></td>
<td>Returns all resources that have not been assigned a label with the given <em>key</em> (with any <em>value</em>)</td>
</tr>
<tr>
<td>equality</td>
<td><em>key</em><code class="prettyprint">=</code><em>value</em> or <em>key</em><code class="prettyprint">==</code><em>value</em></td>
<td>Returns all resources that have been assigned a label with the given <em>key</em> and <em>value</em></td>
</tr>
<tr>
<td>inequality</td>
<td><em>key</em><code class="prettyprint">!=</code><em>value</em></td>
<td>Returns all resources that either have not been assigned a label with the given <em>key</em> or have a label with the given <em>key</em> but a different <em>value</em></td>
</tr>
<tr>
<td>set inclusion</td>
<td><em>key</em> <code class="prettyprint">in</code> (<em>value1</em>,<em>value2</em>&hellip;)</td>
<td>Returns all resources that have been assigned a label with the given <em>key</em> with one of the specified <em>value(s)</em></td>
</tr>
<tr>
<td>set exclusion</td>
<td><em>key</em> <code class="prettyprint">notin</code> (<em>value1</em>,<em>value2</em>&hellip;)</td>
<td>Returns all resources that either have not been assigned a label with the given <em>key</em> or have a label with the given <em>key</em> but none of the specified <em>value(s)</em></td>
</tr>
</tbody></table>

<p>See <a href="https://docs.cloudfoundry.org/adminguide/metadata.html#query">the metadata documentation</a> for more information.</p>

<h3 id="updating-labels-and-annotations">Updating labels and annotations</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Initial Metadata
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"environment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"staging"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ready-to-deploy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nl">"spring-version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.1"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"app-version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1-alpha"</span><span class="w">
     </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Patch Request Body
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"environment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ready-to-deploy"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nl">"app-version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"deployed-month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"november"</span><span class="w">
     </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Final Metadata
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"environment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nl">"spring-version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.1"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"app-version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"deployed-month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"november"</span><span class="w">
     </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Labels and annotations can be updated by using the PATCH endpoint for their resource.
For example, to update labels or annotations on an app, use the <a href="#update-an-app">update an app</a> endpoint.
When patching metadata, CAPI endpoints do a deep merge, only updating labels or annotations that are specified in the request.</p>

<p>Labels and annotations follow the same rules for patching and must be wrapped in the metadata object inside the request body</p>

<ul>
<li>To create, include the new key with a value</li>
<li>To change, include the existing key with a new value</li>
<li>To delete, include the existing key with a <code class="prettyprint">null</code> value</li>
<li>To remain unchanged, do not include the existing key.</li>
</ul>
<h2 id="pagination">Pagination</h2>
<div class="highlight"><pre class="highlight plaintext"><code>Example Paginated Response
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/people?page=1&amp;per_page=1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/people?page=3&amp;per_page=1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/people?page=2&amp;per_page=1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T23:26:46Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-17T20:00:42Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/people/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Any request that can return multiple resources will be paginated and contain a <code class="prettyprint">pagination</code> object and list of <code class="prettyprint">resources</code>.
Requests for multiple resources can use <code class="prettyprint">page</code>, <code class="prettyprint">per_page</code>, and <code class="prettyprint">order_by</code> in addition to filters specific to the endpoint.</p>

<h4 id="the-pagination-object">The pagination object</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>total_results</strong></td>
<td><em>integer</em></td>
<td>Total number of resources for all pages</td>
</tr>
<tr>
<td><strong>total_pages</strong></td>
<td><em>integer</em></td>
<td>Total number of pages</td>
</tr>
<tr>
<td><strong>first</strong></td>
<td><a href="#the-link-object"><em>link object</em></a></td>
<td>Link to the first page</td>
</tr>
<tr>
<td><strong>last</strong></td>
<td><a href="#the-link-object"><em>link object</em></a></td>
<td>Link to the last page</td>
</tr>
<tr>
<td><strong>next</strong></td>
<td><a href="#the-link-object"><em>link object</em></a></td>
<td>Link to the next page</td>
</tr>
<tr>
<td><strong>previous</strong></td>
<td><a href="#the-link-object"><em>link object</em></a></td>
<td>Link to the previous page</td>
</tr>
</tbody></table>
<h2 id="procfiles">Procfiles</h2>
<div class="highlight"><pre class="highlight plaintext"><code>Example Ruby Procfile
</code></pre></div><div class="highlight"><pre class="highlight yaml"><code><span class="na">web</span><span class="pi">:</span> <span class="s">bundle exec rackup config.ru -p $PORT</span>
<span class="na">rake</span><span class="pi">:</span> <span class="s">bundle exec rake</span>
<span class="na">worker</span><span class="pi">:</span> <span class="s">bundle exec rake workers:start</span>
</code></pre></div>
<p>A Procfile enables you to declare required runtime processes, called process types, for your app.
Procfiles must be named <code class="prettyprint">Procfile</code> exactly and placed in the root directory of your application.</p>

<p>In a Procfile, you declare one process type per line and use the syntax <code class="prettyprint">PROCESS_TYPE: COMMAND</code>.</p>

<ul>
<li><code class="prettyprint">PROCESS_TYPE</code> defines the type of the process.</li>
<li><code class="prettyprint">COMMAND</code> is the command line to launch the process.</li>
</ul>

<h4 id="procfile-use-cases">Procfile use cases</h4>

<p>Many buildpacks provide their own process types and commands by default; however, there are special
cases where specifying a custom <code class="prettyprint">COMMAND</code> is necessary.  Commands can be overwritten by providing a
Procfile with the same process type.</p>

<p>For example, a buildpack may provide a <code class="prettyprint">worker</code> process type that runs the <code class="prettyprint">rake default:start</code>
command.  If a Procfile is provided that also contains a <code class="prettyprint">worker</code> process type, but a different
command such as <code class="prettyprint">rake custom:start</code>, the <code class="prettyprint">rake custom:start</code> command will be used.</p>

<p>Some buildpacks, such as Python, that work on a variety of frameworks, do not attempt to provide a
default start command. For these cases, a Procfile should be used to specify any necessary commands
for the app.</p>

<h4 id="web-process">Web process</h4>

<p><code class="prettyprint">web</code> is a <a href="#web-process-type">special process type</a> that is required for all applications.
The <code class="prettyprint">web</code> <code class="prettyprint">PROCESS_TYPE</code> must be specified by either the buildpack or the Procfile.</p>

<h4 id="specifying-processes-in-manifest-files">Specifying processes in manifest files</h4>

<p>Custom process types can also be configured via a manifest file. Read more about
<a href="#manifests">manifests</a>. It is not recommended to specify processes in both a manifest and a
Procfile for the same app.</p>
<h2 id="query-parameters">Query Parameters</h2>

<p>Clients can assume that query parameters on the API will always follow these rules:</p>

<ul>
<li>Parameter names (before the <code class="prettyprint">=</code>, and ignoring any modifiers like <code class="prettyprint">[gt]</code>) will only contain characters <code class="prettyprint">a-z</code> (lowercase) and <code class="prettyprint">-</code>.</li>
<li>When a parameter accepts multiple values, these will be represented as a comma-delimited list of strings (see <a href="#filters">filters</a>).</li>
</ul>

<p>Because commas are used to separate list entries, <strong>parameter values that contain commas must be percent-encoded</strong>. For example, to retrieve apps named either <code class="prettyprint">a,b</code> or <code class="prettyprint">c,d</code>, the query parameter would look like <code class="prettyprint">names=a%2Cb,c%2Cd</code>. Note that the commas within the app names are encoded (as <code class="prettyprint">%2C</code>), but the comma separating the two app names is not. The resulting query parameter must be encoded a second time before sending it to the API, e.g. <code class="prettyprint">cf curl /v3/apps?names=a%252Cb,c%252Cd</code>.</p>
<h2 id="relationships">Relationships</h2>

<p>Relationships represent associations between resources. When relationships are mutable, they can be
used to create, read, update, and delete these associations. An app&rsquo;s relationship to its current
droplet is mutable, but an app&rsquo;s relationship to its space is not.</p>

<p>Relationships do not affect the fundamental properties of a resource, but may affect their behavior
and permissions logic. Relationships are tied to the lifecycles of the associated resources and
will be removed if either of the associated resources are deleted. For example, if a user is removed
from an organization, both the user and the organization persist, but the relationship between them
does not.</p>

<p>Not all resources implement every relationship operation demonstrated in the examples below. See the
docs for each resource to see how it interacts with its relationships.</p>

<p>Endpoints that return relationship data list this information under the <code class="prettyprint">relationships</code> key.</p>

<h4 id="the-relationship-object">The relationship object</h4>

<p>The relationship object is a key-value pair that uniquely identifies a resource. In practice this is
almost always the <code class="prettyprint">guid</code> of a resource.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>string</em></td>
<td>The unique identifier for the related resource</td>
</tr>
</tbody></table>

<h3 id="to-one-relationships">To-one relationships</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example to-one relationship
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[related-resource-guid]"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Some relationships relate a resource to exactly one other resource. For example an app can belong to
only one space.</p>

<h4 id="to-one-relationship-object">To-one relationship object</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data</strong></td>
<td><em><a href="#the-relationship-object">relationship object</a></em></td>
<td>A single relationship</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight plaintext"><code>Setting the to-one relationship while creating an object
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/books"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "color": "yellow",
    "relationships": {
      "publisher": {
        "data": {
          "guid": "publisher-guid"
        }
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Modifying the to-one relationship
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/books/[guid]/relationships/publisher"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "data": {
      "guid": "publisher-guid"
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Removing the to-one relationship
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/books/[guid]/relationships/publisher"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "data": null }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Viewing the to-one relationship
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/books/[guid]/relationships/publisher"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div>
<h3 id="to-many-relationships">To-many relationships</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example to-many relationship
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[related-resource-guid-1]"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[related-resource-guid-2]"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Some relationships relate a resource to several other resources. For example, an isolation segment can be entitled to multiple organizations.</p>

<h4 id="to-many-relationship-object">To-many relationship object</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data</strong></td>
<td><em>array of <a href="#the-relationship-object">relationship objects</a></em></td>
<td>An array of multiple relationships</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight plaintext"><code>Adding related to-many resources
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/books/[guid]/relationships/authors"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "data": [
      { "guid":"author-guid-1" },
      { "guid":"author-guid-2" }
    ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Replacing all to-many relationships
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/books/[guid]/relationships/authors"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "data": [
      { "guid":"author-guid-3" },
      { "guid":"author-guid-4" }
    ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Removing all to-many relationships
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/books/[guid]/relationships/authors"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "data": [] }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Removing specific to-many relationships
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/books/[guid]/relationships/authors/[author-guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Viewing the to-many relationships
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/books/[guid]/relationships/authors"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><h2 id="status-codes">Status Codes</h2>

<p>Cloud Foundry V3 API uses a subset of HTTP response codes to indicate the success or failure of an API request.
In general, codes in the 2xx range indicate success, codes in the 4xx range indicate an error that can potentially be fixed by correcting the request, and codes in the 5xx range indicate an error on the server side.</p>

<table><thead>
<tr>
<th>HTTP Status Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200 OK</td>
<td>The request completed successfully</td>
</tr>
<tr>
<td>201 Created</td>
<td>The request completed successfully and created a new resource</td>
</tr>
<tr>
<td>202 Accepted</td>
<td>The request will be completed asynchronously; see <a href="#asynchronous-operations">asynchronous operations</a></td>
</tr>
<tr>
<td>204 No Content</td>
<td>The request completed successfully and did not return a body</td>
</tr>
<tr>
<td>400 Bad Request</td>
<td>The request has malformed or invalid data</td>
</tr>
<tr>
<td>401 Unauthenticated</td>
<td>The request requires an authenticated user</td>
</tr>
<tr>
<td>403 Forbidden</td>
<td>The request cannot be performed by the user</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>The requested resource does not exist</td>
</tr>
<tr>
<td>422 Unprocessable Entity</td>
<td>The request cannot be performed</td>
</tr>
<tr>
<td>500 Internal Server Error</td>
<td>An unexpected error occurred</td>
</tr>
<tr>
<td>502 Bad Gateway</td>
<td>An external upstream service caused the request to fail</td>
</tr>
<tr>
<td>503 Service Unavailable</td>
<td>An internal upstream service caused the request to fail</td>
</tr>
</tbody></table>
<h2 id="timestamps">Timestamps</h2>

<p>Timestamps generally appear in <code class="prettyprint">created_at</code> and <code class="prettyprint">updated_at</code> fields on resources.  Precision beyond
seconds is not supported, even if the underlying database supports it (e.g. Postgres). As a result,
filtering on sub-second timestamps is not allowed.</p>

<p>All v3 timestamps have the following format <code class="prettyprint">YYYY-MM-DDThh:mm:ssZ</code>.</p>

<p>Example timestamp (June 30, 2020 at 11:49:04 PM UTC): <code class="prettyprint">2020-06-30T23:49:04Z</code></p>
<h2 id="updating-actual-state">Updating Actual State</h2>

<p>The Cloud Controller is primarily responsible for the desired state of apps and processes. Most endpoints will
only update the desired states of your apps and processes within Cloud Controller in order
to provide users with the opportunity to incur zero downtime when updating apps. Restarting
the app will be required for the desired state changes to become the actual state.</p>

<p>The <a href="#get-stats-for-a-process">stats endpoint</a> can be used at any time to determine the actual
(running) state of a process, and by proxy, an app.</p>

<h4 id="endpoints-that-will-affect-runtime">Endpoints that will affect runtime</h4>

<p>The following endpoints will immediately impact the runtime of the app, and the desired changes will take effect without needing to <a href="#restart-an-app">restart the app</a>.</p>

<table><thead>
<tr>
<th>Endpoint</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#get-ssh-enabled-for-an-app"><code class="prettyprint">PATCH /v3/spaces/:guid/features/ssh</code></a></td>
</tr>
<tr>
<td><a href="#remove-destination-for-a-route"><code class="prettyprint">DELETE /v3/routes/:guid/destinations/:destination_guid</code></a></td>
</tr>
</tbody></table>

<p>The following endpoints will immediately impact runtime and take effect when <strong>only</strong> the <code class="prettyprint">instances</code> field is updated. If any other fields are updated, the app will need to be restarted in order for any desired changes to take effect, including instance count changes.</p>

<table><thead>
<tr>
<th>Endpoint</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#scale-a-process"><code class="prettyprint">POST /v3/processes/:guid/actions/scale</code></a></td>
</tr>
<tr>
<td><a href="#scale-a-process"><code class="prettyprint">POST /v3/apps/:guid/processes/:type/actions/scale</code></a></td>
</tr>
</tbody></table>

<p>The following endpoints will immediately impact runtime and the desired changes will take effect if the specified fields are <strong>not</strong> included in the request.</p>

<p>If the field is specified, the app will need to be restarted in order for any desired changes to take effect.</p>

<table><thead>
<tr>
<th>Endpoint</th>
<th>Changes requiring a restart</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#insert-destinations-for-a-route"><code class="prettyprint">POST /v3/routes/:guid/destinations</code></a></td>
<td>Adding a destination with a port</td>
</tr>
<tr>
<td><a href="#replace-all-destinations-for-a-route"><code class="prettyprint">PATCH /v3/routes/:guid/destinations</code></a></td>
<td>Replacing the port field <br/> <br/>  <em>Note: If the port is specified, this endpoint will unmap any route not listed in the body but will not map any of the new routes in the request body. For this reason we caution against using the endpoint in most circumstances. A combination of <a href="#insert-destinations-for-a-route">adding ports</a> and <a href="#remove-destination-for-a-route">removing ports</a> will better fit most use cases.</em></td>
</tr>
</tbody></table>

<p>All other changes will not take effect on running apps until they are restarted.</p>
<h2 id="warnings">Warnings</h2>
<div class="highlight"><pre class="highlight plaintext"><code>Example Warnings
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"warnings"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something went wrong"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Warnings appear on the <a href="#jobs">job resource</a>.</p>

<h4 id="the-warning-object">The warning object</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>detail</strong></td>
<td><em>string</em></td>
<td>Description of the warning</td>
</tr>
</tbody></table>
<h1 id="resources">Resources</h1>
<h2 id="admin">Admin</h2>

<p>These endpoints are only for admin users.</p>
<h3 id="clear-buildpack-cache">Clear buildpack cache</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/admin/actions/clear_buildpack_cache"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<p>This endpoint will delete all of the existing buildpack caches in the
blobstore. The buildpack cache is used during staging by buildpacks as a way to
cache certain resources, e.g. downloaded Ruby gems. An admin who wants to
decrease the size of their blobstore could use this endpoint to delete
unnecessary blobs.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/admin/actions/clear_buildpack_cache</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h2 id="apps">Apps</h2>

<p>Apps are top-level objects that link together and contain configuration
information for your packages, droplets, processes, tasks, and more.</p>
<h3 id="the-app-object">The app object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example App object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_app"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOPPED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T21:41:30Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"java_buildpack"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/processes"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"packages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/packages"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/environment_variables"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets/current"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/tasks"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/start"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"stop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/stop"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"deployed_revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions/deployed"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/features"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the app</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the app</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td><em>string</em></td>
<td>Current desired state of the app; valid values are <code class="prettyprint">STOPPED</code> or <code class="prettyprint">STARTED</code></td>
</tr>
<tr>
<td><strong>lifecycle</strong></td>
<td><a href="#the-lifecycle-object"><em>lifecycle object</em></a></td>
<td>Provides the default lifecycle object for the application. This lifecycle will be used when staging and running the application. The staging lifecycle can be overridden on <a href="#builds">builds</a></td>
</tr>
<tr>
<td><strong>relationships.space</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The space the app is contained in</td>
</tr>
<tr>
<td><strong>relationships.current_droplet</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The current droplet used by the application</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the app</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations added to the app</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="create-an-app">Create an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "my_app",
    "relationships": {
      "space": {
        "data": {
          "guid": "2f35885d-0c9d-4423-83ad-fd05066f8576"
        }
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_app"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOPPED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T21:41:30Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"java_buildpack"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/processes"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"packages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/packages"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/environment_variables"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets/current"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/tasks"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/start"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"stop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/stop"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"deployed_revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions/deployed"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/features"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/apps</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the app</td>
</tr>
<tr>
<td><strong>relationships.space</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to a space</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>environment_variables</strong></td>
<td><em>object</em></td>
<td>Environment variables to be used for the App when running</td>
<td><code class="prettyprint">{}</code></td>
</tr>
<tr>
<td><strong>lifecycle</strong></td>
<td><a href="#the-lifecycle-object"><em>lifecycle object</em></a></td>
<td>Provides the lifecycle object for the application</td>
<td><a href="#buildpack-lifecycle-object">buildpack lifecycle</a></td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the app</td>
<td></td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the app</td>
<td></td>
</tr>
</tbody></table>

<h4 id="potential-errors-experimental">Potential errors <em>(experimental)</em></h4>

<p>In addition to any <a href="#common-errors">common errors</a>, this endpoint may return the following errors.</p>

<table><thead>
<tr>
<th>Title</th>
<th>Code</th>
<th>HTTP Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">CF-UniquenessError</code></td>
<td>10016</td>
<td>422</td>
<td>The given app name is already taken in the targeted space</td>
</tr>
<tr>
<td><code class="prettyprint">CF-FeatureDisabled</code></td>
<td>330002</td>
<td>403</td>
<td>Some <a href="#list-of-feature-flags">feature flag</a> must be enabled by the Cloud Foundry admin in order to push the app as is. The <code class="prettyprint">detail</code> message should contain information on which feature is disabled.</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="get-an-app">Get an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_app"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOPPED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T21:41:30Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"java_buildpack"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/processes"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"packages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/packages"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/environment_variables"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets/current"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/tasks"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/start"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"stop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/stop"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"deployed_revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions/deployed"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/features"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>include</strong></td>
<td><em>list of strings</em></td>
<td>Optionally include additional related resources in the response; valid values are <code class="prettyprint">space</code> and <code class="prettyprint">space.organization</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-apps">List apps</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps?page=1&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps?page=2&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps?page=2&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_app"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STARTED"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T21:41:30Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T11:32:30Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"java_buildpack"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/processes"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"packages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/packages"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/environment_variables"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets/current"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"droplets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/tasks"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/start"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"stop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/stop"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"deployed_revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions/deployed"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/features"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
          </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02b4ec9b-94c7-4468-9c23-4e906191a0f8"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_app2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOPPED"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1970-01-01T00:00:02Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"ruby_buildpack"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/processes"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"packages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/packages"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/environment_variables"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/droplets/current"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"droplets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/droplets"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/tasks"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/actions/start"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"stop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/actions/stop"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org//v3/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/revisions"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"deployed_revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org//v3/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/revisions/deployed"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org//v3/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/features"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
          </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all apps the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of app guids to filter by</td>
</tr>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of app names to filter by</td>
</tr>
<tr>
<td><strong>space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space guids to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>stacks</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of stack names to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code>, <code class="prettyprint">name</code>, <code class="prettyprint">state</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>lifecycle_type</strong></td>
<td><em>string</em></td>
<td><a href="#lifecycles">Lifecycle</a> type to filter by; valid values are <code class="prettyprint">buildpack</code>, <code class="prettyprint">cnb</code>, <code class="prettyprint">docker</code></td>
</tr>
<tr>
<td><strong>include</strong></td>
<td><em>list of strings</em></td>
<td>Optionally include a list of unique related resources in the response; valid values are <code class="prettyprint">space</code> and <code class="prettyprint">space.organization</code></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="update-an-app">Update an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "my_app",
    "lifecycle": {
      "type": "buildpack",
      "data": {
        "buildpacks": ["java_buildpack"]
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_app"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STARTED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T21:41:30Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T11:32:30Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"java_buildpack"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/processes"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"packages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/packages"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/environment_variables"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets/current"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/tasks"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/start"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"stop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/stop"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"deployed_revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions/deployed"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/features"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/apps/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the app</td>
</tr>
<tr>
<td><strong>lifecycle</strong></td>
<td><a href="#the-lifecycle-object"><em>lifecycle object</em></a></td>
<td>Lifecycle to be used when updating the app; note: <code class="prettyprint">data</code> is a required field in lifecycle if lifecycle is updated. <code class="prettyprint">type</code> may NOT be changed from its current value.</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the app</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the app</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="delete-an-app">Delete an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/apps/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="get-current-droplet">Get current droplet</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/droplets/current"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"execution_metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"rake"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rake"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup config.ru -p $PORT"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"detect_output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby 1.6.14"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1.1."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"buildpack_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:47Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/8222f76a-9e09-4360-b3aa-1ed329945e92"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"assign_current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396/relationships/current_droplet"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="nl">"download"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16/download"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/droplets/current</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="get-current-droplet-association-for-an-app">Get current droplet association for an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/relationships/current_droplet"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9d8e007c-ce52-4ea7-8a57-f2825d2c6b39"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/d4c91047-7b29-4fda-b7f9-04033e5c9c9f/relationships/current_droplet"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"related"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/d4c91047-7b29-4fda-b7f9-04033e5c9c9f/droplets/current"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the current droplet relationship for an app.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/relationships/current_droplet</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="get-environment-for-an-app">Get environment for an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/env"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"staging_env_json"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"GEM_CACHE"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gem-cache.example.org"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"running_env_json"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"HTTP_PROXY"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://proxy.example.org"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"RAILS_ENV"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"system_env_json"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"VCAP_SERVICES"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"mysql"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db-for-my-app"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"binding_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0e85b634-e043-4b43-96da-f83dfe83ab33"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"binding_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db-for-my-app"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instance_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07fca01c-f789-4d45-80b4-e19ba3ca862c"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instance_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-mysql-service"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mysql"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"relational"</span><span class="p">,</span><span class="w"> </span><span class="s2">"sql"</span><span class="p">],</span><span class="w">
          </span><span class="nl">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xlarge"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"top-secret"</span><span class="w">
           </span><span class="p">},</span><span class="w">
          </span><span class="nl">"syslog_drain_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://syslog.example.org/drain"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"volume_mounts"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
          </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"application_env_json"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"VCAP_APPLICATION"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"limits"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"fds"</span><span class="p">:</span><span class="w"> </span><span class="mi">16384</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"application_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_app"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"application_uris"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"my_app.example.org"</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_app"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"space_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_space"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"space_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"uris"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"my_app.example.org"</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieve the environment variables that will be provided to an app at runtime.
It will include environment variables for Environment Variable Groups and Service Bindings.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/env</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
<tr>
<td>Space Supporter</td>
<td><code class="prettyprint">system_env_json</code> redacted</td>
</tr>
</tbody></table>
<h3 id="get-environment-variables-for-an-app">Get environment variables for an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/environment_variables"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"var"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"RAILS_ENV"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/[guid]/environment_variables"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/[guid]"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieve the environment variables that are associated with the given app.
For the entire list of environment variables that will be available to the app at runtime, see the <a href="#get-environment-for-an-app">env endpoint</a>.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/environment_variables</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="get-permissions-for-an-app">Get permissions for an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/permissions"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"read_basic_data"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"read_sensitive_data"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get the current user&rsquo;s permissions for the given app. If a user can see an app,
then they can see its basic data. Only admin, read-only admins, and space
developers can read sensitive data.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/permissions</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="set-current-droplet">Set current droplet</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/relationships/current_droplet"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "data": { "guid": "[droplet_guid]" } }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9d8e007c-ce52-4ea7-8a57-f2825d2c6b39"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/d4c91047-7b29-4fda-b7f9-04033e5c9c9f/relationships/current_droplet"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"related"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/d4c91047-7b29-4fda-b7f9-04033e5c9c9f/droplets/current"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Set the current droplet for an app. The current droplet is the droplet that the app will use when running.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/apps/:guid/relationships/current_droplet</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="get-ssh-enabled-for-an-app">Get SSH enabled for an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/:guid/ssh_enabled"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Disabled globally"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Returns if an application&rsquo;s runtime environment will accept ssh connections.
If ssh is disabled,
the <code class="prettyprint">reason</code> field will describe
whether it is disabled globally, at the space level, or at the app level.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/ssh_enabled</code> <br></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="start-an-app">Start an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/actions/start"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_app"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STARTED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T21:41:30Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T11:32:30Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"java_buildpack"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/processes"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"packages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/packages"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/environment_variables"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets/current"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/tasks"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/start"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"stop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/stop"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"deployed_revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions/deployed"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/features"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/apps/:guid/actions/start</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="stop-an-app">Stop an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/actions/stop"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_app"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOPPED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T21:41:30Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T11:32:30Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"java_buildpack"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/processes"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"packages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/packages"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/environment_variables"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets/current"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/tasks"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/start"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"stop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/stop"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"deployed_revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions/deployed"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/features"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/apps/:guid/actions/stop</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="restart-an-app">Restart an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/actions/restart"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_app"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STARTED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T21:41:30Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T11:32:30Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"java_buildpack"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/processes"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"packages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/packages"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/environment_variables"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets/current"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/tasks"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/start"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"stop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/stop"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"deployed_revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions/deployed"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/features"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint will synchronously stop and start an application.
Unlike the <a href="#start-an-app">start</a> and <a href="#stop-an-app">stop</a> actions,
this endpoint will error if the app is not successfully stopped
in the runtime.</p>

<p>For restarting applications without downtime, see the <a href="#deployments">deployments</a> resource.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/apps/:guid/actions/restart</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="clear-buildpack-cache-for-application">Clear buildpack cache for application</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/actions/clear_buildpack_cache"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<p>This endpoint will delete the buildpack cache for a specified app.
The buildpack cache is used during staging by buildpacks as a way to
cache certain resources, e.g. downloaded Ruby gems. A user may want to use this
endpoint when an app doesn&rsquo;t stage anymore due to out-of-disk caused
by a large buildpack cache content.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/apps/:guid/actions/clear_buildpack_cache</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="update-environment-variables-for-an-app">Update environment variables for an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/environment_variables"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
     "var": {
       "DEBUG": "false",
       "USER": null
     }
   }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"var"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"RAILS_ENV"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"DEBUG"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/[guid]/environment_variables"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/[guid]"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Update the environment variables associated with the given app.
The variables given in the request will be merged with the existing app environment variables.
Any requested variables with a value of <code class="prettyprint">null</code> will be removed from the app.
Environment variable names may not start with VCAP_. PORT is not a valid environment variable.</p>

<aside class="notice">The updated environment variables will not take effect until the app is restarted.</aside>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/apps/:guid/environment_variables</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h2 id="app-features">App Features</h2>

<p>App features are used to manage whether optional capabilities are enabled for a given application.</p>
<h3 id="the-app-feature-object">The app feature object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example App Feature object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ssh"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable SSHing into the app."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the app feature</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td><em>string</em></td>
<td>Description of the app feature</td>
</tr>
<tr>
<td><strong>enabled</strong></td>
<td><em>boolean</em></td>
<td>Denotes whether or not the app feature is enabled</td>
</tr>
</tbody></table>
<h3 id="supported-app-features">Supported app features</h3>

<p><strong>Note</strong>: SSH must also be <a href="https://docs.cloudfoundry.org/running/config-ssh.html">enabled globally</a> and on the <a href="#space-features">space</a>.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ssh</strong></td>
<td>Enable SSHing into the app</td>
</tr>
<tr>
<td><strong>revisions</strong></td>
<td>Enable <a href="#revisions">versioning</a> of an application</td>
</tr>
<tr>
<td><strong>service-binding-k8s</strong></td>
<td>Enable k8s service bindings for the app (experimental)</td>
</tr>
<tr>
<td><strong>file-based-vcap-services</strong></td>
<td>Enable file-based VCAP service bindings for the app (experimental)</td>
</tr>
</tbody></table>
<h3 id="get-an-app-feature">Get an app feature</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/features/[name]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ssh"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable SSHing into the app."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/features/:name</code> <br></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-app-features">List app features</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/features"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ssh"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable SSHing into the app."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"revisions"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable versioning of an application"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"service-binding-k8s"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable k8s service bindings for the app"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file-based-vcap-services"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable file-based VCAP service bindings for the app"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v3/apps/05d39de4-2c9e-4c76-8fd6-10417da07e42/features"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v3/apps/05d39de4-2c9e-4c76-8fd6-10417da07e42/features"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the list of features for the specified app.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/features</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="update-an-app-feature">Update an app feature</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/features/[name]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "enabled": false }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ssh"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable SSHing into the app."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/apps/:guid/features/:name</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>enabled</strong></td>
<td><em>boolean</em></td>
<td>Denotes whether or not the app feature should be enabled</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Can only update <strong>revisions</strong> feature</td>
</tr>
</tbody></table>
<h2 id="app-usage-events">App Usage Events</h2>

<p>App usage events are a record of changes in the usage of apps and tasks.
Examples include starting an application, scaling an application (from, say, one
to three instances), and stopping an application.</p>

<p>Usage events are typically used by billing and chargeback applications.</p>
<h3 id="the-app-usage-event-object">The app usage event object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example App Usage Event object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a595fe2f-01ff-4965-a50c-290258ab8582"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-28T16:41:23Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-28T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STARTED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOPPED"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-f93250f7-7ef5-4b02-8d33-353919ce8358"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1982"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-e9d2d5a0-69a6-46ef-bac5-43f3ed177614"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type-1983"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-5e28f12f-9d80-473e-b826-537b148eb338"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1664"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-036444f4-f2f5-4ea8-a353-e73330ca0f0a"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"buildpack"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-34916716-31d7-40c1-9afd-f312996c9654"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"label-64"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"task"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-7cc11646-bf38-4f4e-b6e0-9581916a74d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-2929"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"memory_in_mb_per_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"instance_count"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/app_usage_events/a595fe2f-01ff-4965-a50c-290258ab8582"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the event</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the event occurred</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Identical to <code class="prettyprint">created_at</code> (events are created, never updated)</td>
</tr>
<tr>
<td><strong>state.current</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Current state of the app that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>state.previous</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Previous state of the app that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>app.guid</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Unique identifier of the app that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>app.name</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Name of the app that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>process.guid</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Unique identifier of the process that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>process.type</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Type of the process that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>space.guid</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Unique identifier of the space that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>space.name</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Name of the space that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>organization.guid</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Unique identifier of the org that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>buildpack.guid</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Unique identifier of the buildpack that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>buildpack.name</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Name of the buildpack that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>task.guid</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Unique identifier of the task that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>task.name</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Name of the task that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>memory_in_mb_per_instance.current</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Current memory in MB of the app that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>memory_in_mb_per_instance.previous</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Previous memory in MB of the app that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>instance_count.current</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Current instance count of the app that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>instance_count.previous</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Previous instance count of the app that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="get-an-app-usage-event">Get an app usage event</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/app_usage_events/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a595fe2f-01ff-4965-a50c-290258ab8582"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-28T16:41:23Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-28T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STARTED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOPPED"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-f93250f7-7ef5-4b02-8d33-353919ce8358"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1982"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-e9d2d5a0-69a6-46ef-bac5-43f3ed177614"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type-1983"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-5e28f12f-9d80-473e-b826-537b148eb338"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1664"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-036444f4-f2f5-4ea8-a353-e73330ca0f0a"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"buildpack"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-34916716-31d7-40c1-9afd-f312996c9654"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"label-64"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"task"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-7cc11646-bf38-4f4e-b6e0-9581916a74d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-2929"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"memory_in_mb_per_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"instance_count"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/app_usage_events/a595fe2f-01ff-4965-a50c-290258ab8582"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve an app usage event.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/app_usage_events/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
</tbody></table>
<h3 id="list-app-usage-events">List app usage events</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/app_usage_events"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/app_usage_events?page=1&amp;per_page=1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/app_usage_events?page=2&amp;per_page=1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/app_usage_events?page=2&amp;per_page=1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a595fe2f-01ff-4965-a50c-290258ab8582"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-28T16:41:23Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-28T16:41:26Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STARTED"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOPPED"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-f93250f7-7ef5-4b02-8d33-353919ce8358"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1982"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-e9d2d5a0-69a6-46ef-bac5-43f3ed177614"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"type-1983"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-5e28f12f-9d80-473e-b826-537b148eb338"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1664"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-036444f4-f2f5-4ea8-a353-e73330ca0f0a"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"buildpack"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-34916716-31d7-40c1-9afd-f312996c9654"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"label-64"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"task"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-7cc11646-bf38-4f4e-b6e0-9581916a74d9"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-2929"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"memory_in_mb_per_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
        </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"instance_count"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/app_usage_events/a595fe2f-01ff-4965-a50c-290258ab8582"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all app usage events the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/app_usage_events</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid value is <code class="prettyprint">created_at</code></td>
</tr>
<tr>
<td><strong>after_guid</strong></td>
<td><em>string</em></td>
<td>Filters out events before and including the event with the given guid</td>
</tr>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of usage event guids to filter by</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="purge-and-seed-app-usage-events">Purge and seed app usage events</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/app_usage_events/actions/destructively_purge_all_and_reseed"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

</code></pre></div>
<p>Destroys all existing events. Populates new usage events, one for each started app. All populated events will have a <code class="prettyprint">created_at</code> value of current time. There is the potential race condition if apps are currently being started, stopped, or scaled. The seeded usage events will have the same guid as the app.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/app_usage_events/actions/destructively_purge_all_and_reseed</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h2 id="audit-events">Audit Events</h2>

<p>Audit events help Cloud Foundry operators monitor actions taken against resources (such as apps) via user or system actions.</p>

<p>For more information, see the <a href="https://docs.cloudfoundry.org/running/managing-cf/audit-events.html">Cloud Foundry docs</a>.</p>

<h4 id="audit-event-types">Audit Event Types</h4>

<h5 id="app-lifecycle">App lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.app.apply_manifest</code></li>
<li><code class="prettyprint">audit.app.build.create</code></li>
<li><code class="prettyprint">audit.app.copy-bits</code></li>
<li><code class="prettyprint">audit.app.create</code></li>
<li><code class="prettyprint">audit.app.delete-request</code></li>
<li><code class="prettyprint">audit.app.deployment.cancel</code></li>
<li><code class="prettyprint">audit.app.deployment.create</code></li>
<li><code class="prettyprint">audit.app.deployment.continue</code></li>
<li><code class="prettyprint">audit.app.droplet.create</code></li>
<li><code class="prettyprint">audit.app.droplet.delete</code></li>
<li><code class="prettyprint">audit.app.droplet.download</code></li>
<li><code class="prettyprint">audit.app.droplet.mapped</code></li>
<li><code class="prettyprint">audit.app.droplet.upload</code></li>
<li><code class="prettyprint">audit.app.environment.show</code></li>
<li><code class="prettyprint">audit.app.environment_variables.show</code></li>
<li><code class="prettyprint">audit.app.map-route</code></li>
<li><code class="prettyprint">audit.app.package.create</code></li>
<li><code class="prettyprint">audit.app.package.delete</code></li>
<li><code class="prettyprint">audit.app.package.download</code></li>
<li><code class="prettyprint">audit.app.package.upload</code></li>
<li><code class="prettyprint">audit.app.process.crash</code></li>
<li><code class="prettyprint">audit.app.process.create</code></li>
<li><code class="prettyprint">audit.app.process.delete</code></li>
<li><code class="prettyprint">audit.app.process.ready</code></li>
<li><code class="prettyprint">audit.app.process.not-ready</code></li>
<li><code class="prettyprint">audit.app.process.rescheduling</code></li>
<li><code class="prettyprint">audit.app.process.scale</code></li>
<li><code class="prettyprint">audit.app.process.terminate_instance</code></li>
<li><code class="prettyprint">audit.app.process.update</code></li>
<li><code class="prettyprint">audit.app.restage</code></li>
<li><code class="prettyprint">audit.app.restart</code></li>
<li><code class="prettyprint">audit.app.revision.create</code></li>
<li><code class="prettyprint">audit.app.revision.environment_variables.show</code></li>
<li><code class="prettyprint">audit.app.ssh-authorized</code></li>
<li><code class="prettyprint">audit.app.ssh-unauthorized</code></li>
<li><code class="prettyprint">audit.app.start</code></li>
<li><code class="prettyprint">audit.app.stop</code></li>
<li><code class="prettyprint">audit.app.task.cancel</code></li>
<li><code class="prettyprint">audit.app.task.create</code></li>
<li><code class="prettyprint">audit.app.unmap-route</code></li>
<li><code class="prettyprint">audit.app.update</code></li>
<li><code class="prettyprint">audit.app.upload-bits</code></li>
</ul>

<h5 id="organization-lifecycle">Organization lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.organization.create</code></li>
<li><code class="prettyprint">audit.organization.delete-request</code></li>
<li><code class="prettyprint">audit.organization.update</code></li>
</ul>

<h5 id="route-lifecycle">Route lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.route.create</code></li>
<li><code class="prettyprint">audit.route.delete-request</code></li>
<li><code class="prettyprint">audit.route.share</code></li>
<li><code class="prettyprint">audit.route.transfer-owner</code></li>
<li><code class="prettyprint">audit.route.unshare</code></li>
<li><code class="prettyprint">audit.route.update</code></li>
</ul>

<h5 id="service-lifecycle">Service lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.service.create</code></li>
<li><code class="prettyprint">audit.service.delete</code></li>
<li><code class="prettyprint">audit.service.update</code></li>
</ul>

<h5 id="service_binding-lifecycle">Service_binding lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.service_binding.create</code></li>
<li><code class="prettyprint">audit.service_binding.delete</code></li>
<li><code class="prettyprint">audit.service_binding.show</code></li>
<li><code class="prettyprint">audit.service_binding.start_create</code></li>
<li><code class="prettyprint">audit.service_binding.start_delete</code></li>
<li><code class="prettyprint">audit.service_binding.update</code></li>
</ul>

<h5 id="service_broker-lifecycle">Service_broker lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.service_broker.create</code></li>
<li><code class="prettyprint">audit.service_broker.delete</code></li>
<li><code class="prettyprint">audit.service_broker.update</code></li>
</ul>

<h5 id="service_dashboard_client-lifecycle">Service_dashboard_client lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.service_dashboard_client.create</code></li>
<li><code class="prettyprint">audit.service_dashboard_client.delete</code></li>
</ul>

<h5 id="service_instance-lifecycle">Service_instance lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.service_instance.bind_route</code></li>
<li><code class="prettyprint">audit.service_instance.create</code></li>
<li><code class="prettyprint">audit.service_instance.delete</code></li>
<li><code class="prettyprint">audit.service_instance.purge</code></li>
<li><code class="prettyprint">audit.service_instance.share</code></li>
<li><code class="prettyprint">audit.service_instance.show</code></li>
<li><code class="prettyprint">audit.service_instance.start_create</code></li>
<li><code class="prettyprint">audit.service_instance.start_delete</code></li>
<li><code class="prettyprint">audit.service_instance.start_update</code></li>
<li><code class="prettyprint">audit.service_instance.unbind_route</code></li>
<li><code class="prettyprint">audit.service_instance.unshare</code></li>
<li><code class="prettyprint">audit.service_instance.update</code></li>
</ul>

<h5 id="service_key-lifecycle">Service_key lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.service_key.create</code></li>
<li><code class="prettyprint">audit.service_key.delete</code></li>
<li><code class="prettyprint">audit.service_key.show</code></li>
<li><code class="prettyprint">audit.service_key.start_create</code></li>
<li><code class="prettyprint">audit.service_key.start_delete</code></li>
<li><code class="prettyprint">audit.service_key.update</code></li>
</ul>

<h5 id="service_plan-lifecycle">Service_plan lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.service_plan.create</code></li>
<li><code class="prettyprint">audit.service_plan.delete</code></li>
<li><code class="prettyprint">audit.service_plan.update</code></li>
</ul>

<h5 id="service_plan_visibility-lifecycle">Service_plan_visibility lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.service_plan_visibility.create</code></li>
<li><code class="prettyprint">audit.service_plan_visibility.delete</code></li>
<li><code class="prettyprint">audit.service_plan_visibility.update</code></li>
</ul>

<h5 id="service_route_binding-lifecycle">Service_route_binding lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.service_route_binding.create</code></li>
<li><code class="prettyprint">audit.service_route_binding.delete</code></li>
<li><code class="prettyprint">audit.service_route_binding.start_create</code></li>
<li><code class="prettyprint">audit.service_route_binding.start_delete</code></li>
<li><code class="prettyprint">audit.service_route_binding.update</code></li>
</ul>

<h5 id="space-lifecycle">Space lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.space.create</code></li>
<li><code class="prettyprint">audit.space.delete-request</code></li>
<li><code class="prettyprint">audit.space.update</code></li>
</ul>

<h5 id="user-lifecycle">User lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.user.organization_auditor_add</code></li>
<li><code class="prettyprint">audit.user.organization_auditor_remove</code></li>
<li><code class="prettyprint">audit.user.organization_billing_manager_add</code></li>
<li><code class="prettyprint">audit.user.organization_billing_manager_remove</code></li>
<li><code class="prettyprint">audit.user.organization_manager_add</code></li>
<li><code class="prettyprint">audit.user.organization_manager_remove</code></li>
<li><code class="prettyprint">audit.user.organization_user_add</code></li>
<li><code class="prettyprint">audit.user.organization_user_remove</code></li>
<li><code class="prettyprint">audit.user.space_auditor_add</code></li>
<li><code class="prettyprint">audit.user.space_auditor_remove</code></li>
<li><code class="prettyprint">audit.user.space_developer_add</code></li>
<li><code class="prettyprint">audit.user.space_developer_remove</code></li>
<li><code class="prettyprint">audit.user.space_manager_add</code></li>
<li><code class="prettyprint">audit.user.space_manager_remove</code></li>
<li><code class="prettyprint">audit.user.space_supporter_add</code></li>
<li><code class="prettyprint">audit.user.space_supporter_remove</code></li>
</ul>

<h5 id="user_provided_service_instance-lifecycle">User_provided_service_instance lifecycle</h5>

<ul>
<li><code class="prettyprint">audit.user_provided_service_instance.create</code></li>
<li><code class="prettyprint">audit.user_provided_service_instance.delete</code></li>
<li><code class="prettyprint">audit.user_provided_service_instance.show</code></li>
<li><code class="prettyprint">audit.user_provided_service_instance.update</code></li>
</ul>

<h5 id="special-events">Special events</h5>

<ul>
<li><code class="prettyprint">app.crash</code></li>
<li><code class="prettyprint">blob.remove_orphan</code></li>
</ul>
<h3 id="the-audit-event-object">The audit event object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Audit Event object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a595fe2f-01ff-4965-a50c-290258ab8582"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:23Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"audit.app.update"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"actor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d144abe3-3d7b-40d4-b63f-2584798d3ee5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2e3151ba-9a63-4345-9c5b-6d8c238f4e55"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-app"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"recursive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cb97dd25-d4f7-4185-9e6f-ad6e585c207c"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d9be96f5-ea8f-4549-923f-bec882e32e3c"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/audit_events/a595fe2f-01ff-4965-a50c-290258ab8582"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the event</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>The type of the event</td>
</tr>
<tr>
<td><strong>actor.guid</strong></td>
<td><em>string</em></td>
<td>Unique identifier for the actor (user or system resource that performed the action)</td>
</tr>
<tr>
<td><strong>actor.type</strong></td>
<td><em>string</em></td>
<td>The actor type</td>
</tr>
<tr>
<td><strong>actor.name</strong></td>
<td><em>string</em></td>
<td>The name of the actor</td>
</tr>
<tr>
<td><strong>target.guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the target (resource that the event acted upon)</td>
</tr>
<tr>
<td><strong>target.type</strong></td>
<td><em>string</em></td>
<td>The target type</td>
</tr>
<tr>
<td><strong>target.name</strong></td>
<td><em>string</em></td>
<td>The name of the target</td>
</tr>
<tr>
<td><strong>data</strong></td>
<td><em>object</em></td>
<td>Additional information about event</td>
</tr>
<tr>
<td><strong>space.guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the space where the event occurred; if the event did not occur within a space, the <code class="prettyprint">space</code> field will be <code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>organization.guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the organization where the event occurred; if the event did not occur within an organization, the <code class="prettyprint">organization</code> field will be <code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="get-an-audit-event">Get an audit event</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/audit_events/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a595fe2f-01ff-4965-a50c-290258ab8582"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:23Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"audit.app.update"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"actor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d144abe3-3d7b-40d4-b63f-2584798d3ee5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2e3151ba-9a63-4345-9c5b-6d8c238f4e55"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-app"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"recursive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cb97dd25-d4f7-4185-9e6f-ad6e585c207c"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d9be96f5-ea8f-4549-923f-bec882e32e3c"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/audit_events/a595fe2f-01ff-4965-a50c-290258ab8582"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/audit_events/:guid</code> <br></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td></td>
</tr>
<tr>
<td>Org Auditor</td>
<td>Cannot see events which occurred in orgs that the user does not belong to</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Cannot see events which occurred in spaces that the user does not belong to</td>
</tr>
<tr>
<td>Space Developer</td>
<td>Cannot see events which occurred in spaces that the user does not belong to</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Cannot see events which occurred in spaces that the user does not belong to</td>
</tr>
</tbody></table>
<h3 id="list-audit-events">List audit events</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/audit_events"</span>     <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/audit_events?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/audit_events?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a595fe2f-01ff-4965-a50c-290258ab8582"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:23Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"audit.app.update"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"actor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d144abe3-3d7b-40d4-b63f-2584798d3ee5"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2e3151ba-9a63-4345-9c5b-6d8c238f4e55"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-app"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"recursive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cb97dd25-d4f7-4185-9e6f-ad6e585c207c"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d9be96f5-ea8f-4549-923f-bec882e32e3c"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org//v3/audit_events/a595fe2f-01ff-4965-a50c-290258ab8582"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all audit events the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/audit_events</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>types</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of event types to filter by</td>
</tr>
<tr>
<td><strong>target_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of target guids to filter by. Also supports <a href="#exclusion-operator">filtering by exclusion</a>.</td>
</tr>
<tr>
<td><strong>space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space guids to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h2 id="builds">Builds</h2>

<p>Builds represent the process of staging an application package. There are two types
(<a href="#lifecycles">lifecycles</a>) of builds: buildpack and docker.</p>

<p>After an <a href="#apps">application</a> is created and <a href="#packages">packages</a> are uploaded, a build
resource can be created to initiate the staging process. A successful build results in a 
<a href="#droplets">droplet</a>.</p>
<h3 id="the-build-object">The build object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Build object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:47Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_by"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3cb4e243-bed4-49d5-8739-f8b45abdec1c"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill@example.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"staging_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"staging_disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"staging_log_rate_limit_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e4da443-f255-499c-8b47-b3729b5b7432"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1e1186e7-d803-4c46-b9d6-5c81e50fe55a"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/builds/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/1e1186e7-d803-4c46-b9d6-5c81e50fe55a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the build</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the build was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the build was last updated</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td><em>string</em></td>
<td>State of the build; valid states are <code class="prettyprint">STAGING</code>, <code class="prettyprint">STAGED</code>, or <code class="prettyprint">FAILED</code></td>
</tr>
<tr>
<td><strong>staging_memory_in_mb</strong></td>
<td><em>integer</em></td>
<td>Memory in MB allocated for staging of the build</td>
</tr>
<tr>
<td><strong>staging_disk_in_mb</strong></td>
<td><em>integer</em></td>
<td>Disk space in MB allocated for staging of the build</td>
</tr>
<tr>
<td><strong>staging_log_rate_limit_bytes_per_second</strong></td>
<td><em>integer</em></td>
<td>Log rate limit in bytes per second allocated for staging of the build</td>
</tr>
<tr>
<td><strong>error</strong></td>
<td><em>string</em></td>
<td>A string describing errors during the build process</td>
</tr>
<tr>
<td><strong>lifecycle</strong></td>
<td><a href="#the-lifecycle-object"><em>lifecycle object</em></a></td>
<td>Provides the lifecycle object to use during staging; this will override the build&rsquo;s application&rsquo;s default lifecycle for this build</td>
</tr>
<tr>
<td><strong>package.guid</strong></td>
<td><em>string</em></td>
<td>The package that is the input to the staging process</td>
</tr>
<tr>
<td><strong>droplet.guid</strong></td>
<td><em>string</em></td>
<td>A resulting droplet from the staging process; <code class="prettyprint">droplet</code> will be <code class="prettyprint">null</code> if staging has not completed</td>
</tr>
<tr>
<td><strong>created_by.guid</strong></td>
<td><em>object</em></td>
<td>The guid of the user that created the build</td>
</tr>
<tr>
<td><strong>created_by.name</strong></td>
<td><em>object</em></td>
<td>The name of the user that created the build</td>
</tr>
<tr>
<td><strong>created_by.email</strong></td>
<td><em>object</em></td>
<td>The email of the user that created the build</td>
</tr>
<tr>
<td><strong>relationships.app</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The app the build belongs to</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the build</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the build</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="create-a-build">Create a build</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/builds"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "package": {
       "guid": "[package-guid]"
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_by"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3cb4e243-bed4-49d5-8739-f8b45abdec1c"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill@example.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGING"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"staging_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"staging_disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"staging_log_rate_limit_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e4da443-f255-499c-8b47-b3729b5b7432"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/builds/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/builds</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>package</strong></td>
<td><em>object</em></td>
<td>App package to stage</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>lifecycle</strong></td>
<td><a href="#the-lifecycle-object"><em>lifecycle object</em></a></td>
<td>Lifecycle information for a build</td>
<td>lifecycle on the app</td>
</tr>
<tr>
<td><strong>staging_memory_in_mb</strong></td>
<td><em>integer</em></td>
<td>Memory in MB allocated for staging of the build</td>
<td></td>
</tr>
<tr>
<td><strong>staging_disk_in_mb</strong></td>
<td><em>integer</em></td>
<td>Disk space in MB allocated for staging of the build</td>
<td></td>
</tr>
<tr>
<td><strong>staging_log_rate_limit_bytes_per_second</strong></td>
<td><em>integer</em></td>
<td>Log rate limit in bytes per second allocated for staging of the build</td>
<td></td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the build</td>
<td></td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the build</td>
<td></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="get-a-build">Get a build</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/builds/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:47Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_by"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3cb4e243-bed4-49d5-8739-f8b45abdec1c"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill@example.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"staging_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"staging_disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"staging_log_rate_limit_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e4da443-f255-499c-8b47-b3729b5b7432"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1e1186e7-d803-4c46-b9d6-5c81e50fe55a"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/builds/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/1e1186e7-d803-4c46-b9d6-5c81e50fe55a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/builds/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-builds">List builds</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/builds"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/builds?states=STAGING&amp;page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/builds?states=STAGING&amp;page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_by"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3cb4e243-bed4-49d5-8739-f8b45abdec1c"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill@example.com"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"staging_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"staging_disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"staging_log_rate_limit_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="w"> </span><span class="p">],</span><span class="w">
          </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e4da443-f255-499c-8b47-b3729b5b7432"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/builds/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all builds the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/builds</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>states</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of build states to filter by</td>
</tr>
<tr>
<td><strong>app_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of app guids to filter by</td>
</tr>
<tr>
<td><strong>package_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of package guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by; defaults to ascending. Prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-builds-for-an-app">List builds for an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/builds"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/[guid]/builds?states=STAGING&amp;page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/[guid]/builds?states=STAGING&amp;page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_by"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3cb4e243-bed4-49d5-8739-f8b45abdec1c"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill@example.com"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"staging_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"staging_disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"staging_log_rate_limit_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="w"> </span><span class="p">],</span><span class="w">
          </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e4da443-f255-499c-8b47-b3729b5b7432"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/builds/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all builds for the app.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/builds</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>states</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of build states to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by; defaults to ascending. Prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="update-a-build">Update a build</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/builds/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "metadata": { "labels": { "key": "value" }, "annotations": {"note": "detailed information"}}}'</span>

</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:47Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_by"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3cb4e243-bed4-49d5-8739-f8b45abdec1c"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill@example.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"staging_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"staging_disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"staging_log_rate_limit_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e4da443-f255-499c-8b47-b3729b5b7432"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1e1186e7-d803-4c46-b9d6-5c81e50fe55a"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"key"</span><span class="p">:</span><span class="s2">"value"</span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"note"</span><span class="p">:</span><span class="s2">"detailed information"</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/builds/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/1e1186e7-d803-4c46-b9d6-5c81e50fe55a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/builds/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the build</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the build</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td><em>string</em></td>
<td>Build status; valid values are <code class="prettyprint">FAILED</code> or <code class="prettyprint">STAGED</code> (field can only be passed by Build State Updaters)</td>
</tr>
<tr>
<td><strong>lifecycle.data.image</strong></td>
<td><em>string</em></td>
<td>Image reference tag where the built complete image was stored (field can only be passed by Build State Updaters)</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
<tr>
<td>Build State Updater</td>
<td>This is a special component role; <a href="#component-roles">read more about component roles</a></td>
</tr>
</tbody></table>
<h2 id="buildpacks">Buildpacks</h2>

<p>Buildpacks are used during a <a href="#builds">build</a>
to download external dependencies
and transform a <a href="#packages">package</a>
into an executable <a href="#droplets">droplet</a>.
In this way, buildpacks are a pluggable extension to Cloud Foundry
that enable CF to run different languages and frameworks.
Buildpacks will automatically detect if they support an application.
Buildpacks can also be explicitly specified on <a href="#apps">apps</a> and <a href="#builds">builds</a>.</p>
<h3 id="the-buildpack-object">The buildpack object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Buildpack object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T23:26:46Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-17T20:00:42Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWAITING_UPLOAD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filename"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"windows64"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"upload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2/upload"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the buildpack</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>The name of the buildpack; to be used by app buildpack field (only alphanumeric characters)</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td><em>string</em></td>
<td>The state of the buildpack; valid states are: <code class="prettyprint">AWAITING_UPLOAD</code>, <code class="prettyprint">READY</code></td>
</tr>
<tr>
<td><strong>stack</strong></td>
<td><em>string</em></td>
<td>The name of the stack that the buildpack uses</td>
</tr>
<tr>
<td><strong>lifecycle</strong></td>
<td><em>string</em></td>
<td>The version of buildpacks the buildpack uses. <code class="prettyprint">buildpack</code> indicates <a href="https://docs.cloudfoundry.org/buildpacks/classic.html">Classic Buildpacks</a>. <code class="prettyprint">cnb</code> indicates <a href="https://docs.cloudfoundry.org/buildpacks/cnb/">Cloud Native Buildpacks</a></td>
</tr>
<tr>
<td><strong>filename</strong></td>
<td><em>string</em></td>
<td>The filename of the buildpack</td>
</tr>
<tr>
<td><strong>position</strong></td>
<td><em>integer</em></td>
<td>The order in which the buildpacks are checked during buildpack auto-detection</td>
</tr>
<tr>
<td><strong>enabled</strong></td>
<td><em>boolean</em></td>
<td>Whether or not the buildpack can be used for staging</td>
</tr>
<tr>
<td><strong>locked</strong></td>
<td><em>boolean</em></td>
<td>Whether or not the buildpack is locked to prevent updating the bits</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the app</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations added to the app</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="create-a-buildpack">Create a buildpack</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/buildpacks"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "ruby_buildpack",
    "position": 42,
    "enabled": true,
    "locked": false,
    "stack": "windows64"
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T23:26:46Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-17T20:00:42Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWAITING_UPLOAD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filename"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"windows64"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"upload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2/upload"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/buildpacks</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the buildpack</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>stack</strong></td>
<td><em>string</em></td>
<td>The name of the stack that the buildpack will use</td>
<td>null</td>
</tr>
<tr>
<td><strong>position</strong></td>
<td><em>integer</em></td>
<td>The order in which the buildpacks are checked during buildpack auto-detection</td>
<td>1</td>
</tr>
<tr>
<td><strong>lifecycle</strong></td>
<td><em>string</em></td>
<td>The version of buildpack the buildpack will use. <code class="prettyprint">buildpack</code> indicates <a href="https://docs.cloudfoundry.org/buildpacks/classic.html">Classic Buildpacks</a>. <code class="prettyprint">cnb</code> indicates <a href="https://docs.cloudfoundry.org/buildpacks/cnb/">Cloud Native Buildpacks</a></td>
<td>buildpack</td>
</tr>
<tr>
<td><strong>enabled</strong></td>
<td><em>boolean</em></td>
<td>Whether or not the buildpack will be used for staging</td>
<td>true</td>
</tr>
<tr>
<td><strong>locked</strong></td>
<td><em>boolean</em></td>
<td>Whether or not the buildpack is locked to prevent updating the bits</td>
<td>false</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the buildpack</td>
<td></td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the buildpack</td>
<td></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="get-a-buildpack">Get a buildpack</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/buildpacks/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T23:26:46Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-17T20:00:42Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWAITING_UPLOAD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filename"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"windows64"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"upload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2/upload"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/buildpacks/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-buildpacks">List buildpacks</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/buildpacks"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks?page=1&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks?page=2&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks?page=2&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T23:26:46Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-17T20:00:42Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-buildpack"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWAITING_UPLOAD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"filename"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cnb"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
          </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"upload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2/upload"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all buildpacks the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/buildpacks</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of buildpack names to filter by</td>
</tr>
<tr>
<td><strong>stacks</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of stack names to filter by</td>
</tr>
<tr>
<td><strong>lifecycle</strong></td>
<td><em>string</em></td>
<td>Type of buildpack. Valid values are <code class="prettyprint">buildpack</code> and <code class="prettyprint">cnb</code></td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by; defaults to ascending. Prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code>, <code class="prettyprint">lifecycle</code>, and <code class="prettyprint">position</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="update-a-buildpack">Update a buildpack</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/buildpacks/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "ruby_buildpack",
    "position": 42,
    "enabled": true,
    "locked": false,
    "stack": "windows64"
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T23:26:46Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-17T20:00:42Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWAITING_UPLOAD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filename"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"windows64"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"upload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2/upload"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/buildpacks/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the buildpack</td>
</tr>
<tr>
<td><strong>stack</strong></td>
<td><em>string</em></td>
<td>The name of the stack that the buildpack will use</td>
</tr>
<tr>
<td><strong>position</strong></td>
<td><em>integer</em></td>
<td>The order in which the buildpacks are checked during buildpack auto-detection</td>
</tr>
<tr>
<td><strong>enabled</strong></td>
<td><em>boolean</em></td>
<td>Whether or not the buildpack will be used for staging</td>
</tr>
<tr>
<td><strong>locked</strong></td>
<td><em>boolean</em></td>
<td>Whether or not the buildpack is locked to prevent updating the bits</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the buildpack</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the buildpack</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="delete-a-buildpack">Delete a buildpack</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/buildpacks/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/buildpacks/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="upload-buildpack-bits">Upload buildpack bits</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/buildpacks/[guid]/upload"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-F</span> <span class="nv">bits</span><span class="o">=</span>@<span class="s2">"buildpack.zip"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T23:26:46Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-17T20:00:42Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWAITING_UPLOAD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filename"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"windows64"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"upload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks/fd35633f-5c5c-4e4e-a5a9-0722c970a9d2/upload"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Upload a zip file containing a Cloud Foundry compatible buildpack. The file must be sent as part of a multi-part form.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/buildpacks/:guid/upload</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>bits</strong></td>
<td><em>form field</em></td>
<td>A binary zip file containing the buildpack bits</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h2 id="deployments">Deployments</h2>

<p>Deployments are objects that manage updates to applications with zero downtime.</p>

<p>They can either:</p>

<ul>
<li><p>Manage updating an app&rsquo;s <a href="#droplets">droplet</a> directly after an application package is staged</p></li>
<li><p>Roll an app back to a specific <a href="#revisions">revision</a> along with its associated droplet</p></li>
</ul>

<p>Deployments are different than the traditional method of pushing app updates which performs start/stop deployments.</p>

<p>Deployment strategies supported:</p>

<ul>
<li><p><a href="https://docs.cloudfoundry.org/devguide/deploy-apps/rolling-deploy.html">Rolling deployments</a> allows for
applications to be deployed without incurring downtime by gradually rolling out instances. Max-in-flight can be configured
to specify how many instances are rolled out simultaneously.</p></li>
<li><p><a href="https://docs.cloudfoundry.org/devguide/deploy-apps/rolling-deploy.html#canary-deployment-process">Canary deployments</a> deploy a single instance and pause for user evaluation. If the canary instance is deemed successful, the deployment can be resumed via the <a href="#continue-a-deployment">continue action</a>. The deployment then continues like a rolling deployment. This feature is experimental and is subject to change.</p></li>
</ul>
<h3 id="the-deployment-object">The deployment object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Deployment object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59c3d133-2b83-46f3-960e-7765a129aea4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEPLOYING"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"last_successful_healthcheck"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_status_change"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"canary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"strategy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canary"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"options"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"max_in_flight"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"web_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"canary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"instance_weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"instance_weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44ccfa61-dbcf-4a0d-82fe-f668e9d2a962"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"previous_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc6bc315-bd06-49ce-92c2-bc3ad45268c2"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"new_processes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd5d3e60-f88c-4c37-b1ae-667cfc65a856"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"revision"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56126cba-656a-4eba-a81e-7e9951b2df57"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"305cea31-5a44-45ca-b51b-e89c7a8ef8b2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments/59c3d133-2b83-46f3-960e-7765a129aea4"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/305cea31-5a44-45ca-b51b-e89c7a8ef8b2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments/59c3d133-2b83-46f3-960e-7765a129aea4/actions/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"continue"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments/59c3d133-2b83-46f3-960e-7765a129aea4/actions/continue"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the deployment</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>status.value</strong></td>
<td><em>string</em></td>
<td>The current status of the deployment; valid values are <code class="prettyprint">ACTIVE</code> (meaning in progress) and <code class="prettyprint">FINALIZED</code> (meaning finished, either successfully or not)</td>
</tr>
<tr>
<td><strong>status.reason</strong></td>
<td><em>string</em></td>
<td>The reason for the status of the deployment;<br>following list represents valid values:<br>1. If <strong>status.value</strong> is <code class="prettyprint">ACTIVE</code><br>- <code class="prettyprint">DEPLOYING</code><br>- <code class="prettyprint">PAUSED</code> (only valid for canary deployments) <br>- <code class="prettyprint">CANCELING</code><br>2. If <strong>status.value</strong> is <code class="prettyprint">FINALIZED</code><br>- <code class="prettyprint">DEPLOYED</code><br>- <code class="prettyprint">CANCELED</code><br>- <code class="prettyprint">SUPERSEDED</code> (another deployment created for app before completion)<br></td>
</tr>
<tr>
<td><strong>status.details.last_successful_healthcheck</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp of the last successful healthcheck</td>
</tr>
<tr>
<td><strong>status.details.last_status_change</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp of last change to status.value or status.reason*<em>status.details.last_status_change</em>*</td>
</tr>
<tr>
<td><strong>status.details.error</strong></td>
<td><em>string</em></td>
<td>Brief description of error encountered while deploying, if any. This field is cleared once the deployment progresses successfully.</td>
</tr>
<tr>
<td><strong>status.canary.steps.current</strong></td>
<td><em>integer</em></td>
<td>The current canary step. Only available for deployments with strategy &lsquo;canary&rsquo;. (experimental)</td>
</tr>
<tr>
<td><strong>status.canary.steps.total</strong></td>
<td><em>integer</em></td>
<td>The total number of canary steps. Only available for deployments with strategy &lsquo;canary&rsquo;. (experimental)</td>
</tr>
<tr>
<td><strong>strategy</strong></td>
<td><em>string</em></td>
<td>Strategy used for the deployment; supported strategies are <code class="prettyprint">rolling</code> and <code class="prettyprint">canary</code> (experimental)</td>
</tr>
<tr>
<td><strong>options.max_in_flight</strong></td>
<td><em>integer</em></td>
<td>The maximum number of new instances to deploy simultaneously</td>
</tr>
<tr>
<td><strong>options.web_instances</strong></td>
<td><em>integer</em></td>
<td>The number of web instances the deployment will scale to</td>
</tr>
<tr>
<td><strong>options.memory_in_mb</strong></td>
<td><em>integer</em></td>
<td>The amount of memory in megabytes to allocate per web process instance.  If <code class="prettyprint">null</code>, the amount allocated will be taken from the previous web process.</td>
</tr>
<tr>
<td><strong>options.disk_in_mb</strong></td>
<td><em>integer</em></td>
<td>The amount of disk in megabytes to allocate per web process instance.  If <code class="prettyprint">null</code>, the amount allocated will be taken from the previous web process.</td>
</tr>
<tr>
<td><strong>options.log_rate_limit_in_bytes_per_second</strong></td>
<td><em>integer</em></td>
<td>Log rate limit in bytes per second to allocate per web process instance.  If <code class="prettyprint">null</code>, the amount allocated will be taken from the previous web process.</td>
</tr>
<tr>
<td><strong>options.canary.steps</strong></td>
<td><em>array of <a href="#canary-steps-object">canary step objects</a></em></td>
<td>Canary steps to use for the deployment. Only available for deployments with strategy &lsquo;canary&rsquo;. (experimental)</td>
</tr>
<tr>
<td><strong>droplet.guid</strong></td>
<td><em>string</em></td>
<td>The droplet guid that the deployment is transitioning the app to</td>
</tr>
<tr>
<td><strong>previous_droplet.guid</strong></td>
<td><em>string</em></td>
<td>The app&rsquo;s <a href="#get-current-droplet-association-for-an-app">current droplet guid</a> before the deployment was created</td>
</tr>
<tr>
<td><strong>new_processes</strong></td>
<td><em>array</em></td>
<td>List of processes created as part of the deployment</td>
</tr>
<tr>
<td><strong>revision</strong></td>
<td><em>object</em></td>
<td>The <a href="#revisions">revision</a> the deployment is transitioning the app to</td>
</tr>
<tr>
<td><strong>relationships.app</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The app the deployment is updating</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the deployment</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the deployment</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>

<h4 id="canary-steps-object">Canary steps object</h4>

<p><strong>instance_weight</strong> | <em>integer</em> | The percentage of instances to be deployed as part of the canary process in this step (experimental)</p>
<h3 id="create-a-deployment">Create a deployment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request with Droplet
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/deployments"</span> <span class="se">\</span>
<span class="nt">-X</span> POST <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
  "droplet": {
    "guid": "[droplet-guid]"
  },
  "strategy": "rolling",
  "relationships": {
    "app": {
      "data": {
        "guid": "[app-guid]"
      }
    }
  }
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Request with Revision
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/deployments"</span> <span class="se">\</span>
<span class="nt">-X</span> POST <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
  "revision": {
    "guid": "[revision-guid]"
  },
  "strategy": "rolling",
  "relationships": {
    "app": {
      "data": {
        "guid": "[app-guid]"
      }
    }
  }
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59c3d133-2b83-46f3-960e-7765a129aea4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEPLOYING"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"last_successful_healthcheck"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_status_change"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"canary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"strategy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canary"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"options"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"max_in_flight"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"web_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"canary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"instance_weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"instance_weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44ccfa61-dbcf-4a0d-82fe-f668e9d2a962"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"previous_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc6bc315-bd06-49ce-92c2-bc3ad45268c2"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"new_processes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd5d3e60-f88c-4c37-b1ae-667cfc65a856"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"revision"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56126cba-656a-4eba-a81e-7e9951b2df57"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"305cea31-5a44-45ca-b51b-e89c7a8ef8b2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments/59c3d133-2b83-46f3-960e-7765a129aea4"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/305cea31-5a44-45ca-b51b-e89c7a8ef8b2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments/59c3d133-2b83-46f3-960e-7765a129aea4/actions/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"continue"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments/59c3d133-2b83-46f3-960e-7765a129aea4/actions/continue"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>When you create a new deployment you can either provide a specific droplet or revision to deploy. If no revision or droplet is provided, the droplet associated with the <a href="#apps">app</a> is deployed.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/deployments</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>relationships.app</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The app to deploy a droplet for</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>droplet</strong><sup>[1]</sup></td>
<td><em>object</em></td>
<td>The droplet to deploy for the app; this will update the app&rsquo;s <a href="#get-current-droplet-association-for-an-app">current droplet</a> to this droplet</td>
<td>The app&rsquo;s <a href="#get-current-droplet-association-for-an-app">current droplet</a></td>
</tr>
<tr>
<td><strong>revision</strong><sup>[1]</sup></td>
<td><em>object</em></td>
<td>The <a href="#revisions">revision</a> whose droplet to deploy for the app; this will update the app&rsquo;s <a href="#get-current-droplet-association-for-an-app">current droplet</a> to this droplet</td>
<td></td>
</tr>
<tr>
<td><strong>strategy</strong></td>
<td><em>string</em></td>
<td>The strategy to use for the deployment</td>
<td><code class="prettyprint">rolling</code></td>
</tr>
<tr>
<td><strong>options.max_in_flight</strong></td>
<td><em>integer</em></td>
<td>The maximum number of new instances to deploy simultaneously</td>
<td>1</td>
</tr>
<tr>
<td><strong>options.web_instances</strong></td>
<td><em>integer</em></td>
<td>The number of web instances the deployment will scale to</td>
<td>The current web process&rsquo;s instance count</td>
</tr>
<tr>
<td><strong>options.memory_in_mb</strong></td>
<td><em>integer</em></td>
<td>The amount of memory in megabytes to allocate per web process instance.  If <code class="prettyprint">null</code>, the amount allocated will be taken from the previous web process.</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>options.disk_in_mb</strong></td>
<td><em>integer</em></td>
<td>The amount of disk in megabytes to allocate per web process instance.  If <code class="prettyprint">null</code>, the amount allocated will be taken from the previous web process.</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>options.log_rate_limit_in_bytes_per_second</strong></td>
<td><em>integer</em></td>
<td>Log rate limit in bytes per second to allocate per web process instance.  If <code class="prettyprint">null</code>, the amount allocated will be taken from the previous web process.</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>options.canary.steps</strong></td>
<td><em>array of <a href="#canary-steps-object">canary step objects</a></em></td>
<td>An array of canary steps to use for the deployment</td>
<td></td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the deployment</td>
<td></td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the deployment</td>
<td></td>
</tr>
</tbody></table>

<p><sup>1 Only a droplet <em>or</em> a revision may be provided, not both.</sup></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="get-a-deployment">Get a deployment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/deployments/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59c3d133-2b83-46f3-960e-7765a129aea4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEPLOYING"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"last_successful_healthcheck"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_status_change"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"canary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"strategy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canary"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"options"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"max_in_flight"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"web_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"canary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"instance_weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"instance_weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44ccfa61-dbcf-4a0d-82fe-f668e9d2a962"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"previous_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc6bc315-bd06-49ce-92c2-bc3ad45268c2"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"new_processes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd5d3e60-f88c-4c37-b1ae-667cfc65a856"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"revision"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56126cba-656a-4eba-a81e-7e9951b2df57"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"305cea31-5a44-45ca-b51b-e89c7a8ef8b2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments/59c3d133-2b83-46f3-960e-7765a129aea4"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/305cea31-5a44-45ca-b51b-e89c7a8ef8b2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments/59c3d133-2b83-46f3-960e-7765a129aea4/actions/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"continue"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments/59c3d133-2b83-46f3-960e-7765a129aea4/actions/continue"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/deployments/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-deployments">List deployments</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/deployments"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59c3d133-2b83-46f3-960e-7765a129aea4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FINALIZED"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEPLOYED"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"last_successful_healthcheck"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"last_status_change"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"strategy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rolling"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"max_in_flight"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44ccfa61-dbcf-4a0d-82fe-f668e9d2a962"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"previous_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc6bc315-bd06-49ce-92c2-bc3ad45268c2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"new_processes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd5d3e60-f88c-4c37-b1ae-667cfc65a856"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web-deployment-59c3d133-2b83-46f3-960e-7765a129aea4"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"revision"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56126cba-656a-4eba-a81e-7e9951b2df57"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"305cea31-5a44-45ca-b51b-e89c7a8ef8b2"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments/59c3d133-2b83-46f3-960e-7765a129aea4"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/305cea31-5a44-45ca-b51b-e89c7a8ef8b2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all deployments the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/deployments</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>app_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of app guids to filter by</td>
</tr>
<tr>
<td><strong>states</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of states to filter by</td>
</tr>
<tr>
<td><strong>status_reasons</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of status reasons to filter by;<br>valid values include <code class="prettyprint">DEPLOYING</code>, <code class="prettyprint">PAUSED</code>, <code class="prettyprint">CANCELING</code>, <code class="prettyprint">DEPLOYED</code>, <code class="prettyprint">CANCELED</code>, <code class="prettyprint">SUPERSEDED</code></td>
</tr>
<tr>
<td><strong>status_values</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of status values to filter by;<br>valid values include <code class="prettyprint">ACTIVE</code> and <code class="prettyprint">FINALIZED</code></td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="update-a-deployment">Update a deployment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/deployments/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "metadata": { "labels": { "key": "value" }, "annotations": {"note": "detailed information"}}}'</span>

</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59c3d133-2b83-46f3-960e-7765a129aea4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEPLOYING"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"last_successful_healthcheck"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_status_change"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"canary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"strategy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canary"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"options"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"max_in_flight"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"web_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"canary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"instance_weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"instance_weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44ccfa61-dbcf-4a0d-82fe-f668e9d2a962"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"previous_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc6bc315-bd06-49ce-92c2-bc3ad45268c2"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"new_processes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd5d3e60-f88c-4c37-b1ae-667cfc65a856"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"revision"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56126cba-656a-4eba-a81e-7e9951b2df57"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-25T22:42:10Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"key"</span><span class="p">:</span><span class="s2">"value"</span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"note"</span><span class="p">:</span><span class="s2">"detailed information"</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"305cea31-5a44-45ca-b51b-e89c7a8ef8b2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments/59c3d133-2b83-46f3-960e-7765a129aea4"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/305cea31-5a44-45ca-b51b-e89c7a8ef8b2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments/59c3d133-2b83-46f3-960e-7765a129aea4/actions/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"continue"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments/59c3d133-2b83-46f3-960e-7765a129aea4/actions/continue"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/deployments/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the deployment</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the deployment</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="cancel-a-deployment">Cancel a deployment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/deployments/[guid]/actions/cancel"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>

</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/deployments/:guid/actions/cancel</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="continue-a-deployment">Continue a deployment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/deployments/[guid]/actions/continue"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>

</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/deployments/:guid/actions/continue</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h2 id="domains">Domains</h2>

<p>Domains represent a <a href="https://en.wikipedia.org/wiki/Fully_qualified_domain_name">fully qualified domain name</a> that is used for application routes.</p>

<p>A domain can be scoped to an organization, meaning it can be used to create routes for spaces inside that organization, or be left unscoped to allow all organizations access.</p>
<h3 id="the-domain-object">The domain object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Domain object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-domain.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"internal"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"router_group"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"supported_protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a3f3d89-3f89-4f05-8188-751b298c79d5"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shared_organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404f3d89-3f89-6z72-8188-751b298d88d5"</span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"416d3d89-3f89-8h67-2189-123b298d3592"</span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/3a3f3d89-3f89-4f05-8188-751b298c79d5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route_reservations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5/route_reservations"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shared_organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5/relationships/shared_organizations"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the domain</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>The name of the domain;<br>must be between 3 ~ 253 characters and follow <a href="https://tools.ietf.org/html/rfc1035">RFC 1035</a></td>
</tr>
<tr>
<td><strong>internal</strong></td>
<td><em>boolean</em></td>
<td>Whether the domain is used for internal (container-to-container) traffic</td>
</tr>
<tr>
<td><strong>router_group.guid</strong></td>
<td><em>uuid</em></td>
<td>The guid of the desired router group to route <code class="prettyprint">tcp</code> traffic through; if set, the domain will only be available for <code class="prettyprint">tcp</code> traffic</td>
</tr>
<tr>
<td><strong>supported_protocols</strong></td>
<td><em>list of strings</em></td>
<td>Available protocols for routes using the domain, currently <code class="prettyprint">http</code> and <code class="prettyprint">tcp</code></td>
</tr>
<tr>
<td><strong>relationships.organization</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The organization the domain is scoped to; if set, the domain will only be available in that organization; otherwise, the domain will be globally available</td>
</tr>
<tr>
<td><strong>relationships.shared_organizations</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>Organizations the domain is shared with; if set, the domain will be available in these organizations in addition to the organization the domain is scoped to</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the domain</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the domain</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="create-a-domain">Create a domain</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/domains"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "example.com",
    "internal": false
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-domain.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"internal"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"router_group"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"supported_protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a3f3d89-3f89-4f05-8188-751b298c79d5"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shared_organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404f3d89-3f89-6z72-8188-751b298d88d5"</span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"416d3d89-3f89-8h67-2189-123b298d3592"</span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/3a3f3d89-3f89-4f05-8188-751b298c79d5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route_reservations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5/route_reservations"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shared_organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5/relationships/shared_organizations"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/domains</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the domain</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>internal</strong></td>
<td><em>boolean</em></td>
<td>Whether the domain is used for internal (container-to-container) traffic, or external (user-to-container) traffic</td>
<td>false</td>
</tr>
<tr>
<td><strong>router_group.guid</strong></td>
<td><em>uuid</em></td>
<td>The desired router group guid. <br><em>note: creates a <code class="prettyprint">tcp</code> domain; cannot be used when <code class="prettyprint">internal</code> is set to <code class="prettyprint">true</code> or domain is scoped to an org</em></td>
<td>null</td>
</tr>
<tr>
<td><strong>organization</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to the organization the domain will be scoped to; <br><em>note: cannot be used when <code class="prettyprint">internal</code> is set to <code class="prettyprint">true</code> or domain is associated with a router group</em></td>
<td></td>
</tr>
<tr>
<td><strong>shared_organizations</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>A relationship to organizations the domain will be shared with <br><em>Note: cannot be used without an organization relationship</em></td>
<td></td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the domain</td>
<td></td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the domain</td>
<td></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td>When an <code class="prettyprint">organization</code> relationship is provided</td>
</tr>
</tbody></table>
<h3 id="get-a-domain">Get a domain</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/domains/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-domain.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"internal"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"router_group"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"supported_protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a3f3d89-3f89-4f05-8188-751b298c79d5"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shared_organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404f3d89-3f89-6z72-8188-751b298d88d5"</span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"416d3d89-3f89-8h67-2189-123b298d3592"</span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/3a3f3d89-3f89-4f05-8188-751b298c79d5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route_reservations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5/route_reservations"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shared_organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5/relationships/shared_organizations"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/domains/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td></td>
</tr>
<tr>
<td>Org Auditor</td>
<td></td>
</tr>
<tr>
<td>Org Billing Manager</td>
<td>Can only view domains without an organization relationship</td>
</tr>
<tr>
<td>Org Manager</td>
<td></td>
</tr>
<tr>
<td>Space Auditor</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
<tr>
<td>Space Manager</td>
<td></td>
</tr>
<tr>
<td>Space Supporter</td>
<td></td>
</tr>
</tbody></table>
<h3 id="list-domains">List domains</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/domains"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-domain.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"internal"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"router_group"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5806148f-cce6-4d86-7fbd-aa269e3f6f3f"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nl">"supported_protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"tcp"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"shared_organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"route_reservations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5/route_reservations"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"router_group"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/routing/v1/router_groups/5806148f-cce6-4d86-7fbd-aa269e3f6f3f"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all domains the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/domains</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of guids to filter by</td>
</tr>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of domain names to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of owning organization guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending<br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
<td></td>
</tr>
</tbody></table>
<h3 id="list-domains-for-an-organization">List domains for an organization</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organizations/[guid]/domains"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/[guid]/domains?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/[guid]/domains?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/[guid]/domains?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-domain.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"internal"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"router_group"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5806148f-cce6-4d86-7fbd-aa269e3f6f3f"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nl">"supported_protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"tcp"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"shared_organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"route_reservations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5/route_reservations"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"router_group"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/routing/v1/router_groups/5806148f-cce6-4d86-7fbd-aa269e3f6f3f"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all domains available in an organization for the current user. This will return unscoped domains
(those without an owning organization), domains that are scoped to the given organization (owned by the given
organization), and domains that have been shared with the organization.</p>

<p>To retrieve the default domain for an organization, use the <a href="#get-default-domain">get default domain</a> endpoint.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/organizations/:guid/domains</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of guids to filter by</td>
</tr>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of domain names to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of owning organization guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending<br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="update-a-domain">Update a domain</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/domains/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "metadata": {
      "labels": {"key": "value"},
      "annotations": {"note": "detailed information"}
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-domain.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"internal"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"router_group"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"supported_protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"key"</span><span class="p">:</span><span class="s2">"value"</span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"note"</span><span class="p">:</span><span class="s2">"detailed information"</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a3f3d89-3f89-4f05-8188-751b298c79d5"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shared_organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404f3d89-3f89-6z72-8188-751b298d88d5"</span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"416d3d89-3f89-8h67-2189-123b298d3592"</span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/3a3f3d89-3f89-4f05-8188-751b298c79d5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route_reservations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5/route_reservations"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shared_organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5/relationships/shared_organizations"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/domains/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the domain</td>
<td></td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the domain</td>
<td></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td>If domain is scoped to organization managed by the org manager</td>
</tr>
</tbody></table>
<h3 id="delete-a-domain">Delete a domain</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/domains/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/domains/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td>If domain is scoped to organization managed by the org manager</td>
</tr>
</tbody></table>
<h3 id="share-a-domain">Share a domain</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/domains/[guid]/relationships/shared_organizations"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "data": [
      {"guid": "404f3d89-3f89-6z72-8188-751b298d88d5"},
      {"guid": "416d3d89-3f89-8h67-2189-123b298d3592"}
    ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404f3d89-3f89-6z72-8188-751b298d88d5"</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"416d3d89-3f89-8h67-2189-123b298d3592"</span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint shares an organization-scoped domain to other organizations specified by a list of organization guids. This will allow any of the other organizations to use the organization-scoped domain.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/domains/:guid/relationships/shared_organizations</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data</strong></td>
<td><em><a href="#to-many-relationships">to-many relationship</a></em></td>
<td>The organization guids with which to share the domain</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
</tbody></table>
<h3 id="unshare-a-domain">Unshare a domain</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/domains/[guid]/relationships/shared_organizations/[org_guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div>
<p>This endpoint removes an organization from the list of organizations an organization-scoped domain is shared with. This prevents the organization from using the organization-scoped domain.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/domains/:guid/relationships/shared_organizations/:org_guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td><em>Can be in either the domain&rsquo;s owning organization or the organization it has been shared to</em></td>
</tr>
</tbody></table>
<h2 id="droplets">Droplets</h2>

<p>Droplets are the result of staging an application package. There are two types
(lifecycles) of droplets: buildpack and docker. In the case of the buildpacks,
the droplet contains the bits produced by the buildpack, typically application
code and dependencies.</p>

<p>After an application is created and packages are uploaded, a droplet must be
created via a <a href="#builds">build</a> in order for an application to be deployed or tasks to be run. 
The current droplet <a href="#set-current-droplet">must be assigned</a> to an
application before it may be started. When <a href="#create-a-task">tasks are created</a>, 
they either use a specific droplet guid, or use the current droplet assigned to an application.</p>
<h3 id="the-droplet-object">The droplet object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Droplet object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"execution_metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"rake"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rake"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup config.ru -p $PORT"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"detect_output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby 1.6.14"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1.1."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"buildpack_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:47Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/8222f76a-9e09-4360-b3aa-1ed329945e92"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"assign_current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396/relationships/current_droplet"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="nl">"download"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16/download"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the droplet</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td><em>string</em></td>
<td>State of the droplet; valid states are <code class="prettyprint">AWAITING_UPLOAD</code>, <code class="prettyprint">PROCESSING_UPLOAD</code>, <code class="prettyprint">STAGED</code>, <code class="prettyprint">COPYING</code>, <code class="prettyprint">FAILED</code>, or <code class="prettyprint">EXPIRED</code></td>
</tr>
<tr>
<td><strong>error</strong></td>
<td><em>string</em></td>
<td>A string describing the last error during the droplet lifecycle</td>
</tr>
<tr>
<td><strong>lifecycle</strong></td>
<td><a href="#the-lifecycle-object"><em>lifecycle object</em></a></td>
<td>An object describing the lifecycle that was used when staging the droplet; <strong>lifecycle.data</strong> will always be an empty hash for lifecycles of type <code class="prettyprint">docker</code></td>
</tr>
<tr>
<td><strong>execution_metadata</strong></td>
<td><em>string</em></td>
<td>Serialized JSON data resulting from staging for use when executing a droplet</td>
</tr>
<tr>
<td><strong>process_types</strong></td>
<td><em>object</em></td>
<td>The process types (keys) and associated start commands (values) that will be created when the droplet is executed</td>
</tr>
<tr>
<td><strong>relationships.app</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The app the droplet belongs to</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>labels object</em></a></td>
<td>Labels on the droplet</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotations object</em></a></td>
<td>Annotations on the droplet</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>

<p>In addition to these fields, a droplet object will contain the following fields from both lifecycles.
Their values will be <code class="prettyprint">null</code> by default and will contain values when the droplet is of a specific <strong>lifecycle.type</strong>.</p>

<h4 id="buildpack-droplet">Buildpack droplet</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>checksum.type</strong></td>
<td><em>string</em></td>
<td>Hashing algorithm for checksum; supported algorithms are <code class="prettyprint">sha256</code> and <code class="prettyprint">sha1</code></td>
</tr>
<tr>
<td><strong>checksum.value</strong></td>
<td><em>string</em></td>
<td>Checksum of droplet</td>
</tr>
<tr>
<td><strong>buildpacks</strong></td>
<td><em>array of <a href="#detected-buildpack-object">detected buildpack objects</a></em></td>
<td>Detected buildpacks from the staging process</td>
</tr>
<tr>
<td><strong>stack</strong></td>
<td><em>string</em></td>
<td>The root filesystem to use with the buildpack, for example <code class="prettyprint">cflinuxfs4</code></td>
</tr>
</tbody></table>

<h5 id="detected-buildpack-object">Detected buildpack object</h5>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>System buildpack name</td>
</tr>
<tr>
<td><strong>detect_output</strong></td>
<td><em>string</em></td>
<td>Output during buildpack detect process</td>
</tr>
<tr>
<td><strong>buildpack_name</strong></td>
<td><em>string</em></td>
<td>Name reported by the buildpack</td>
</tr>
<tr>
<td><strong>version</strong></td>
<td><em>string</em></td>
<td>Version reported by the buildpack</td>
</tr>
</tbody></table>

<h4 id="docker-droplet">Docker droplet</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>image</strong></td>
<td><em>string</em></td>
<td>Docker image name</td>
</tr>
</tbody></table>
<h3 id="create-a-droplet">Create a droplet</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/droplets"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "relationships": {
      "app": {
        "data": {
          "guid": "[app-guid]"
        }
      }
    },
    "process_types": {
      "rake": "bundle exec rake",
      "web": "bundle exec rackup config.ru -p $PORT"
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWAITING_UPLOAD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"execution_metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"rake"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rake"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup config.ru -p $PORT"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"detect_output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby 1.6.14"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1.1."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"buildpack_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:47Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"assign_current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396/relationships/current_droplet"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"upload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16/upload"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint is only for creating a droplet without a package. To create a droplet based on a package, see <a href="#create-a-build">Create a build</a>.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/droplets</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>app</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>App to create droplet for</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>process_types</strong></td>
<td><em>hash</em></td>
<td>Process names and start commands for the droplet</td>
<td><code class="prettyprint">{&quot;web&quot;: &quot;&quot;}</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
</tbody></table>
<h3 id="get-a-droplet">Get a droplet</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/droplets/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"execution_metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"rake"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rake"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup config.ru -p $PORT"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"detect_output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby 1.6.14"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1.1."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"buildpack_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:47Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/8222f76a-9e09-4360-b3aa-1ed329945e92"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"assign_current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396/relationships/current_droplet"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="nl">"download"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16/download"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/droplets/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td>Some fields are redacted</td>
</tr>
<tr>
<td>Org Manager</td>
<td>Some fields are redacted</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Some fields are redacted</td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
<tr>
<td>Space Manager</td>
<td>Some fields are redacted</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Some fields are redacted</td>
</tr>
</tbody></table>
<h3 id="list-droplets">List droplets</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/droplets"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGED"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"execution_metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PRIVATE DATA HIDDEN"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"redacted_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[PRIVATE DATA HIDDEN IN LISTS]"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"detect_output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby 1.6.14"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1.1."</span><span class="p">,</span><span class="w">
          </span><span class="nl">"buildpack_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:47Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/8222f76a-9e09-4360-b3aa-1ed329945e92"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"assign_current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396/relationships/current_droplet"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"download"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16/download"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fdf3851c-def8-4de1-87f1-6d4543189e22"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGED"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"docker"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"execution_metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[PRIVATE DATA HIDDEN IN LISTS]"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"redacted_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[PRIVATE DATA HIDDEN IN LISTS]"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cloudfoundry/diego-docker-app-custom:latest"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T00:00:01Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T21:41:32Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/fdf3851c-def8-4de1-87f1-6d4543189e22"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/c5725684-a02f-4e59-bc67-8f36ae944688"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"assign_current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396/relationships/current_droplet"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all droplets the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/droplets</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of droplet guids to filter by</td>
</tr>
<tr>
<td><strong>states</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of droplet states to filter by</td>
</tr>
<tr>
<td><strong>app_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of app guids to filter by</td>
</tr>
<tr>
<td><strong>space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space guids to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code> and <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-droplets-for-a-package">List droplets for a package</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/packages/[guid]/droplets"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/7b34f1cf-7e73-428a-bb5a-8a17a8058396/droplets?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/7b34f1cf-7e73-428a-bb5a-8a17a8058396/droplets?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGED"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"execution_metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PRIVATE DATA HIDDEN"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"redacted_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[PRIVATE DATA HIDDEN IN LISTS]"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"detect_output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby 1.6.14"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1.1."</span><span class="p">,</span><span class="w">
          </span><span class="nl">"buildpack_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:47Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/8222f76a-9e09-4360-b3aa-1ed329945e92"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"assign_current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396/relationships/current_droplet"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"download"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16/download"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fdf3851c-def8-4de1-87f1-6d4543189e22"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGED"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"docker"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"execution_metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[PRIVATE DATA HIDDEN IN LISTS]"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"redacted_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[PRIVATE DATA HIDDEN IN LISTS]"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cloudfoundry/diego-docker-app-custom:latest"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T00:00:01Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T21:41:32Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/fdf3851c-def8-4de1-87f1-6d4543189e22"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/c5725684-a02f-4e59-bc67-8f36ae944688"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"assign_current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396/relationships/current_droplet"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve a list of droplets belonging to a package.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/packages/:guid/droplets</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of droplet guids to filter by</td>
</tr>
<tr>
<td><strong>states</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of droplet states to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code> and <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-droplets-for-an-app">List droplets for an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/droplets"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/app/7b34f1cf-7e73-428a-bb5a-8a17a8058396/droplets?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/app/7b34f1cf-7e73-428a-bb5a-8a17a8058396/droplets?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGED"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"execution_metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PRIVATE DATA HIDDEN"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"redacted_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[PRIVATE DATA HIDDEN IN LISTS]"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"detect_output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby 1.6.14"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1.1."</span><span class="p">,</span><span class="w">
          </span><span class="nl">"buildpack_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:47Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/8222f76a-9e09-4360-b3aa-1ed329945e92"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"assign_current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396/relationships/current_droplet"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"download"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16/download"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fdf3851c-def8-4de1-87f1-6d4543189e22"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGED"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"docker"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"execution_metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[PRIVATE DATA HIDDEN IN LISTS]"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"redacted_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[PRIVATE DATA HIDDEN IN LISTS]"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cloudfoundry/diego-docker-app-custom:latest"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T00:00:01Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T21:41:32Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/fdf3851c-def8-4de1-87f1-6d4543189e22"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/c5725684-a02f-4e59-bc67-8f36ae944688"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"assign_current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396/relationships/current_droplet"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve a list of droplets belonging to an app.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/droplets</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of droplet guids to filter by</td>
</tr>
<tr>
<td><strong>states</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of droplet states to filter by</td>
</tr>
<tr>
<td><strong>current</strong></td>
<td><em>boolean</em></td>
<td>If true, only include the droplet currently assigned to the app</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code> and <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="update-a-droplet">Update a droplet</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.space/v3/droplets/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "metadata": { "labels": { "key": "value" }, "annotations": {"note": "detailed information"}}}'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STAGED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"execution_metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"rake"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rake"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup config.ru -p $PORT"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_buildpack"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"detect_output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby 1.6.14"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1.1."</span><span class="p">,</span><span class="w">
        </span><span class="nl">"buildpack_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:47Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/8222f76a-9e09-4360-b3aa-1ed329945e92"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"assign_current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396/relationships/current_droplet"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"download"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16/download"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"release"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stable"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"detailed information"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/droplets/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the droplet</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the droplet</td>
</tr>
<tr>
<td><strong>image</strong></td>
<td><em>string</em></td>
<td>Image reference where the built complete image was stored (field can only be passed by Build State Updaters)</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
<tr>
<td>Build State Updater</td>
<td>This is a special component role; <a href="#component-roles">read more about component roles</a></td>
</tr>
</tbody></table>
<h3 id="delete-a-droplet">Delete a droplet</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/droplets/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/droplets/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="copy-a-droplet">Copy a droplet</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/droplets?source_guid=[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "relationships": {
      "app": {
        "data": {
          "guid": "[app-guid]"
        }
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COPYING"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"execution_metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-28T23:39:34Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/8222f76a-9e09-4360-b3aa-1ed329945e92"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"assign_current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396/relationships/current_droplet"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Copy a droplet to a different app. The copied droplet excludes the
environment variables listed on the source droplet.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/droplets?source_guid=:guid</code></p>

<h4 id="required-query-parameters">Required query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>source_guid</strong></td>
<td><em>uuid</em></td>
<td>Source guid of the droplet to be copied</td>
</tr>
</tbody></table>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>relationships.app</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to the destination app</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="download-droplet-bits">Download droplet bits</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/droplets/[guid]/download"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">302</span> <span class="ne">FOUND</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
</code></pre></div>
<p>Download a gzip compressed tarball file containing a Cloud Foundry compatible
droplet. When using a remote blobstore, such as AWS, the response is a redirect
to the actual location of the bits. If the client is automatically following
redirects, then the OAuth token that was used to communicate with Cloud
Controller will be relayed on the new redirect request. Some blobstores may
reject the request in that case. Clients may need to follow the redirect
without including the OAuth token.</p>

<p>Only droplets that are in the <code class="prettyprint">STAGED</code> state and have lifecycle type
<code class="prettyprint">buildpack</code> can be downloaded.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/droplets/:guid/download</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
</tbody></table>
<h3 id="upload-droplet-bits">Upload droplet bits</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/droplets/[guid]/upload"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-F</span> <span class="nv">bits</span><span class="o">=</span>@<span class="s2">"droplet.tgz"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3c64aba2-2d9e-4eea-9e07-6fec1636315e"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PROCESSING_UPLOAD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"execution_metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"rake"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rake"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup config.ru -p $PORT"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-15T22:43:54Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-15T22:53:02Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a7c7b09d-350d-4816-bf0b-18612fb2eab4"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/3c64aba2-2d9e-4eea-9e07-6fec1636315e"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/a7c7b09d-350d-4816-bf0b-18612fb2eab4"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"assign_current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/a7c7b09d-350d-4816-bf0b-18612fb2eab4/relationships/current_droplet"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATCH"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Upload a gzip compressed tarball file containing a Cloud Foundry compatible droplet. The file must be sent as part of a multi-part form.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/droplets/:guid/upload</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>bits</strong></td>
<td><em>form field</em></td>
<td>A gzip compressed tarball file with <code class="prettyprint">.tgz</code> extension containing the droplet bits</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h2 id="environment-variable-groups">Environment Variable Groups</h2>

<p>There are two types of environment variable groups: running and staging. They are designed to allow platform operators/admins to manage environment variables across all apps in a foundation.</p>

<p>Variables in a <strong>running</strong> environment variable group will be injected into all <strong>running app containers</strong>.</p>

<p>Variables in a <strong>staging</strong> environment variable group will be injected into the <strong>staging container</strong> for all apps while they are being staged.</p>
<h3 id="the-environment-variable-group-object">The environment variable group object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example environment variable group object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"var"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/environment_variable_groups/running"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>updated_at</strong></td>
<td><em>string</em></td>
<td>The time of last update</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>The name of the group; can only be <code class="prettyprint">running</code> or <code class="prettyprint">staging</code></td>
</tr>
<tr>
<td><strong>var</strong></td>
<td><em>object</em></td>
<td>Environment variables to inject; keys and values must be strings</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="get-an-environment-variable-group">Get an environment variable group</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/environment_variable_groups/[name]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"var"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/environment_variable_groups/running"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/environment_variable_groups/:name</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="update-environment-variable-group">Update environment variable group</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/environment_variable_groups/[name]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
     "var": {
       "DEBUG": "false"
       "USER": null
     }
   }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"var"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"RAILS_ENV"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"DEBUG"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/environment_variable_groups/[name]"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Update the environment variable group.
The variables given in the request will be merged with the existing environment variable group.
Any requested variables with a value of <code class="prettyprint">null</code> will be removed from the group.
Environment variable names may not start with VCAP_. PORT is not a valid environment variable.</p>

<aside class="notice">Variables updated in the <b>running</b> environment variable group will not take effect until apps are restarted.</aside>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/environment_variable_groups/:name</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h2 id="feature-flags">Feature Flags</h2>

<p>Feature flags are runtime flags that enable or disable functionality on the API.</p>
<h3 id="the-feature-flag-object">The feature flag object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Feature Flag object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_feature_flag"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-17T20:00:42Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_error_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error message the user sees"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/feature_flags/my_feature_flag"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>The name of the feature flag</td>
</tr>
<tr>
<td><strong>enabled</strong></td>
<td><em>boolean</em></td>
<td>Whether the feature flag is enabled</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated; this will be blank for feature flags that have not been configured</td>
</tr>
<tr>
<td><strong>custom_error_message</strong></td>
<td><em>string</em></td>
<td>The error string returned by the API when a client performs an action disabled by the feature flag</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="list-of-feature-flags">List of feature flags</h3>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">app_bits_upload</code><br><strong>Default:</strong> <code class="prettyprint">true</code> <br><strong>Description:</strong> When enabled, space developers can upload app bits. When disabled, only admin users can upload app bits.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">app_scaling</code><br><strong>Default:</strong> <code class="prettyprint">true</code> <br><strong>Description:</strong> When enabled, space developers can perform scaling operations (i.e. change memory, disk, log rate, or instances). When disabled, only admins can perform scaling operations.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">diego_docker</code><br><strong>Default:</strong> <code class="prettyprint">false</code> <br><strong>Description:</strong> When enabled, Docker applications are supported by Diego. When disabled, Docker applications will stop running. It will still be possible to stop and delete them and update their configurations.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">diego_cnb (experimental)</code><br><strong>Default:</strong> <code class="prettyprint">false</code> <br><strong>Description:</strong> When enabled, the staging process using Cloud Native Buildpacks is supported.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">env_var_visibility</code><br><strong>Default:</strong> <code class="prettyprint">true</code> <br><strong>Description:</strong> When enabled, all users can see their environment variables. When disabled, no users can see environment variables.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">hide_marketplace_from_unauthenticated_users</code><br><strong>Default:</strong> <code class="prettyprint">false</code> <br><strong>Description:</strong> When enabled, service offerings available in the marketplace will be hidden from unauthenticated users. When disabled, unauthenticated users will be able to see the service offerings available in the marketplace.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">private_domain_creation</code><br><strong>Default:</strong> <code class="prettyprint">true</code> <br><strong>Description:</strong> When enabled, an organization manager can create private domains for that organization. When disabled, only admin users can create private domains.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">resource_matching</code><br><strong>Default:</strong> <code class="prettyprint">true</code> <br><strong>Description:</strong> When enabled, any user can create resource matches. When disabled, the <a href="#resource-matches">resource match endpoint</a> always returns an empty array of matches. The <a href="#upload-package-bits">package upload endpoint</a> will not cache any uploaded packages for resource matching.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">route_creation</code><br><strong>Default:</strong> <code class="prettyprint">true</code> <br><strong>Description:</strong> When enabled, a space developer can create routes in a space. When disabled, only admin users can create routes.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">route_sharing (experimental)</code><br><strong>Default:</strong> <code class="prettyprint">false</code> <br><strong>Description:</strong>  When enabled, Space Developers can share routes between two spaces (even across orgs!) in which they have the Space Developer role. When disabled, Space Developers cannot share routes between two spaces.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">service_instance_creation</code><br><strong>Default:</strong> <code class="prettyprint">true</code> <br><strong>Description:</strong> When enabled, a space developer can create service instances in a space. When disabled, only admin users can create service instances.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">service_instance_sharing</code><br><strong>Default:</strong> <code class="prettyprint">false</code> <br><strong>Description:</strong> When enabled, Space Developers can share service instances between two spaces (even across orgs!) in which they have the Space Developer role. When disabled, Space Developers cannot share service instances between two spaces.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">set_roles_by_username</code><br><strong>Default:</strong> <code class="prettyprint">true</code> <br><strong>Description:</strong> When enabled, Org Managers or Space Managers can add access roles by username. In order for this feature to be enabled the CF operator must: <br>1) Enable the <code class="prettyprint">/ids/users/</code> endpoint for UAA <br>2) Create a UAA <code class="prettyprint">cloud_controller_username_lookup</code> client with the <code class="prettyprint">scim.userids</code> authority</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">space_developer_env_var_visibility</code><br><strong>Default:</strong> <code class="prettyprint">true</code> <br><strong>Description:</strong> When enabled, space developers can perform a get on the /v2/apps/:guid/env endpoint, and both space developers and space supporters can perform a get on the /v3/apps/:guid/env and /v3/apps/:guid/environment_variables endpoints. When disabled, neither space developers nor space supporters can access these endpoints.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">space_scoped_private_broker_creation</code><br><strong>Default:</strong> <code class="prettyprint">true</code> <br><strong>Description:</strong> When enabled, space developers can create space scoped private brokers. When disabled, only admin users can create create space scoped private brokers.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">task_creation</code><br><strong>Default:</strong> <code class="prettyprint">true</code> <br><strong>Description:</strong> When enabled, space developers can create tasks. When disabled, only admin users can create tasks.</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">unset_roles_by_username</code><br><strong>Default:</strong> <code class="prettyprint">true</code> <br><strong>Description:</strong> When enabled, Org Managers or Space Managers can remove access roles by username. In order for this feature to be enabled the CF operator must: <br>1) Enable the <code class="prettyprint">/ids/users/</code> endpoint for UAA <br>2) Create a UAA <code class="prettyprint">cloud_controller_username_lookup</code> client with the <code class="prettyprint">scim.userids</code> authority</td>
</tr>
<tr>
<td><strong>Name:</strong> <code class="prettyprint">user_org_creation</code><br><strong>Default:</strong> <code class="prettyprint">false</code> <br><strong>Description:</strong> When enabled, any user can create an organization via the API. When disabled, only admin users can create organizations via the API.</td>
</tr>
</tbody></table>
<h3 id="get-a-feature-flag">Get a feature flag</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/feature_flags/[name]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_feature_flag"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-17T20:00:42Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_error_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error message the user sees"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/feature_flags/my_feature_flag"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/feature_flags/:name</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-feature-flags">List feature flags</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/feature_flags"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/feature_flags?page=1&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/feature_flags?page=2&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/feature_flags?page=2&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_feature_flag"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-17T20:00:42Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"custom_error_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error message the user sees"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/feature_flags/my_feature_flag"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_second_feature_flag"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"custom_error_message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/feature_flags/my_second_feature_flag"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all feature_flags.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/feature_flags</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to <code class="prettyprint">name</code> ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid value is <code class="prettyprint">name</code></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="update-a-feature-flag">Update a feature flag</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/feature_flags/[name]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "enabled": true,
    "custom_error_message": "error message the user sees"
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_feature_flag"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-17T20:00:42Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"custom_error_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error message the user sees"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/feature_flags/my_feature_flag"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/feature_flags/:name</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>enabled</strong></td>
<td><em>boolean</em></td>
<td>Whether the feature flag is enabled</td>
</tr>
<tr>
<td><strong>custom_error_message</strong></td>
<td><em>string</em></td>
<td>The error string returned by the API when a client performs an action disabled by the feature flag</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h2 id="info">Info</h2>

<p>Info endpoints expose Cloud Controller configuration information.</p>
<h3 id="get-platform-info">Get platform info</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/info"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response with configured values
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="s2">"afa73e3fe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cli_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"minimum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6.22.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"recommended"</span><span class="p">:</span><span class="w"> </span><span class="s2">"latest"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"custom"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"arbitrary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stuff"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Put your apps here!"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cloud Foundry"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nl">"osbapi_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.15"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.example.com/v3/info"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">,</span><span class="w">
    </span><span class="nl">"support"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://support.example.com"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response with unconfigured values
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cli_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"minimum"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"recommended"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"custom"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"osbapi_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.example.com/v3/info"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">,</span><span class="w">
    </span><span class="nl">"support"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/info</code></p>

<h4 id="authentication">Authentication</h4>

<p>No authentication required.</p>
<h3 id="get-platform-usage-summary">Get platform usage summary</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/info/usage_summary"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"usage_summary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"started_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">294</span><span class="p">,</span><span class="w">
    </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">123945</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.example.com/v3/info/usage_summary"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves a high-level summary of usage across the entire Cloud Foundry installation.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/info/usage_summary</code></p>

<h4 id="usage-summary-object">Usage summary object</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>started_instances</strong></td>
<td><em>integer</em></td>
<td>Total number of process instances in the <code class="prettyprint">STARTED</code> state</td>
</tr>
<tr>
<td><strong>memory_in_mb</strong></td>
<td><em>integer</em></td>
<td>Sum of memory usage of all tasks in the <code class="prettyprint">RUNNING</code> state and all process instances in the <code class="prettyprint">STARTED</code> state</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
</tbody></table>
<h2 id="isolation-segments">Isolation Segments</h2>

<p>Isolation Segments provide dedicated pools of resources to which apps can be deployed to isolate workloads.</p>
<h3 id="the-isolation-segment-object">The isolation segment object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Isolation Segment object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"an_isolation_segment"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-19T20:25:04Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-08T16:41:26Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/b19f6525-cbd3-4155-b156-dc0c2a431b4c/organizations"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the isolation segment</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the isolation segment</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>labels object</em></a></td>
<td>Labels on the isolation segment</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotations object</em></a></td>
<td>Annotations on the isolation segment</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="create-an-isolation-segment">Create an isolation segment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/isolation_segments"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "my_segment"
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"an_isolation_segment"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-19T20:25:04Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-08T16:41:26Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/b19f6525-cbd3-4155-b156-dc0c2a431b4c/organizations"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/isolation_segments</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the isolation segment; isolation segment names must be unique across the entire system, and case is ignored when checking for uniqueness</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the isolation segment</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the isolation segment</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="get-an-isolation-segment">Get an isolation segment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/isolation_segments/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"an_isolation_segment"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-19T20:25:04Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-08T16:41:26Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/b19f6525-cbd3-4155-b156-dc0c2a431b4c/organizations"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve an isolation segment to which the user has access.  For admin, this is any isolation segment in the system.  For anyone else, this is an isolation segment in the allowed list for any organization to which the user belongs.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/isolation_segments/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-isolation-segments">List isolation segments</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/isolation_segments"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments?page=1&amp;per_page=5"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments?page=3&amp;per_page=5"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments?page=2&amp;per_page=5"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"an_isolation_segment"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-19T20:25:04Z"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-08T16:41:26Z"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/b19f6525-cbd3-4155-b156-dc0c2a431b4c/organizations"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68d54d31-9b3a-463b-ba94-e8e4c32edbac"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"an_isolation_segment1"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-19T20:29:19Z"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-08T16:41:26Z"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/68d54d31-9b3a-463b-ba94-e8e4c32edbac"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/68d54d31-9b3a-463b-ba94-e8e4c32edbac/organizations"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ecdc67c3-a71e-43ff-bddf-048930b8cd03"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"an_isolation_segment2"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-19T20:29:22Z"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-08T16:41:26Z"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/ecdc67c3-a71e-43ff-bddf-048930b8cd03"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/ecdc67c3-a71e-43ff-bddf-048930b8cd03/organizations"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"424c89e4-4353-46b7-9bf4-f90bd9bacac0"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"an_isolation_segment3"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-19T20:29:27Z"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-08T16:41:26Z"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/424c89e4-4353-46b7-9bf4-f90bd9bacac0"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/424c89e4-4353-46b7-9bf4-f90bd9bacac0/organizations"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0a79fcec-a648-4eb8-a6c3-2b5be39047c7"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"an_isolation_segment4"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-19T20:29:33Z"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-08T16:41:26Z"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/0a79fcec-a648-4eb8-a6c3-2b5be39047c7"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/0a79fcec-a648-4eb8-a6c3-2b5be39047c7/organizations"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves all isolation segments to which the user has access.  For admin, this is all the isolation segments in the system.  For anyone else, this is the isolation segments in the allowed list for any organization to which the user belongs.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/isolation_segments</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of isolation segment guids to filter by</td>
</tr>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of isolation segment names to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by; defaults to ascending. Prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code>, and <code class="prettyprint">name</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-organizations-relationship">List organizations relationship</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/isolation_segments/[guid]/relationships/organizations"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68d54d31-9b3a-463b-ba94-e8e4c32edbac"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/bdeg4371-cbd3-4155-b156-dc0c2a431b4c/relationships/organizations"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"related"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/bdeg4371-cbd3-4155-b156-dc0c2a431b4c/organizations"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint lists the organizations entitled for the isolation segment.  For an Admin, this will list all entitled organizations in the system.  For any other user, this will list only the entitled organizations to which the user belongs.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/isolation_segments/:guid/relationships/organizations</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-spaces-relationship">List spaces relationship</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/isolation_segments/[guid]/relationships/spaces"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d4c91047-7b29-4fda-b7f9-04033e5c9c9f"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/bdeg4371-cbd3-4155-b156-dc0c2a431b4c/relationships/spaces"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint lists the spaces to which the isolation segment is assigned.  For an Admin, this will list all associated spaces in the system.  For an org manager, this will list only those associated spaces belonging to orgs for which the user is a manager.  For any other user, this will list only those associated spaces to which the user has access.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/isolation_segments/:guid/relationships/spaces</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="update-an-isolation-segment">Update an isolation segment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/isolation_segments/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "name": "my_isolation_segment" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_isolation_segment"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-19T20:25:04Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-08T16:41:26Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/b19f6525-cbd3-4155-b156-dc0c2a431b4c/organizations"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/isolation_segments/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the isolation segment; isolation segment names must be unique across the entire system, and case is ignored when checking for uniqueness</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the isolation segment</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the isolation segment</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="delete-an-isolation-segment">Delete an isolation segment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/isolation_segments/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div>
<p>An isolation segment cannot be deleted if it is entitled to any organization.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/isolation_segments/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="entitle-organizations-for-an-isolation-segment">Entitle organizations for an isolation segment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/isolation_segments/[guid]/relationships/organizations"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "data": [
      { "guid":"org-guid-1" },
      { "guid":"org-guid-2" }
    ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68d54d31-9b3a-463b-ba94-e8e4c32edbac"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/bdeg4371-cbd3-4155-b156-dc0c2a431b4c/relationships/organizations"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"related"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/bdeg4371-cbd3-4155-b156-dc0c2a431b4c/organizations"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint entitles the specified organizations for the isolation segment.
In the case where the specified isolation segment is the system-wide shared segment, and if an organization is not already entitled for any other isolation segment, then the shared isolation segment automatically gets assigned as the default for that organization.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/isolation_segments/:guid/relationships/organizations</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>Organization relationships; each organization will be entitled to manage this isolation segment</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="revoke-entitlement-to-isolation-segment-for-an-organization">Revoke entitlement to isolation segment for an organization</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/isolation_segments/[guid]/relationships/organizations/[org_guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div>
<p>This endpoint revokes the entitlement for the specified organization to the isolation segment. If the isolation segment is assigned to a space within an organization, the entitlement cannot be revoked.  If the isolation segment is the organization&rsquo;s default, the entitlement cannot be revoked.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/isolation_segments/:guid/relationships/organizations/:org_guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h2 id="jobs">Jobs</h2>

<p>Jobs are created by the platform when performing certain asynchronous actions.</p>
<h3 id="the-job-object">The job object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Job object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b19ae525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-19T20:25:04Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"operation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app.delete"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMPLETE"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/jobs/b19ae525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"warnings"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the job</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>operation</strong></td>
<td><em>string</em></td>
<td>Current desired operation of the job on a model</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td><em>string</em></td>
<td>State of the job; valid values are <code class="prettyprint">PROCESSING</code>, <code class="prettyprint">POLLING</code>, <code class="prettyprint">COMPLETE</code>, or<code class="prettyprint">FAILED</code></td>
</tr>
<tr>
<td><strong>errors</strong></td>
<td><a href="#errors"><em>errors list</em></a></td>
<td>Array of errors that occurred while processing the job</td>
</tr>
<tr>
<td><strong>warnings</strong></td>
<td><a href="#warnings"><em>warnings list</em></a></td>
<td>Array of warnings that occurred while processing the job</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>

<p>Note: <code class="prettyprint">POLLING</code> happens during asynchronous services operations that require polling the last operation from the service broker.</p>
<h3 id="get-a-job">Get a job</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/jobs/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Completed Job Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b19ae525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-19T20:25:04Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"operation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app.delete"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMPLETE"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/jobs/b19ae525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"warnings"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Failed Job Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b19ae525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-19T20:25:04Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-11-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"operation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app.delete"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FAILED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/jobs/b19ae525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/7b34f1cf-7e73-428a-bb5a-8a17a8058396"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">10008</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CF-UnprocessableEntity"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something went wrong"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"warnings"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"warning! warning!"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/jobs/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h2 id="manifests">Manifests</h2>
<p>A manifest is a method for applying bulk configurations to apps and their underlying processes.</p>

<p>Manifests are in the YAML format. However, anchors and aliases are not supported.</p>

<h3 id="the-manifest-schema">The manifest schema</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Manifest
</code></pre></div><div class="highlight"><pre class="highlight yaml"><code><span class="nn">---</span>
<span class="na">version</span><span class="pi">:</span> <span class="m">1</span>
<span class="na">applications</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">app1</span>
  <span class="na">buildpacks</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">ruby_buildpack</span>
  <span class="pi">-</span> <span class="s">java_buildpack</span>
  <span class="na">env</span><span class="pi">:</span>
    <span class="na">VAR1</span><span class="pi">:</span> <span class="s">value1</span>
    <span class="na">VAR2</span><span class="pi">:</span> <span class="s">value2</span>
  <span class="na">features</span><span class="pi">:</span>
    <span class="na">ssh</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">revisions</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">service-binding-k8s</span><span class="pi">:</span> <span class="no">false</span>
    <span class="na">file-based-vcap-services</span><span class="pi">:</span> <span class="no">false</span>
  <span class="na">routes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">route</span><span class="pi">:</span> <span class="s">route.example.com</span>
  <span class="pi">-</span> <span class="na">route</span><span class="pi">:</span> <span class="s">another-route.example.com</span>
    <span class="na">protocol</span><span class="pi">:</span> <span class="s">http2</span>
  <span class="pi">-</span> <span class="na">route</span><span class="pi">:</span> <span class="s">route-with-options.example.com</span>
    <span class="na">options</span><span class="pi">:</span>
      <span class="na">loadbalancing</span><span class="pi">:</span> <span class="s">least-connection</span>
  <span class="na">services</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">my-service1</span>
  <span class="pi">-</span> <span class="s">my-service2</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">my-service-with-arbitrary-params</span>
    <span class="na">binding_name</span><span class="pi">:</span> <span class="s">my-binding</span>
    <span class="na">parameters</span><span class="pi">:</span>
      <span class="na">key1</span><span class="pi">:</span> <span class="s">value1</span>
      <span class="na">key2</span><span class="pi">:</span> <span class="s">value2</span>
  <span class="na">stack</span><span class="pi">:</span> <span class="s">cflinuxfs4</span>
  <span class="na">metadata</span><span class="pi">:</span>
    <span class="na">annotations</span><span class="pi">:</span>
      <span class="na">contact</span><span class="pi">:</span> <span class="s2">"</span><span class="s">bob@example.com</span><span class="nv"> </span><span class="s">jane@example.com"</span>
    <span class="na">labels</span><span class="pi">:</span>
      <span class="na">sensitive</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">processes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">web</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">start-web.sh</span>
    <span class="na">disk_quota</span><span class="pi">:</span> <span class="s">512M</span>
    <span class="na">health-check-http-endpoint</span><span class="pi">:</span> <span class="s">/healthcheck</span>
    <span class="na">health-check-type</span><span class="pi">:</span> <span class="s">http</span>
    <span class="na">health-check-interval</span><span class="pi">:</span> <span class="m">5</span>
    <span class="na">health-check-invocation-timeout</span><span class="pi">:</span> <span class="m">10</span>
    <span class="na">instances</span><span class="pi">:</span> <span class="m">3</span>
    <span class="na">memory</span><span class="pi">:</span> <span class="s">500M</span>
    <span class="na">log-rate-limit-per-second</span><span class="pi">:</span> <span class="s">1KB</span>
    <span class="na">timeout</span><span class="pi">:</span> <span class="m">10</span>
    <span class="na">user</span><span class="pi">:</span> <span class="s">vcap</span>
  <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">worker</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">start-worker.sh</span>
    <span class="na">disk_quota</span><span class="pi">:</span> <span class="s">1G</span>
    <span class="na">health-check-type</span><span class="pi">:</span> <span class="s">process</span>
    <span class="na">instances</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">memory</span><span class="pi">:</span> <span class="s">256M</span>
    <span class="na">log-rate-limit-per-second</span><span class="pi">:</span> <span class="s">1KB</span>
    <span class="na">timeout</span><span class="pi">:</span> <span class="m">15</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">app2</span>
  <span class="na">env</span><span class="pi">:</span>
    <span class="na">VAR1</span><span class="pi">:</span> <span class="s">value1</span>
  <span class="na">processes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">web</span>
    <span class="na">instances</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">memory</span><span class="pi">:</span> <span class="s">256M</span>
    <span class="na">log-rate-limit-per-second</span><span class="pi">:</span> <span class="s">1KB</span>
  <span class="na">sidecars</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">authenticator</span>
    <span class="na">process_types</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">web'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">worker'</span> <span class="pi">]</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">bundle exec run-authenticator</span>
    <span class="na">memory</span><span class="pi">:</span> <span class="s">800M</span>

  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">upcaser</span>
    <span class="na">process_types</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">worker'</span> <span class="pi">]</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">./tr-server</span>
    <span class="na">memory</span><span class="pi">:</span> <span class="s">2G</span>
</code></pre></div>
<h4 id="space-level-configuration">Space-level configuration</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>applications</strong></td>
<td><em>array of <a href="#space-manifest-app-level-configuration">app configurations</a></em></td>
<td>Configurations for apps in the space</td>
</tr>
<tr>
<td><strong>version</strong></td>
<td><em>integer</em></td>
<td>The manifest schema version; currently the only valid version is <code class="prettyprint">1</code>, defaults to <code class="prettyprint">1</code> if not provided</td>
</tr>
</tbody></table>

<h4 id="app-level-configuration"><a name="space-manifest-app-level-configuration"></a>App-level configuration</h4>

<p>This configuration is specified per application and applies to all of the application&rsquo;s processes.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the app</td>
</tr>
<tr>
<td><strong>lifecycle</strong></td>
<td><em>string</em></td>
<td>Type of the lifecycle; valid values are <code class="prettyprint">buildpack</code>, <code class="prettyprint">cnb</code>, <code class="prettyprint">docker</code>. Defaults to <code class="prettyprint">buildpack</code>, unless the <strong>docker</strong> property is present.</td>
</tr>
<tr>
<td><strong>buildpacks</strong></td>
<td><em>list of strings</em></td>
<td>a) An empty array, which will automatically select the appropriate default buildpack according to the coding language (incompatible with <strong>lifecycle: cnb</strong>) <br>b) An array of one or more URLs pointing to buildpacks <br>c) An array of one or more installed buildpack names <br>Replaces the legacy <code class="prettyprint">buildpack</code> field</td>
</tr>
<tr>
<td><strong>docker</strong></td>
<td><em>object</em></td>
<td>If present, the created app will have Docker lifecycle type; the value of this key is ignored by the API but may be used by clients to source the registry address of the image and credentials, if needed; the <a href="#generate-a-manifest-for-an-app">generate manifest endpoint</a> will return the registry address of the image and username provided with this key</td>
</tr>
<tr>
<td><strong>env</strong></td>
<td><em>object</em></td>
<td>A key-value mapping of environment variables to be used for the app when running</td>
</tr>
<tr>
<td><strong>features</strong></td>
<td><em>object</em></td>
<td>A key-value mapping of feature names to booleans (true = enabled, false = disabled)</td>
</tr>
<tr>
<td><strong>no-route</strong></td>
<td><em>boolean</em></td>
<td>When set to <code class="prettyprint">true</code>, any routes specified with the <code class="prettyprint">routes</code> attribute will be ignored and any existing routes will be removed</td>
</tr>
<tr>
<td><strong>processes</strong></td>
<td><em>array of <a href="#space-manifest-process-level-configuration">process configurations</a></em></td>
<td>List of configurations for individual process types</td>
</tr>
<tr>
<td><strong>random-route</strong></td>
<td><em>boolean</em></td>
<td>Creates a random route for the app if <code class="prettyprint">true</code>; if <code class="prettyprint">routes</code> is specified, if the app already has routes, or if <code class="prettyprint">no-route</code> is specified, this field is ignored regardless of its value</td>
</tr>
<tr>
<td><strong>default-route</strong></td>
<td><em>boolean</em></td>
<td>If true, a route for the app will be created using the app name as the hostname and the containing organization&rsquo;s default domain as the domain; if <code class="prettyprint">routes</code> is specified, if the app already has routes, or if <code class="prettyprint">no-route</code> is specified, this field is ignored regardless of its value</td>
</tr>
<tr>
<td><strong>routes</strong></td>
<td><em>array of <a href="#space-manifest-route-level-configuration">route configurations</a></em></td>
<td>List declaring HTTP and TCP routes to be mapped to the app.</td>
</tr>
<tr>
<td><strong>services</strong></td>
<td><em>array of <a href="#space-manifest-service-level-configuration">service configurations</a></em></td>
<td>A list of service-instances to bind to the app</td>
</tr>
<tr>
<td><strong>sidecars</strong></td>
<td><em>array of <a href="#space-manifest-sidecar-level-configuration">sidecar configurations</a></em></td>
<td>A list of configurations for individual sidecars</td>
</tr>
<tr>
<td><strong>stack</strong></td>
<td><em>string</em></td>
<td>The root filesystem to use with the buildpack, for example <code class="prettyprint">cflinuxfs4</code></td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><em><a href="#labels">label object</a></em></td>
<td>Labels applied to the app</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><em><a href="#annotations">annotation object</a></em></td>
<td>Annotations applied to the app</td>
</tr>
<tr>
<td><strong>buildpack</strong></td>
<td><em>string</em></td>
<td><strong>DEPRECATED in favor of the <code class="prettyprint">buildpacks</code> field above</strong></td>
</tr>
</tbody></table>

<h4 id="process-level-configuration"><a name="space-manifest-process-level-configuration"></a> Process-level configuration</h4>

<p>This configuration is for the individual process. Each process is created if it does not already exist.</p>

<p>For backwards compatibility, the <code class="prettyprint">web</code> process configuration may be placed at the top level of the application configuration, rather than listed under <code class="prettyprint">processes</code>. However, if there is a process with <code class="prettyprint">type: web</code> listed under <code class="prettyprint">processes</code>, this configuration will override any at the top level.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td><strong>(Required)</strong> The identifier for the processes to be configured</td>
</tr>
<tr>
<td><strong>command</strong></td>
<td><em>string</em></td>
<td>The command used to start the process; this overrides start commands from <a href="#procfiles">Procfiles</a> and buildpacks</td>
</tr>
<tr>
<td><strong>user</strong></td>
<td><em>string</em></td>
<td>The user under which the process runs</td>
</tr>
<tr>
<td><strong>disk_quota</strong></td>
<td><em>string</em></td>
<td>The disk limit for all instances of the web process; <br>this attribute requires a unit of measurement: <code class="prettyprint">B</code>, <code class="prettyprint">K</code>, <code class="prettyprint">KB</code>, <code class="prettyprint">M</code>, <code class="prettyprint">MB</code>, <code class="prettyprint">G</code>, <code class="prettyprint">GB</code>, <code class="prettyprint">T</code>, or <code class="prettyprint">TB</code> in upper case or lower case</td>
</tr>
<tr>
<td><strong>health-check-http-endpoint</strong></td>
<td><em>string</em></td>
<td>Endpoint called to determine if the app is healthy</td>
</tr>
<tr>
<td><strong>health-check-interval</strong></td>
<td><em>integer</em></td>
<td>The interval in seconds between health check requests</td>
</tr>
<tr>
<td><strong>health-check-invocation-timeout</strong></td>
<td><em>integer</em></td>
<td>The timeout in seconds for individual health check requests for http and port health checks</td>
</tr>
<tr>
<td><strong>health-check-type</strong></td>
<td><em>string</em></td>
<td>Type of health check to perform; <code class="prettyprint">none</code> is deprecated and an alias to <code class="prettyprint">process</code></td>
</tr>
<tr>
<td><strong>instances</strong></td>
<td><em>integer</em></td>
<td>The number of instances to run</td>
</tr>
<tr>
<td><strong>memory</strong></td>
<td><em>string</em></td>
<td>The memory limit for all instances of the web process; <br>this attribute requires a unit of measurement: <code class="prettyprint">B</code>, <code class="prettyprint">K</code>, <code class="prettyprint">KB</code>, <code class="prettyprint">M</code>, <code class="prettyprint">MB</code>, <code class="prettyprint">G</code>, <code class="prettyprint">GB</code>, <code class="prettyprint">T</code>, or <code class="prettyprint">TB</code> in upper case or lower case</td>
</tr>
<tr>
<td><strong>log-rate-limit-per-second</strong></td>
<td><em>string</em></td>
<td>The log rate limit for all the instances of the process; <br>this attribute requires a unit of measurement: <code class="prettyprint">B</code>, <code class="prettyprint">K</code>, <code class="prettyprint">KB</code>, <code class="prettyprint">M</code>, <code class="prettyprint">MB</code>, <code class="prettyprint">G</code>, <code class="prettyprint">GB</code>, <code class="prettyprint">T</code>, or <code class="prettyprint">TB</code> in upper case or lower case, or -1 or 0</td>
</tr>
<tr>
<td><strong>timeout</strong></td>
<td><em>integer</em></td>
<td>Time in seconds at which the health-check will report failure</td>
</tr>
</tbody></table>

<h4 id="route-level-configuration"><a name="space-manifest-route-level-configuration"></a> Route-level configuration</h4>

<p>This configuration is for <em>creating</em> mappings between the app and a route. Each route is created if it does not already exist. The protocol
will be updated for any existing route mapping.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>route</strong></td>
<td><em>string</em></td>
<td><strong>(Required)</strong> The route URI. Example: <code class="prettyprint">host.domain.com</code></td>
</tr>
<tr>
<td><strong>protocol</strong></td>
<td><em>string</em></td>
<td>Protocol to use for this route. Valid protocols are <code class="prettyprint">http1</code>, <code class="prettyprint">http2</code>, and <code class="prettyprint">tcp</code></td>
</tr>
<tr>
<td><strong>options</strong></td>
<td><em>object</em></td>
<td>A key-value mapping of configuration <a href="#space-manifest-per-route-options-level-configuration">options</a> to be applied to the specific application route</td>
</tr>
</tbody></table>

<h4 id="per-route-options-level-configuration"><a name="space-manifest-per-route-options-level-configuration"></a> Per-Route Options-level configuration</h4>

<p>This configuration allows additional key-value options for the specific application route.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>loadbalancing</strong></td>
<td><em>string</em></td>
<td>The load-balancer associated with this route. Valid values are <code class="prettyprint">round-robin</code> and <code class="prettyprint">least-connection</code></td>
</tr>
</tbody></table>

<h4 id="service-level-configuration"><a name="space-manifest-service-level-configuration"></a> Service-level configuration</h4>

<p>This configuration is <em>creating</em> new service bindings between the app and a service instance. The <code class="prettyprint">services</code> field can
take either an array of service instance name strings or an array of the following service-level fields.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td><strong>(Required)</strong> The name of the service instance to be bound to</td>
</tr>
<tr>
<td><strong>binding_name</strong></td>
<td><em>string</em></td>
<td>The name of the service binding to be created</td>
</tr>
<tr>
<td><strong>parameters</strong></td>
<td><em>object</em></td>
<td>A map of arbitrary key/value pairs to send to the service broker during binding</td>
</tr>
</tbody></table>

<h4 id="sidecar-level-configuration"><a name="space-manifest-sidecar-level-configuration"></a> Sidecar-level configuration</h4>

<p>This configuration is for the individual sidecar.  Each sidecar is created if it does not already exist.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td><strong>(Required)</strong> The identifier for the sidecars to be configured</td>
</tr>
<tr>
<td><strong>command</strong></td>
<td><em>string</em></td>
<td>The command used to start the sidecar</td>
</tr>
<tr>
<td><strong>process_types</strong></td>
<td><em>list of strings</em></td>
<td>List of processes to associate sidecar with</td>
</tr>
<tr>
<td><strong>memory</strong></td>
<td><em>integer</em></td>
<td>Memory in MB that the sidecar will be allocated</td>
</tr>
</tbody></table>
<h3 id="apply-a-manifest-to-a-space">Apply a manifest to a space</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces/[guid]/actions/apply_manifest"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/x-yaml"</span> <span class="se">\</span>
  <span class="nt">--data-binary</span> @/path/to/manifest.yml
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<p>Apply changes specified in a manifest to the named apps and their underlying
processes. The apps must reside in the space. These changes are additive
and will not modify any unspecified properties or remove any existing
environment variables, app features, routes, or services.</p>

<aside class="notice">
Apply manifest will only trigger an immediate update for the &ldquo;instances&rdquo; property or routing changes. All other properties require an app restart to take effect.
</aside>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/spaces/:guid/actions/apply_manifest</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="generate-a-manifest-for-an-app">Generate a manifest for an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/manifest"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-yaml</span>

---
applications:
- name: my-app
  stack: cflinuxfs4
  features:
    ssh: true
    revisions: true
    service-binding-k8s: false
    file-based-vcap-services: false
  services:
  - my-service
  routes:
  - route: my-app.example.com
    protocol: http1
  processes:
  - type: web
    instances: 2
    memory: 512M
    log-rate-limit-per-second: 1KB
    disk_quota: 1024M
    health-check-type: http
    health-check-http-endpoint: /healthy
    health-check-invocation-timeout: 10
    health-check-interval: 5
    readiness-health-check-type: http
    readiness-health-check-http-endpoint: /ready
    readiness-health-check-invocation-timeout: 20
    readiness-health-check-interval: 5
</code></pre></div>
<p>Generate a manifest for an app and its underlying processes.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/manifest</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="create-a-manifest-diff-for-a-space-experimental">Create a manifest diff for a space (experimental)</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces/[guid]/manifest_diff"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/x-yaml"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">--data-binary</span> @/path/to/manifest.yml
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"diff"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"remove"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/applications/0/routes/1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"was"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="s2">"route.example.com"</span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"add"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/applications/1/buildpacks/2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"java_buildpack"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"replace"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/applications/2/processes/1/memory"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"was"</span><span class="p">:</span><span class="w"> </span><span class="s2">"256M"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"512M"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint returns a JSON representation of the difference between the
provided manifest and the current state of a space.</p>

<p>Currently, this endpoint can only diff <a href="#the-manifest-schema">version 1</a> manifests.</p>

<h5 id="the-diff-object">The diff object</h5>

<p>The diff object format is inspired by the <a href="https://tools.ietf.org/html/rfc6902">JSON Patch
specification</a>.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>op</strong></td>
<td><em>string</em></td>
<td>Type of change; valid values are <code class="prettyprint">add</code>, <code class="prettyprint">remove</code>, <code class="prettyprint">replace</code></td>
</tr>
<tr>
<td><strong>path</strong></td>
<td><em>string</em></td>
<td>Path to changing manifest field</td>
</tr>
<tr>
<td><strong>was</strong></td>
<td><em>any</em></td>
<td>For <code class="prettyprint">remove</code> and <code class="prettyprint">replace</code> operations, the previous value; otherwise key is omitted</td>
</tr>
<tr>
<td><strong>value</strong></td>
<td><em>any</em></td>
<td>For <code class="prettyprint">add</code> and <code class="prettyprint">replace</code> operations, the new value; otherwise key is omitted</td>
</tr>
</tbody></table>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/spaces/:guid/manifest_diff</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h2 id="organizations">Organizations</h2>

<p>An org is a development account that an individual or multiple collaborators can own and use. All collaborators access an org with user accounts. Collaborators in an org share a resource quota plan, applications, services availability, and custom domains.</p>
<h3 id="the-organization-object">The organization object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Organization object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24637893-3b77-489d-bb79-8466f0d88b52"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-organization"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"suspended"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/24637893-3b77-489d-bb79-8466f0d88b52"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/24637893-3b77-489d-bb79-8466f0d88b52/domains"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"default_domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/24637893-3b77-489d-bb79-8466f0d88b52/domains/default"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the organization</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the organization</td>
</tr>
<tr>
<td><strong>suspended</strong></td>
<td><em>boolean</em></td>
<td>Whether an organization is suspended or not; non-admins will be blocked from creating, updating, or deleting resources in a suspended organization</td>
</tr>
<tr>
<td><strong>relationships.quota</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The quota applied to the organization</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the organization</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations added to the organization</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="create-an-organization">Create an organization</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organizations"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "name": "my-organization" }'</span>

</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24637893-3b77-489d-bb79-8466f0d88b52"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-organization"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"suspended"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/24637893-3b77-489d-bb79-8466f0d88b52"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/24637893-3b77-489d-bb79-8466f0d88b52/domains"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"default_domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/24637893-3b77-489d-bb79-8466f0d88b52/domains/default"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/organizations</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Organization name</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>suspended</strong></td>
<td><em>boolean</em></td>
<td>Whether an organization is suspended or not</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the organization</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the organization</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>

<p>If the <code class="prettyprint">user_org_creation</code> feature flag is enabled, any user with the <code class="prettyprint">cloud_controller.write</code> scope will be able to create organizations.</p>
<h3 id="get-an-organization">Get an organization</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organizations/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24637893-3b77-489d-bb79-8466f0d88b52"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-organization"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"suspended"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/24637893-3b77-489d-bb79-8466f0d88b52"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/24637893-3b77-489d-bb79-8466f0d88b52/domains"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"default_domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/24637893-3b77-489d-bb79-8466f0d88b52/domains/default"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the specified organization object.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/organizations/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-organizations">List organizations</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organizations"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"org1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"suspended"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/885735b5-aea4-4cf5-8e44-961af0e41920/domains"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"default_domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/885735b5-aea4-4cf5-8e44-961af0e41920/domains/default"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d4c91047-7b29-4fda-b7f9-04033e5c9c9f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-02T00:14:30Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-02T00:14:30Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"org2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"suspended"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/d4c91047-7b29-4fda-b7f9-04033e5c9c9f"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/d4c91047-7b29-4fda-b7f9-04033e5c9c9f/domains"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"default_domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/d4c91047-7b29-4fda-b7f9-04033e5c9c9f/domains/default"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all organizations the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/organizations</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization names to filter by</td>
</tr>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by; defaults to ascending. Prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code>, and <code class="prettyprint">name</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-organizations-for-isolation-segment">List organizations for isolation segment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/isolation_segments/[guid]/organizations"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/933b4c58-120b-499a-b85d-4b6fc9e2903b/organizations?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/933b4c58-120b-499a-b85d-4b6fc9e2903b/organizations?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"org1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"suspended"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/885735b5-aea4-4cf5-8e44-961af0e41920/domains"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"default_domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/885735b5-aea4-4cf5-8e44-961af0e41920/domains/default"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d4c91047-7b29-4fda-b7f9-04033e5c9c9f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-02T00:14:30Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-02T00:14:30Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"org2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"suspended"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/d4c91047-7b29-4fda-b7f9-04033e5c9c9f"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/d4c91047-7b29-4fda-b7f9-04033e5c9c9f/domains"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"default_domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/d4c91047-7b29-4fda-b7f9-04033e5c9c9f/domains/default"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the organizations entitled to the isolation segment. Return only the organizations the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/isolation_segments/:guid/organizations</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization names to filter by</td>
</tr>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by; defaults to ascending. Prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code>, and <code class="prettyprint">name</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Auditor</td>
</tr>
<tr>
<td>Org Billing Manager</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
</tbody></table>
<h3 id="update-an-organization">Update an organization</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organizations/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "name": "my-organization" }'</span>

</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24637893-3b77-489d-bb79-8466f0d88b52"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-organization"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"suspended"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/24637893-3b77-489d-bb79-8466f0d88b52"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/24637893-3b77-489d-bb79-8466f0d88b52/domains"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"default_domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/24637893-3b77-489d-bb79-8466f0d88b52/domains/default"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/b7887f5c-34bb-40c5-9778-577572e4fb2d"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/organizations/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Organization name</td>
</tr>
<tr>
<td><strong>suspended</strong></td>
<td><em>boolean</em></td>
<td>Whether an organization is suspended or not</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the organization</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the organization</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
</tbody></table>
<h3 id="delete-an-organization">Delete an organization</h3>

<p>When an organization is deleted, user roles associated with the organization
will also be deleted.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organizations/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/organizations/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
</tbody></table>
<h3 id="assign-default-isolation-segment">Assign default isolation segment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organizations/[guid]/relationships/default_isolation_segment"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "data": {
      "guid": "[iso-seg-guid]"
     }
   }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9d8e007c-ce52-4ea7-8a57-f2825d2c6b39"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/d4c91047-7b29-4fda-b7f9-04033e5c9c9f/relationships/default_isolation_segment"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"related"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/9d8e007c-ce52-4ea7-8a57-f2825d2c6b39"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Set the default isolation segment for a given organization.
Only isolation segments that are entitled to the organization are eligible to be the default isolation segment.</p>

<aside class="notice">Apps will not run in the new default isolation segment until they are restarted.</aside>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/organizations/:guid/relationships/default_isolation_segment</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>Isolation segment relationship; apps will run in this isolation segment; set data to <code class="prettyprint">null</code> to remove the relationship</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
</tbody></table>
<h3 id="get-default-isolation-segment">Get default isolation segment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organizations/[guid]/relationships/default_isolation_segment"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9d8e007c-ce52-4ea7-8a57-f2825d2c6b39"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/d4c91047-7b29-4fda-b7f9-04033e5c9c9f/relationships/default_isolation_segment"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"related"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/9d8e007c-ce52-4ea7-8a57-f2825d2c6b39"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the default isolation segment for a given organization.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/organizations/:guid/relationships/default_isolation_segment</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="get-default-domain">Get default domain</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organizations/[guid]/domains/default"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-domain.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"internal"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"router_group"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"supported_protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a3f3d89-3f89-4f05-8188-751b298c79d5"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shared_organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404f3d89-3f89-6z72-8188-751b298d88d5"</span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"416d3d89-3f89-8h67-2189-123b298d3592"</span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/3a3f3d89-3f89-4f05-8188-751b298c79d5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route_reservations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5/route_reservations"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shared_organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/3a5d3d89-3f89-4f05-8188-8a2b298c79d5/relationships/shared_organizations"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the default domain for a given organization.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/organizations/:guid/domains/default</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td></td>
</tr>
<tr>
<td>Org Auditor</td>
<td></td>
</tr>
<tr>
<td>Org Billing Manager</td>
<td>Can only view domains without an organization relationship</td>
</tr>
<tr>
<td>Org Manager</td>
<td></td>
</tr>
<tr>
<td>Space Auditor</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
<tr>
<td>Space Manager</td>
<td></td>
</tr>
<tr>
<td>Space Supporter</td>
<td></td>
</tr>
</tbody></table>
<h3 id="get-usage-summary">Get usage summary</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organizations/[guid]/usage_summary"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"usage_summary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"started_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="nl">"service_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reserved_ports"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="nl">"per_app_tasks"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"service_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/d4c91047-7b29-4fda-b7f9-04033e5c9c9f/usage_summary"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/d4c91047-7b29-4fda-b7f9-04033e5c9c9f"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the specified organization object&rsquo;s memory and app instance usage summary.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/organizations/:guid/usage_summary</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-users-for-an-organization">List users for an organization</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organizations/:guid/users"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/:guid/users?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/:guid/users?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/:guid/users?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
     </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client_id"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"presentation_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client_id"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9da93b89-3f89-4f05-7238-8a2b123c79l9"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"presentation_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uaa"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/9da93b89-3f89-4f05-7238-8a2b123c79l9"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<p>Retrieve all users with a role in the specified organization.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/organizations/:guid/users</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of user guids to filter by</td>
</tr>
<tr>
<td><strong>usernames</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of usernames to filter by. Mutually exclusive with <strong>partial_usernames</strong></td>
</tr>
<tr>
<td><strong>partial_usernames</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of strings to search by. When using this query parameter, all the users that contain the string provided in their username will be returned. Mutually exclusive with <strong>usernames</strong></td>
</tr>
<tr>
<td><strong>origins</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of user origins (user stores) to filter by, for example, users authenticated by UAA have the origin &ldquo;uaa&rdquo;; users authenticated by an LDAP provider have the origin &ldquo;ldap&rdquo;; when filtering by origins, usernames must be included</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending<br>Valid values are <code class="prettyprint">created_at</code> and <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h2 id="organization-quotas">Organization Quotas</h2>

<p>Organization quotas are named sets of memory, log rate, service, and instance usage quotas. For example, one organization quota might allow up to 10 services, 10 routes, and 2 GB of RAM, while another might offer 100 services, 100 routes, and 10 GB of RAM.</p>

<p>An organization has exactly one organization quota. If not specifically assigned a quota, it will have the default quota.</p>

<p>For more information, see the <a href="https://docs.cloudfoundry.org/adminguide/quota-plans.html">Cloud Foundry docs</a>.</p>
<h3 id="the-organization-quota-object">The organization quota object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Organization Quota object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quota-guid"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-quixote"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">5120</span><span class="p">,</span><span class="w">
      </span><span class="nl">"per_process_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"per_app_tasks"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"paid_services_allowed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_service_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_service_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_routes"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_reserved_ports"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_domains"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/quota-guid"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the organization quota</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the organization quota was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the organization quota was last updated</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the quota</td>
</tr>
<tr>
<td><strong>apps</strong></td>
<td><em>object</em></td>
<td>Quotas that affect applications and application sub-resources</td>
</tr>
<tr>
<td><strong>apps.per_process_memory_in_mb</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Maximum memory for a single process or task</td>
</tr>
<tr>
<td><strong>apps.total_memory_in_mb</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total memory allowed for all the started processes and running tasks in an organization</td>
</tr>
<tr>
<td><strong>apps.total_instances</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total instances of all the started processes allowed in an organization</td>
</tr>
<tr>
<td><strong>apps.log_rate_limit_in_bytes_per_second</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total log rate limit allowed for all the started processes and running tasks in an organization</td>
</tr>
<tr>
<td><strong>apps.per_app_tasks</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Maximum number of running tasks in an organization</td>
</tr>
<tr>
<td><strong>services</strong></td>
<td><em>object</em></td>
<td>Quotas that affect services</td>
</tr>
<tr>
<td><strong>services.paid_services_allowed</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether instances of paid service plans can be created</td>
</tr>
<tr>
<td><strong>services.total_service_instances</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of service instances allowed in an organization</td>
</tr>
<tr>
<td><strong>services.total_service_keys</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of service keys allowed in an organization</td>
</tr>
<tr>
<td><strong>routes</strong></td>
<td><em>object</em></td>
<td>Quotas that affect routes</td>
</tr>
<tr>
<td><strong>routes.total_routes</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of routes allowed in an organization</td>
</tr>
<tr>
<td><strong>routes.total_reserved_ports</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of ports that are reservable by routes in an organization</td>
</tr>
<tr>
<td><strong>domains</strong></td>
<td><em>object</em></td>
<td>Quotas that affect domains</td>
</tr>
<tr>
<td><strong>domains.total_domains</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of domains that can be scoped to an organization</td>
</tr>
<tr>
<td><strong>relationships.organizations</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>A relationship to the organizations where the quota is applied</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="create-an-organization-quota">Create an organization quota</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organization_quotas"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
        "name": "production"
      }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quota-guid"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-quixote"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">5120</span><span class="p">,</span><span class="w">
      </span><span class="nl">"per_process_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"per_app_tasks"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"paid_services_allowed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_service_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_service_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_routes"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_reserved_ports"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_domains"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/quota-guid"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint creates a new organization quota, but does not assign it to a specific organization unless an organization GUID is provided in the <code class="prettyprint">relationships.organizations</code> parameter.</p>

<p>To create an organization quota you must be an admin.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/organization_quotas</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the quota</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>apps</strong></td>
<td><em>object</em></td>
<td>Quotas that affect applications and application sub-resources</td>
<td></td>
</tr>
<tr>
<td><strong>apps.per_process_memory_in_mb</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Maximum memory for a single process or task</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>apps.total_memory_in_mb</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total memory allowed for all the started processes and running tasks in an organization</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>apps.total_instances</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total instances of all the started processes allowed in an organization</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>apps.log_rate_limit_in_bytes_per_second</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total log rate limit allowed for all the started processes and running tasks in an organization</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>apps.per_app_tasks</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Maximum number of running tasks in an organization</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>services</strong></td>
<td><em>object</em></td>
<td>Quotas that affect services</td>
<td></td>
</tr>
<tr>
<td><strong>services.paid_services_allowed</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether instances of paid service plans can be created</td>
<td>true</td>
</tr>
<tr>
<td><strong>services.total_service_instances</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of service instances allowed in an organization</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>services.total_service_keys</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of service keys allowed in an organization</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>routes</strong></td>
<td><em>object</em></td>
<td>Quotas that affect routes</td>
<td></td>
</tr>
<tr>
<td><strong>routes.total_routes</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of routes allowed in an organization</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>routes.total_reserved_ports</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of ports that are reservable by routes in an organization</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>domains</strong></td>
<td><em>object</em></td>
<td>Quotas that affect domains</td>
<td></td>
</tr>
<tr>
<td><strong>domains.total_domains</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of domains that can be scoped to an organization</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>relationships.organizations</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>A relationship to the organizations where the quota is applied</td>
<td>[]</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="get-an-organization-quota">Get an organization quota</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organization_quotas/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quota-guid"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-quixote"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">5120</span><span class="p">,</span><span class="w">
      </span><span class="nl">"per_process_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"per_app_tasks"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"paid_services_allowed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_service_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_service_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_routes"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_reserved_ports"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_domains"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/quota-guid"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint gets an individual organization quota resource.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/organization_quotas/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td>Response will only include guids of managed organizations</td>
</tr>
<tr>
<td>Org Auditor</td>
<td>Response will only include guids of audited organizations</td>
</tr>
<tr>
<td>Org Billing Manager</td>
<td>Response will only include guids of billing-managed organizations</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Response will only include guids of parent organizations</td>
</tr>
<tr>
<td>Space Developer</td>
<td>Response will only include guids of parent organizations</td>
</tr>
<tr>
<td>Space Manager</td>
<td>Response will only include guids of parent organizations</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Response will only include guids of parent organizations</td>
</tr>
</tbody></table>
<h3 id="list-organization-quotas">List organization quotas</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organization_quotas"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas?page=1&amp;per_page=50"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas?page=1&amp;per_page=50"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quota-1-guid"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-quixote"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"total_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">5120</span><span class="p">,</span><span class="w">
          </span><span class="nl">"per_process_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
          </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
          </span><span class="nl">"total_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
          </span><span class="nl">"per_app_tasks"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"paid_services_allowed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"total_service_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
          </span><span class="nl">"total_service_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"total_routes"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
          </span><span class="nl">"total_reserved_ports"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"total_domains"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w"> </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/quota-1-guid"</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quota-2-guid"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sancho-panza"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"total_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">2048</span><span class="p">,</span><span class="w">
          </span><span class="nl">"per_process_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
          </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
          </span><span class="nl">"total_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
          </span><span class="nl">"per_app_tasks"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"paid_services_allowed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"total_service_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
          </span><span class="nl">"total_service_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"total_routes"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
          </span><span class="nl">"total_reserved_ports"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"total_domains"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/quota-2-guid"</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint lists all organization quota resources.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/organization_quotas</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization quota guids to filter by</td>
</tr>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization quota names to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by; defaults to ascending. Prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td>Response will only include guids of managed organizations</td>
</tr>
<tr>
<td>Org Auditor</td>
<td>Response will only include guids of audited organizations</td>
</tr>
<tr>
<td>Org Billing Manager</td>
<td>Response will only include guids of billing-managed organizations</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Response will only include guids of parent organizations</td>
</tr>
<tr>
<td>Space Developer</td>
<td>Response will only include guids of parent organizations</td>
</tr>
<tr>
<td>Space Manager</td>
<td>Response will only include guids of parent organizations</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Response will only include guids of parent organizations</td>
</tr>
</tbody></table>
<h3 id="apply-an-organization-quota-to-an-organization">Apply an organization quota to an organization</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organization_quotas/:quota_guid/relationships/organizations"</span> <span class="se">\</span>
<span class="nt">-X</span> POST <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
  "data": [{ "guid": "org-guid1" }, { "guid": "org-guid2" }]
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"org-guid1"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"org-guid2"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"previous-org-guid"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/quota-guid/relationships/organizations"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint applies an organization quota to one or more organizations.</p>

<p>Only admin users can apply an organization quota to an organization.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/organization_quotas/:quota_guid/relationships/organizations</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>Organization guids that the quota will apply to</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="delete-an-organization-quota">Delete an organization quota</h3>

<p>Organization quotas cannot be deleted when applied to any organizations.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organizations_quotas/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/organization_quotas/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="update-an-organization-quota">Update an organization quota</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/organization_quotas/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "don-quixote",
    "apps": {
      "total_memory_in_mb": 5120,
      "per_process_memory_in_mb": 1024,
      "log_rate_limit_in_bytes_per_second": 1024,
      "total_instances": 10,
      "per_app_tasks": 5
    },
    "services": {
      "paid_services_allowed": true,
      "total_service_instances": 10,
      "total_service_keys": 20,
    },
    "routes": {
      "total_routes": 8,
      "total_reserved_ports": 4
    },
    "domains": {
      "total_domains": 7
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quota-guid"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-quixote"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">5120</span><span class="p">,</span><span class="w">
      </span><span class="nl">"per_process_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"per_app_tasks"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"paid_services_allowed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_service_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_service_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_routes"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_reserved_ports"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_domains"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas/quota-guid"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint will only update the parameters specified in the request body. Any unspecified parameters will retain their existing values.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/organization_quotas/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the quota</td>
</tr>
<tr>
<td><strong>apps</strong></td>
<td><em>object</em></td>
<td>Quotas that affect applications and application sub-resources</td>
</tr>
<tr>
<td><strong>apps.per_process_memory_in_mb</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Maximum memory for a single process or task</td>
</tr>
<tr>
<td><strong>apps.total_memory_in_mb</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total memory of all the started processes and running tasks in an organization</td>
</tr>
<tr>
<td><strong>apps.total_instances</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total instances of all the started processes in an organization</td>
</tr>
<tr>
<td><strong>apps.log_rate_limit_in_bytes_per_second</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total log rate limit allowed for all the started processes and running tasks in an organization</td>
</tr>
<tr>
<td><strong>apps.per_app_tasks</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Maximum number of running tasks in an organization</td>
</tr>
<tr>
<td><strong>services</strong></td>
<td><em>object</em></td>
<td>Quotas that affect services</td>
</tr>
<tr>
<td><strong>services.paid_services_allowed</strong></td>
<td><em>boolean</em></td>
<td>If instances of paid service plans can be created</td>
</tr>
<tr>
<td><strong>services.total_service_instances</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of service instances in an organization</td>
</tr>
<tr>
<td><strong>services.total_service_keys</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of service keys in an organization</td>
</tr>
<tr>
<td><strong>routes</strong></td>
<td><em>object</em></td>
<td>Quotas that affect routes</td>
</tr>
<tr>
<td><strong>routes.total_routes</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of routes that an organization can have</td>
</tr>
<tr>
<td><strong>routes.total_reserved_ports</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of ports that all routes in an organization can reserve</td>
</tr>
<tr>
<td><strong>domains</strong></td>
<td><em>object</em></td>
<td>Quotas that affect domains</td>
</tr>
<tr>
<td><strong>domains.total_domains</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of domains that can be scoped to an organization</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h2 id="packages">Packages</h2>

<p>A package is an application&rsquo;s &lsquo;source code&rsquo;; either raw bits for your application or a pointer to these bits.</p>

<p>In Cloud Foundry, packages are staged to produce an executable Droplet. We currently support raw bits and Docker packages.</p>
<h3 id="the-package-object">The package object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Package object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44f7c078-0934-470f-9883-4fcddc5b8f13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bits"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PROCESSING_UPLOAD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d3bf0ec-5806-43c4-b64e-8364dba1086a"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"upload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/upload"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"download"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/download"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1d3bf0ec-5806-43c4-b64e-8364dba1086a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the package</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Package type; valid values are <code class="prettyprint">bits</code>, <code class="prettyprint">docker</code></td>
</tr>
<tr>
<td><strong>data</strong></td>
<td><em>object</em></td>
<td>Data for package type (see below)</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td><em>string</em></td>
<td>State of the package; valid states are <code class="prettyprint">AWAITING_UPLOAD</code>, <code class="prettyprint">PROCESSING_UPLOAD</code>, <code class="prettyprint">READY</code>, <code class="prettyprint">FAILED</code>, <code class="prettyprint">COPYING</code>, <code class="prettyprint">EXPIRED</code></td>
</tr>
<tr>
<td><strong>relationships.app</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The app the package belongs to</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the package</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the package</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>

<h4 id="bits-package-data">Bits package data</h4>

<p>A bits package is used to upload source code for an app to. The bits package will provide an <code class="prettyprint">upload</code> link to which a zip file should be uploaded.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data.error</strong></td>
<td><em>string</em></td>
<td>If an error occurs this field will contain the error message</td>
</tr>
<tr>
<td><strong>data.checksum.type</strong></td>
<td><em>string</em></td>
<td>The checksum type, for example: <code class="prettyprint">sha256</code></td>
</tr>
<tr>
<td><strong>data.checksum.value</strong></td>
<td><em>string</em></td>
<td>The checksum value; this will be populated after bits are uploaded</td>
</tr>
</tbody></table>

<h4 id="docker-package-data">Docker package data</h4>

<p>A Docker package references a Docker image from a registry.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data.image</strong></td>
<td><em>string</em></td>
<td>The registry address of the image</td>
</tr>
<tr>
<td><strong>data.username</strong></td>
<td><em>string</em></td>
<td>The username for the image&rsquo;s registry</td>
</tr>
<tr>
<td><strong>data.password</strong></td>
<td><em>string</em></td>
<td>The password for the image&rsquo;s registry</td>
</tr>
</tbody></table>
<h3 id="create-a-package">Create a package</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request (buildpack app)
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/packages"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "type": "bits",
    "relationships": {
      "app": {
        "data": {
          "guid": "[guid]"
        }
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44f7c078-0934-470f-9883-4fcddc5b8f13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bits"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PROCESSING_UPLOAD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d3bf0ec-5806-43c4-b64e-8364dba1086a"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"upload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/upload"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"download"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/download"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1d3bf0ec-5806-43c4-b64e-8364dba1086a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Request (Docker app)
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/packages"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "type": "docker",
    "relationships": {
      "app": {
        "data": {
          "guid": "[guid]"
        }
      }
    },
    "data": {
      "image": "registry/image:latest",
      "username": "username",
      "password": "password"
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4cb65058-f04f-458f-aca1-5f4e43de6407"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"docker"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"registry/image:latest"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"***"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"READY"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T00:53:54Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d8b8148d-5798-44de-821a-64b85b15e968"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/4cb65058-f04f-458f-aca1-5f4e43de6407"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/d8b8148d-5798-44de-821a-64b85b15e968"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/packages</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Type of the package; valid values are <code class="prettyprint">bits</code>, <code class="prettyprint">docker</code></td>
</tr>
<tr>
<td><strong>relationships.app</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to an app</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data</strong></td>
<td><em>object</em></td>
<td>Data for package type</td>
<td><code class="prettyprint">{}</code></td>
</tr>
</tbody></table>

<h4 id="conditional-parameters">Conditional Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data.image</strong></td>
<td><em>string</em></td>
<td>Required when <code class="prettyprint">type</code> is <code class="prettyprint">docker</code>; the registry address of the image</td>
</tr>
<tr>
<td><strong>data.username</strong></td>
<td><em>string</em></td>
<td>Optional when <code class="prettyprint">type</code> is <code class="prettyprint">docker</code> and accessing a secured registry</td>
</tr>
<tr>
<td><strong>data.password</strong></td>
<td><em>string</em></td>
<td>Optional when <code class="prettyprint">type</code> is <code class="prettyprint">docker</code> and accessing a secured registry</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the package</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the package</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="get-a-package">Get a package</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/packages/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44f7c078-0934-470f-9883-4fcddc5b8f13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bits"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PROCESSING_UPLOAD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d3bf0ec-5806-43c4-b64e-8364dba1086a"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"upload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/upload"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"download"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/download"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1d3bf0ec-5806-43c4-b64e-8364dba1086a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/packages/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-packages">List packages</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/packages"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages?types=bits%2Cdocker&amp;page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages?types=bits%2Cdocker&amp;page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a57fd932-85db-483a-a27e-b00efbb3b0a4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bits"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWAITING_UPLOAD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T00:53:54Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fa3558ce-1c4d-46fc-9776-54b9c8021745"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/a57fd932-85db-483a-a27e-b00efbb3b0a4"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"upload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/a57fd932-85db-483a-a27e-b00efbb3b0a4/upload"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"download"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/a57fd932-85db-483a-a27e-b00efbb3b0a4/download"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/fa3558ce-1c4d-46fc-9776-54b9c8021745"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f1f294d-cef8-4c11-9f0b-3bcdc0bd2691"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"docker"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"registry/image:latest"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"***"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"READY"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T00:53:54Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fa3558ce-1c4d-46fc-9776-54b9c8021745"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/8f1f294d-cef8-4c11-9f0b-3bcdc0bd2691"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/fa3558ce-1c4d-46fc-9776-54b9c8021745"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all packages the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/packages</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of package guids to filter by</td>
</tr>
<tr>
<td><strong>states</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of package states to filter by</td>
</tr>
<tr>
<td><strong>types</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of package types to filter by</td>
</tr>
<tr>
<td><strong>app_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of app guids to filter by</td>
</tr>
<tr>
<td><strong>space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space guids to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by; defaults to ascending. Prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-packages-for-an-app">List packages for an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/packages"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/f2efe391-2b5b-4836-8518-ad93fa9ebf69/packages?states=READY&amp;page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/f2efe391-2b5b-4836-8518-ad93fa9ebf69/packages?states=READY&amp;page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"752edab0-2147-4f58-9c25-cd72ad8c3561"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bits"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"READY"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T21:41:09Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2efe391-2b5b-4836-8518-ad93fa9ebf69"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/752edab0-2147-4f58-9c25-cd72ad8c3561"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"upload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/752edab0-2147-4f58-9c25-cd72ad8c3561/upload"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"download"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/752edab0-2147-4f58-9c25-cd72ad8c3561/download"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/f2efe391-2b5b-4836-8518-ad93fa9ebf69"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve packages for an app that the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/packages</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of package guids to filter by</td>
</tr>
<tr>
<td><strong>states</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of package states to filter by</td>
</tr>
<tr>
<td><strong>types</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of package types to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by; defaults to ascending. Prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="update-a-package">Update a package</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/packages/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "metadata": { "labels": { "key": "value" }, "annotations": {"note": "detailed information"}}}'</span>

</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44f7c078-0934-470f-9883-4fcddc5b8f13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bits"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PROCESSING_UPLOAD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d3bf0ec-5806-43c4-b64e-8364dba1086a"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"upload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/upload"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"download"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/download"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1d3bf0ec-5806-43c4-b64e-8364dba1086a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/packages/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the package</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the package</td>
</tr>
<tr>
<td><strong>username</strong></td>
<td>string</td>
<td>The username for the image’s registry. Only possible for Docker package.</td>
</tr>
<tr>
<td><strong>password</strong></td>
<td>string</td>
<td>The password for the image’s registry. Only possible for Docker package.</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="delete-a-package">Delete a package</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/packages/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/packages/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="copy-a-package">Copy a package</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/packages?source_guid=[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "relationships": {
      "app": {
        "data": {
          "guid": "[destination-app-guid]"
        }
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fec72fc1-e453-4463-a86d-5df426f337a3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"docker"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://awesome-sauce.example.org"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COPYING"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T21:41:09Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36208a68-562d-4f51-94ea-28bd8553a271"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/fec72fc1-e453-4463-a86d-5df426f337a3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/36208a68-562d-4f51-94ea-28bd8553a271"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint copies the bits of a source package to a target package.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/packages?source_guid=:guid</code></p>

<h4 id="required-query-parameters">Required query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>source_guid</strong></td>
<td><em>uuid</em></td>
<td>GUID of the source package to copy from</td>
</tr>
</tbody></table>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>relationships.app</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to the destination app</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="download-package-bits">Download package bits</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/packages/[guid]/download"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">302</span> <span class="ne">Found</span>

You are being redirected.

</code></pre></div>
<p>This endpoint downloads the bits of an existing package.<br><br>
When using a remote blobstore, such as AWS, the response is a redirect to the actual location of the bits.
If the client is automatically following redirects, then the OAuth token that was used to communicate
with Cloud Controller will be replayed on the new redirect request. Some blobstores may reject
the request in that case. Clients may need to follow the redirect without including the OAuth token.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/packages/:guid/download</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="stage-a-package">Stage a package</h3>

<p>Staging a package is accomplished by creating a build. See <a href=#create-a-build>Create a build</a>.</p>
<h3 id="upload-package-bits">Upload package bits</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/packages/[guid]/upload"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-F</span> <span class="nv">bits</span><span class="o">=</span>@<span class="s2">"package.zip"</span> <span class="se">\</span>
  <span class="nt">-F</span> <span class="nv">resources</span><span class="o">=</span><span class="s1">'[{"path":"path/to/content.txt","size_in_bytes":123,"checksum": {"value": "b907173290db6a155949ab4dc9b2d019dea0c901"}},{"path":"path/to/code.jar","size_in_bytes":123,"checksum": {"value": "ff84f89760317996b9dd180ab996b079f418396f"}},{"path":"path/to/code.jar","size_in_bytes":123,"checksum": {"value": "ff84f89760317996b9dd180ab996b079f418396f"},"mode":"644"}]'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44f7c078-0934-470f-9883-4fcddc5b8f13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bits"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PROCESSING_UPLOAD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d3bf0ec-5806-43c4-b64e-8364dba1086a"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"upload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/upload"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"download"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/download"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1d3bf0ec-5806-43c4-b64e-8364dba1086a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This upload endpoint takes a multi-part form requests for packages of type <code class="prettyprint">bits</code>. The request requires either a <a href="https://en.wikipedia.org/wiki/Zip_(file_format)">.zip file</a> uploaded under the <code class="prettyprint">bits</code> field or a list of <a href="#the-resource-match-object">resource match objects</a> under the <code class="prettyprint">resources</code> field. These field may be used together.</p>

<p>The <code class="prettyprint">resources</code> field in the request accepts the v2 resources object format.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/packages/:guid/upload</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>bits</strong></td>
<td><em>form field</em></td>
<td>A binary zip file containing the package bits</td>
<td></td>
</tr>
<tr>
<td><strong>resources</strong></td>
<td><em>form field</em></td>
<td>Fingerprints of the application bits that have previously been pushed to Cloud Foundry, formatted as <a href="#the-resource-match-object">resource match objects</a></td>
<td><code class="prettyprint">[]</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h2 id="processes">Processes</h2>

<p>Processes define the runnable units of an app. An app can have multiple process types, each with differing commands and scale.
Processes for an app are defined by the buildpack used to stage the app and can be customized by including a <a href="#procfiles">Procfile</a> in the application source.</p>

<h4 id="web-process-type">Web process type</h4>

<ul>
<li>By default, a newly created app will come with one instance of the <code class="prettyprint">web</code> process and all other process types are scaled to zero</li>
<li>Scale the <code class="prettyprint">web</code> process to zero if it is not required for your app</li>
<li>Unless otherwise specified, all routes will be mapped to the <code class="prettyprint">web</code> process by default</li>
</ul>
<h3 id="the-process-object">The process object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Process object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6a901b7c-9417-4dc1-8189-d3234aa0ab82"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rackup"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"port"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"readiness_health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"process"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"invocation_timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"revision"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:22Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:42Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e9df685c-0464-4aa7-b5f0-8ed843077c13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"scale"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82/actions/scale"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"stats"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82/stats"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the process</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>version</strong></td>
<td><em>uuid</em></td>
<td>Random identifier that changes every time the process will be recreated in the runtime.</td>
</tr>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Process type; a unique identifier for processes belonging to an app</td>
</tr>
<tr>
<td><strong>command</strong></td>
<td><em>string</em> or <em>null</em></td>
<td>The command used to start the process; use <em>null</em> to revert to the buildpack-detected or procfile-provided start command</td>
</tr>
<tr>
<td><strong>user</strong></td>
<td><em>string</em> or <em>null</em></td>
<td>The user used to run the process; use <em>null</em> to revert to the docker-detected or default &lsquo;vcap&rsquo; user</td>
</tr>
<tr>
<td><strong>instances</strong></td>
<td><em>integer</em></td>
<td>The number of instances to run</td>
</tr>
<tr>
<td><strong>memory_in_mb</strong></td>
<td><em>integer</em></td>
<td>The memory in MB allocated per instance</td>
</tr>
<tr>
<td><strong>log_rate_limit_in_bytes_per_second</strong></td>
<td><em>integer</em></td>
<td>The log rate in bytes per second allocated per instance</td>
</tr>
<tr>
<td><strong>disk_in_mb</strong></td>
<td><em>integer</em></td>
<td>The disk in MB allocated per instance</td>
</tr>
<tr>
<td><strong>health_check</strong></td>
<td><a href="#the-health-check-object"><em>health check object</em></a></td>
<td>The health check to perform on the process</td>
</tr>
<tr>
<td><strong>readiness_health_check</strong></td>
<td><a href="#the-readiness-health-check-object"><em>readiness health check object</em></a></td>
<td>The readiness health check to perform on the process</td>
</tr>
<tr>
<td><strong>relationships.app</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The app the process belongs to</td>
</tr>
<tr>
<td><strong>relationships.revision</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The app revision the process is currently running</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the process</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the process</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="the-health-check-object">The health check object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example health check object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"port"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>The type of health check to perform; valid values are <code class="prettyprint">http</code>, <code class="prettyprint">port</code>, and <code class="prettyprint">process</code>; default is <code class="prettyprint">port</code></td>
</tr>
<tr>
<td><strong>data.timeout</strong></td>
<td><em>integer</em></td>
<td>The duration in seconds that health checks can fail before the process is restarted</td>
</tr>
<tr>
<td><strong>data.invocation_timeout</strong></td>
<td><em>integer</em></td>
<td>The timeout in seconds for individual health check requests for <code class="prettyprint">http</code> and <code class="prettyprint">port</code> health checks</td>
</tr>
<tr>
<td><strong>data.interval</strong></td>
<td><em>integer</em></td>
<td>The interval in seconds between health check requests</td>
</tr>
<tr>
<td><strong>data.endpoint</strong></td>
<td><em>string</em></td>
<td>The endpoint called to determine if the app is healthy; this key is only present for <code class="prettyprint">http</code> health checks</td>
</tr>
</tbody></table>
<h3 id="the-readiness-health-check-object">The readiness health check object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example readiness health check object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/ready"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invocation_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>The type of health check to perform; valid values are <code class="prettyprint">http</code>, <code class="prettyprint">port</code>, and <code class="prettyprint">process</code>; default is <code class="prettyprint">process</code></td>
</tr>
<tr>
<td><strong>data.invocation_timeout</strong></td>
<td><em>integer</em></td>
<td>The timeout in seconds for individual health check requests for <code class="prettyprint">http</code> and <code class="prettyprint">port</code> health checks</td>
</tr>
<tr>
<td><strong>data.interval</strong></td>
<td><em>integer</em></td>
<td>The interval in seconds between health check requests</td>
</tr>
<tr>
<td><strong>data.endpoint</strong></td>
<td><em>string</em></td>
<td>The endpoint called to determine if the app is ready; this key is only present for <code class="prettyprint">http</code> health checks</td>
</tr>
</tbody></table>
<h3 id="the-process-stats-object">The process stats object</h3>

<p>The process stats object provides information about the status of an individual instance of a process.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example process stats object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RUNNING"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"usage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T23:17:30.476314154Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cpu"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00038711029163348665</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cpu_entitlement"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01117396940977856</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mem"</span><span class="p">:</span><span class="w"> </span><span class="mi">19177472</span><span class="p">,</span><span class="w">
    </span><span class="nl">"disk"</span><span class="p">:</span><span class="w"> </span><span class="mi">69705728</span><span class="p">,</span><span class="w">
    </span><span class="nl">"log_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.244.16.10"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"instance_ports"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"external"</span><span class="p">:</span><span class="w"> </span><span class="mi">64546</span><span class="p">,</span><span class="w">
      </span><span class="nl">"internal"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
      </span><span class="nl">"external_tls_proxy_port"</span><span class="p">:</span><span class="w"> </span><span class="mi">61002</span><span class="p">,</span><span class="w">
      </span><span class="nl">"internal_tls_proxy_port"</span><span class="p">:</span><span class="w"> </span><span class="mi">61003</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"uptime"</span><span class="p">:</span><span class="w"> </span><span class="mi">9042</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mem_quota"</span><span class="p">:</span><span class="w"> </span><span class="mi">268435456</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disk_quota"</span><span class="p">:</span><span class="w"> </span><span class="mi">1073741824</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fds_quota"</span><span class="p">:</span><span class="w"> </span><span class="mi">16384</span><span class="p">,</span><span class="w">
  </span><span class="nl">"isolation_segment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example_iso_segment"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Process type; a unique identifier for processes belonging to an app</td>
</tr>
<tr>
<td><strong>index</strong></td>
<td><em>integer</em></td>
<td>The zero-based index of running instances</td>
</tr>
<tr>
<td><strong>instance_guid</strong></td>
<td><em>string</em></td>
<td>The unique identifier of the instance</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td><em>string</em></td>
<td>The state of the instance; valid values are <code class="prettyprint">RUNNING</code>, <code class="prettyprint">CRASHED</code>, <code class="prettyprint">STARTING</code>, <code class="prettyprint">STOPPING</code>, <code class="prettyprint">DOWN</code></td>
</tr>
<tr>
<td><strong>routable</strong></td>
<td><em>boolean</em></td>
<td>Whether or not the instance is routable (determined by the readiness check of the app). If app readiness checks and routability are unsupported by Diego, this will return as <code class="prettyprint">null</code>.</td>
</tr>
<tr>
<td><strong>usage</strong></td>
<td><em>object</em></td>
<td>Object containing actual usage data for the instance; the value is <code class="prettyprint">{}</code> when usage data is unavailable</td>
</tr>
<tr>
<td><strong>usage.time</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time when the usage was requested</td>
</tr>
<tr>
<td><strong>usage.cpu</strong></td>
<td><em>number</em></td>
<td>The current cpu usage of the instance</td>
</tr>
<tr>
<td><strong>usage.mem</strong></td>
<td><em>integer</em></td>
<td>The current memory usage of the instance</td>
</tr>
<tr>
<td><strong>usage.disk</strong></td>
<td><em>integer</em></td>
<td>The current disk usage of the instance</td>
</tr>
<tr>
<td><strong>usage.log_rate</strong></td>
<td><em>integer</em></td>
<td>The current logging usage of the instance</td>
</tr>
<tr>
<td><strong>host</strong></td>
<td><em>string</em></td>
<td>The host the instance is running on</td>
</tr>
<tr>
<td><strong>instance_internal_ip</strong></td>
<td><em>string</em></td>
<td>The internal IP address of the instance</td>
</tr>
<tr>
<td><strong>instance_ports</strong></td>
<td><em>object</em></td>
<td>JSON array of port mappings between the network-exposed port used to communicate with the app (<code class="prettyprint">external</code>) and port opened to the running process that it can listen on (<code class="prettyprint">internal</code>). Clients shall interprete <code class="prettyprint">0</code> and <code class="prettyprint">null</code> as non-existing port.</td>
</tr>
<tr>
<td><strong>uptime</strong></td>
<td><em>integer</em></td>
<td>The uptime in seconds for the instance</td>
</tr>
<tr>
<td><strong>mem_quota</strong></td>
<td><em>integer</em></td>
<td>The current maximum memory allocated for the instance; the value is <code class="prettyprint">null</code> when memory quota data is unavailable</td>
</tr>
<tr>
<td><strong>disk_quota</strong></td>
<td><em>integer</em></td>
<td>The current maximum disk allocated for the instance; the value is <code class="prettyprint">null</code> when disk quota data is unavailable</td>
</tr>
<tr>
<td><strong>log_rate_limit</strong></td>
<td><em>integer</em></td>
<td>The current maximum log rate allocated for the instance; the value <code class="prettyprint">-1</code> is unlimited, the value is <code class="prettyprint">null</code> when the log_rate_limit is unavailable</td>
</tr>
<tr>
<td><strong>fds_quota</strong></td>
<td><em>integer</em></td>
<td>The maximum file descriptors the instance is allowed to use</td>
</tr>
<tr>
<td><strong>isolation_segment</strong></td>
<td><em>string</em></td>
<td>The current isolation segment that the instance is running on; the value is <code class="prettyprint">null</code> when the instance is not placed on a particular isolation segment</td>
</tr>
<tr>
<td><strong>details</strong></td>
<td><em>string</em></td>
<td>Information about errors placing the instance; the value is <code class="prettyprint">null</code>  if there are no placement errors</td>
</tr>
</tbody></table>
<h3 id="get-a-process">Get a process</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/processes/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6a901b7c-9417-4dc1-8189-d3234aa0ab82"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rackup"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"port"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"readiness_health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"process"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"invocation_timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"revision"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:22Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:42Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e9df685c-0464-4aa7-b5f0-8ed843077c13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"scale"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82/actions/scale"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"stats"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82/stats"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/processes/:guid</code> <br>
<code class="prettyprint">GET /v3/apps/:guid/processes/:type</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td>Some fields are redacted</td>
</tr>
<tr>
<td>Org Manager</td>
<td>Some fields are redacted</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Some fields are redacted</td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
<tr>
<td>Space Manager</td>
<td>Some fields are redacted</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Some fields are redacted</td>
</tr>
</tbody></table>
<h3 id="get-stats-for-a-process">Get stats for a process</h3>

<p>Process stats are objects that represent the individual instances of a process.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/processes/[guid]/stats"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instance_guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e49f448e-54d2-4c33-61a3-5335"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RUNNING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"usage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T23:17:30.476314154Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cpu"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00038711029163348665</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cpu_entitlement"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01117396940977856</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mem"</span><span class="p">:</span><span class="w"> </span><span class="mi">19177472</span><span class="p">,</span><span class="w">
        </span><span class="nl">"disk"</span><span class="p">:</span><span class="w"> </span><span class="mi">69705728</span><span class="p">,</span><span class="w">
        </span><span class="nl">"log_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.244.16.10"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instance_internal_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.255.93.167"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instance_ports"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"external"</span><span class="p">:</span><span class="w"> </span><span class="mi">64546</span><span class="p">,</span><span class="w">
          </span><span class="nl">"internal"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
          </span><span class="nl">"external_tls_proxy_port"</span><span class="p">:</span><span class="w"> </span><span class="mi">61002</span><span class="p">,</span><span class="w">
          </span><span class="nl">"internal_tls_proxy_port"</span><span class="p">:</span><span class="w"> </span><span class="mi">61003</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"uptime"</span><span class="p">:</span><span class="w"> </span><span class="mi">9042</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mem_quota"</span><span class="p">:</span><span class="w"> </span><span class="mi">268435456</span><span class="p">,</span><span class="w">
      </span><span class="nl">"disk_quota"</span><span class="p">:</span><span class="w"> </span><span class="mi">1073741824</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fds_quota"</span><span class="p">:</span><span class="w"> </span><span class="mi">16384</span><span class="p">,</span><span class="w">
      </span><span class="nl">"isolation_segment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example_iso_segment"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_rate_limit"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STARTING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"usage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"cpu"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cpu_entitlement"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"disk"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"log_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mem"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T21:34:04+00:00"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"disk_quota"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fds_quota"</span><span class="p">:</span><span class="w"> </span><span class="mi">16384</span><span class="p">,</span><span class="w">
      </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instance_internal_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instance_ports"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"isolation_segment"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_rate_limit"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mem_quota"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"uptime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/processes/:guid/stats</code> <br>
<code class="prettyprint">GET /v3/apps/:guid/processes/:type/stats</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td>Some fields are redacted</td>
</tr>
<tr>
<td>Org Manager</td>
<td>Some fields are redacted</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Some fields are redacted</td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
<tr>
<td>Space Manager</td>
<td>Some fields are redacted</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Some fields are redacted</td>
</tr>
</tbody></table>
<h3 id="list-processes">List processes</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/processes"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6a901b7c-9417-4dc1-8189-d3234aa0ab82"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[PRIVATE DATA HIDDEN IN LISTS]"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="p">,</span><span class="w">
      </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"port"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"invocation_timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"interval"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"readiness_health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"process"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"invocation_timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"interval"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"revision"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:22Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:42Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e9df685c-0464-4aa7-b5f0-8ed843077c13"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"scale"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82/actions/scale"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"stats"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82/stats"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3fccacd9-4b02-4b96-8d02-8e865865e9eb"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"worker"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[PRIVATE DATA HIDDEN IN LISTS]"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="p">,</span><span class="w">
      </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"process"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"invocation_timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"interval"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"readiness_health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/ready"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"invocation_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nl">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"revision"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:22Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:42Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74e513bb-7b9e-445c-84d5-7fea1394e611"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/3fccacd9-4b02-4b96-8d02-8e865865e9eb"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"scale"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/3fccacd9-4b02-4b96-8d02-8e865865e9eb/actions/scale"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"stats"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/3fccacd9-4b02-4b96-8d02-8e865865e9eb/stats"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all processes the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/processes</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of process guids to filter by</td>
</tr>
<tr>
<td><strong>types</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of process types to filter by</td>
</tr>
<tr>
<td><strong>app_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of app guids to filter by</td>
</tr>
<tr>
<td><strong>space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space guids to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-processes-for-app">List processes for app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/processes"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/processes?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/processes?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/processes?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6a901b7c-9417-4dc1-8189-d3234aa0ab82"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[PRIVATE DATA HIDDEN IN LISTS]"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="p">,</span><span class="w">
      </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"port"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"invocation_timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"interval"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"readiness_health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"process"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"invocation_timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"interval"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"revision"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:22Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:42Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e9df685c-0464-4aa7-b5f0-8ed843077c13"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"scale"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82/actions/scale"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"stats"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82/stats"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3fccacd9-4b02-4b96-8d02-8e865865e9eb"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"worker"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[PRIVATE DATA HIDDEN IN LISTS]"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="p">,</span><span class="w">
      </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"process"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"invocation_timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"interval"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"readiness_health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/ready"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"invocation_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nl">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"revision"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:22Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:42Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74e513bb-7b9e-445c-84d5-7fea1394e611"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/3fccacd9-4b02-4b96-8d02-8e865865e9eb"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"scale"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/3fccacd9-4b02-4b96-8d02-8e865865e9eb/actions/scale"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"stats"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/3fccacd9-4b02-4b96-8d02-8e865865e9eb/stats"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves all processes belonging to an app.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/processes</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of process guids to filter by</td>
</tr>
<tr>
<td><strong>types</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of process types to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="update-a-process">Update a process</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/processes/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "command": "rackup",
    "metadata": {
      "labels": {
        "key": "value"
      },
      "annotations": {
        "note": "detailed information"
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6a901b7c-9417-4dc1-8189-d3234aa0ab82"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rackup"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"port"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"readiness_health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"process"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"invocation_timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"revision"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"key"</span><span class="p">:</span><span class="s2">"value"</span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"note"</span><span class="p">:</span><span class="s2">"detailed information"</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:22Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:42Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e9df685c-0464-4aa7-b5f0-8ed843077c13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"scale"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82/actions/scale"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"stats"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82/stats"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/processes/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>command</strong></td>
<td><em>string</em> or <em>null</em></td>
<td>The command used to start the process; use <em>null</em> to revert to the buildpack-detected or procfile-provided start command</td>
</tr>
<tr>
<td><strong>health_check</strong></td>
<td><a href="#the-health-check-object"><em>health check object</em></a></td>
<td>The health check to perform on the process</td>
</tr>
<tr>
<td><strong>readiness_health_check</strong></td>
<td><a href="#the-readiness-health-check-object"><em>readiness health check object</em></a></td>
<td>The readiness health check to perform on the process</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the process</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the process</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="scale-a-process">Scale a process</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/processes/[guid]/actions/scale"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "instances": 5,
    "memory_in_mb": 256,
    "disk_in_mb": 1024,
    "log_rate_limit_in_bytes_per_second": 1024
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6a901b7c-9417-4dc1-8189-d3234aa0ab82"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rackup"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"port"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"readiness_health_check"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"process"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"invocation_timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"revision"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:22Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-23T18:48:42Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e9df685c-0464-4aa7-b5f0-8ed843077c13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"scale"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82/actions/scale"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"stats"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/6a901b7c-9417-4dc1-8189-d3234aa0ab82/stats"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/processes/:guid/actions/scale</code> <br>
<code class="prettyprint">POST /v3/apps/:guid/processes/:type/actions/scale</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>instances</strong></td>
<td><em>integer</em></td>
<td>The number of instances to run</td>
</tr>
<tr>
<td><strong>memory_in_mb</strong></td>
<td><em>integer</em></td>
<td>The memory in mb allocated per instance</td>
</tr>
<tr>
<td><strong>disk_in_mb</strong></td>
<td><em>integer</em></td>
<td>The disk in mb allocated per instance</td>
</tr>
<tr>
<td><strong>log_rate_limit_in_bytes_per_second</strong></td>
<td><em>integer</em></td>
<td>The log rate in bytes per second allocated per instance</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="terminate-a-process-instance">Terminate a process instance</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/processes/[guid]/instances/[index]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div>
<p>Terminate an instance of a specific process. Health management will eventually restart the instance.</p>

<p>This allows a user to stop a single misbehaving instance of a process.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/processes/:guid/instances/:index</code> <br>
<code class="prettyprint">DELETE /v3/apps/:guid/processes/:type/instances/:index</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h2 id="resource-matches">Resource Matches</h2>

<p>This endpoint matches given resource SHA-1/file size pairs against the Cloud Controller cache
and reports the subset that describes already cached files.
This is usually used to avoid uploading duplicate files
when pushing an app which has only been partially changed.
The <code class="prettyprint">path</code> and <code class="prettyprint">mode</code> fields are not used when matching.</p>

<p>When <a href="#upload-package-bits">uploading package bits</a>,
the response from this endpoint should be used as the <code class="prettyprint">resources</code> form field.
As such, it is useful to include the <code class="prettyprint">path</code> and <code class="prettyprint">mode</code> fields for each resource
even though they are not used when determining a resource match.</p>

<p>Cloud Foundry operators may set minimum/maximum file sizes to match against.
If the file size provided is outside this range,
it will not be matched against.</p>

<p>If the <code class="prettyprint">resource_matching</code> <a href="#the-feature-flag-object">feature flag</a> is disabled,
resource matching will always return an empty array.</p>
<h3 id="the-resource-match-object">The resource match object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Resource Match object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a9993e364706816aba3e25717850c26c9cd0d89d"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nl">"size_in_bytes"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"path/to/file"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"644"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>checksum.value</strong></td>
<td><em>string</em></td>
<td><strong>(Required)</strong> SHA-1 hash of file</td>
</tr>
<tr>
<td><strong>size_in_bytes</strong></td>
<td><em>integer</em></td>
<td><strong>(Required)</strong> Size of file in bytes</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td><em>string</em></td>
<td>Path to the file, relative to app root</td>
</tr>
<tr>
<td><strong>mode</strong></td>
<td><em>string</em></td>
<td>File mode, i.e. POSIX file permissions; defaults to 0744</td>
</tr>
</tbody></table>
<h3 id="create-a-resource-match">Create a resource match</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/resource_matches"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
        "resources": [
          {
            "checksum": { "value": "002d760bea1be268e27077412e11a320d0f164d3" },
            "size_in_bytes": 36,
            "path": "C:\\path\\to\\file",
            "mode": "645"
          },
          {
            "checksum": { "value": "a9993e364706816aba3e25717850c26c9cd0d89d" },
            "size_in_bytes": 1,
            "path": "path/to/file",
            "mode": "644"
          }
        ]
      }'</span>

</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a9993e364706816aba3e25717850c26c9cd0d89d"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nl">"size_in_bytes"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"path/to/file"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"644"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint returns a list of <strong>cached</strong> resources from the input list.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/resource_matches</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>resources</strong></td>
<td><em>array of <a href="#the-resource-match-object">resource_object</a></em></td>
<td>List of resources to check for in the resource cache</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h2 id="revisions">Revisions</h2>

<p>Revisions represent code used by an application at a specific time. The most recent revision for a running application represents code and configuration currently running in Cloud Foundry. Revisions are not created for Tasks.</p>

<p>Revision are created when the following is changed:</p>

<ul>
<li><p>A new droplet is deployed for an app</p></li>
<li><p>An app is deployed with new environment variables</p></li>
<li><p>The app is deployed with a new or changed custom start command</p></li>
<li><p>An app rolls back to a prior revision</p></li>
</ul>

<p>Each time a new revision is created the reason(s) for the revisions creation will be appended to its description field.</p>

<p>By default the cloud foundry API retains at most 100 revisions per app.</p>
<h3 id="the-revision-object">The revision object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Revision object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"sidecars"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth-sidecar"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec sidecar"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"web"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Initial revision."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"deployable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/revisions/885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/revisions/885735b5-aea4-4cf5-8e44-961af0e41920/environment_variables"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the revision</td>
</tr>
<tr>
<td><strong>version</strong></td>
<td><em>integer</em></td>
<td>Human-readable identifier for the revision; starts at 1, increments by 1 for each new revision of the app, and rolls back over to 1 at 9999</td>
</tr>
<tr>
<td><strong>droplet</strong></td>
<td><em>object</em></td>
<td>The droplet used by a process running the revision</td>
</tr>
<tr>
<td><strong>processes</strong></td>
<td><a href="#the-process-snapshot-object"><em>process snapshot object</em></a></td>
<td>An object representing process types at this revision</td>
</tr>
<tr>
<td><strong>sidecars</strong></td>
<td><em>array of <a href="#the-sidecar-snapshot-object">sidecar snapshot objects</a></em> ]</td>
<td>The array of sidecars used by processes running the revision</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td><em>string</em></td>
<td>A short description of the reason for revision</td>
</tr>
<tr>
<td><strong>deployable</strong></td>
<td><em>boolean</em></td>
<td>Indicates if the revision&rsquo;s droplet is staged and the revision can be used to <a href="#create-a-deployment">create a deployment</a></td>
</tr>
<tr>
<td><strong>relationships.app</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The app the revision is associated with</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the revision</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the revision</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>

<h3 id="the-process-snapshot-object">The process snapshot object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Process Snapshot object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"worker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec work"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The process snapshot object is a map of process types to objects.
Each object contains the command that the given process type was running at this revision.</p>

<h3 id="the-sidecar-snapshot-object">The sidecar snapshot object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Sidecar Snapshot object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth-sidecar"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"web"</span><span class="p">,</span><span class="w"> </span><span class="s2">"worker"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Human-readable name for the sidecar</td>
</tr>
<tr>
<td><strong>command</strong></td>
<td><em>string</em></td>
<td>The command used to start the sidecar</td>
</tr>
<tr>
<td><strong>process_types</strong></td>
<td><em>list of strings</em></td>
<td>A list of process types the sidecar applies to</td>
</tr>
<tr>
<td><strong>memory_in_mb</strong></td>
<td><em>integer</em></td>
<td>Reserved memory for sidecar</td>
</tr>
</tbody></table>
<h3 id="get-a-revision">Get a revision</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/revisions/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"sidecars"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth-sidecar"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec sidecar"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"web"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Initial revision."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"deployable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/revisions/885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/revisions/885735b5-aea4-4cf5-8e44-961af0e41920/environment_variables"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/revisions/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="get-environment-variables-for-a-revision">Get environment variables for a revision</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/revisions/[guid]/environment_variables"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"var"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"RAILS_ENV"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/revisions/[guid]/environment_variables"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"revision"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/revisions/[guid]"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/[app_guid]"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieve the environment variables that are associated with the revision.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/revisions/:guid/environment_variables</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="list-revisions-for-an-app">List revisions for an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/:guid/revisions"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"sidecars"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth-sidecar"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec sidecar"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"web"</span><span class="p">],</span><span class="w">
          </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Initial revision."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"deployable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/revisions/885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/revisions/885735b5-aea4-4cf5-8e44-961af0e41920/environment_variables"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve revisions for an app the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/revisions</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>versions</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of revision versions to filter by</td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-deployed-revisions-for-an-app">List deployed revisions for an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/:guid/revisions/deployed"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"sidecars"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth-sidecar"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec sidecar"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"web"</span><span class="p">],</span><span class="w">
          </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Initial revision."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"deployable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/revisions/885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/revisions/885735b5-aea4-4cf5-8e44-961af0e41920/environment_variables"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve deployed revisions for an app the user has access to.
Deployed revisions are revisions that are linked to started processes in the app.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/revisions/deployed</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending, prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="update-a-revision">Update a revision</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/revisions/[revguid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "metadata": { "labels": { "key": "value" }, "annotations": {"note": "detailed information"}}}'</span>

</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"sidecars"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth-sidecar"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec sidecar"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"web"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Initial revision."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"deployable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"key"</span><span class="p">:</span><span class="s2">"value"</span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"note"</span><span class="p">:</span><span class="s2">"detailed information"</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/revisions/885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/revisions/885735b5-aea4-4cf5-8e44-961af0e41920/environment_variables"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/revisions/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the revision</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the revision</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h2 id="roles">Roles</h2>

<p>Roles control access to resources in organizations and spaces.
Roles are assigned to users.</p>

<p>For example, a user with the <code class="prettyprint">space_developer</code> role is able to push
applications to their space. A <code class="prettyprint">space_manager</code> user can also add roles to users
within that space (e.g. making a user a <code class="prettyprint">space_auditor</code>). An
<code class="prettyprint">organization_manager</code> has wide-reaching privileges, able to create &amp; delete
spaces, and assign &amp; unassign roles to users.</p>
<h3 id="the-role-object">The role object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Role object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40557c70-d1bd-4976-a2ab-a85f5e882418"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-10T17:19:12Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-10T17:19:12Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"organization_auditor"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59eadb5f-fc13-414f-84ba-77a35e239cc8"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05c5da3b-6cbc-421c-87c3-20bb3c41ab7c"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/roles/40557c70-d1bd-4976-a2ab-a85f5e882418"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/59eadb5f-fc13-414f-84ba-77a35e239cc8"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/05c5da3b-6cbc-421c-87c3-20bb3c41ab7c"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the role</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the role was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the role was last updated</td>
</tr>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Role type; see <a href="#valid-role-types">Valid role types</a></td>
</tr>
<tr>
<td><strong>relationships.user</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to the user; this is the user that has the role</td>
</tr>
<tr>
<td><strong>relationships.space</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to the space the role controls access to; when this is an organization role, <code class="prettyprint">space.data</code> will be <code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>relationships.organization</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to the organization the role controls access to; when this is a space role, <code class="prettyprint">organization.data</code> will be <code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="valid-role-types">Valid role types</h3>

<ul>
<li><code class="prettyprint">organization_user</code></li>
<li><code class="prettyprint">organization_auditor</code></li>
<li><code class="prettyprint">organization_manager</code></li>
<li><code class="prettyprint">organization_billing_manager</code></li>
<li><code class="prettyprint">space_auditor</code></li>
<li><code class="prettyprint">space_developer</code></li>
<li><code class="prettyprint">space_manager</code></li>
<li><code class="prettyprint">space_supporter</code>

<ul>
<li>Users with only the space supporter role are not authorized to use the <strong>V2</strong> API</li>
</ul></li>
</ul>
<h3 id="create-a-role">Create a role</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request (by user guid)
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/roles"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
      "type": "organization_auditor",
      "relationships": {
        "user": {
          "data": {
            "guid": "user-guid"
          }
        },
        "organization": {
          "data": {
            "guid": "org-guid"
          }
        }
      }
    }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40557c70-d1bd-4976-a2ab-a85f5e882418"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-10T17:19:12Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-10T17:19:12Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"organization_auditor"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59eadb5f-fc13-414f-84ba-77a35e239cc8"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05c5da3b-6cbc-421c-87c3-20bb3c41ab7c"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/roles/40557c70-d1bd-4976-a2ab-a85f5e882418"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/59eadb5f-fc13-414f-84ba-77a35e239cc8"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/05c5da3b-6cbc-421c-87c3-20bb3c41ab7c"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Request (by username and origin)
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/roles"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
      "type": "organization_auditor",
      "relationships": {
        "user": {
          "data": {
            "username": "user-name",
            "origin": "ldap"
          }
        },
        "organization": {
          "data": {
            "guid": "org-guid"
          }
        }
      }
    }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40557c70-d1bd-4976-a2ab-a85f5e882418"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-10T17:19:12Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-10T17:19:12Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"organization_auditor"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59eadb5f-fc13-414f-84ba-77a35e239cc8"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05c5da3b-6cbc-421c-87c3-20bb3c41ab7c"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/roles/40557c70-d1bd-4976-a2ab-a85f5e882418"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/59eadb5f-fc13-414f-84ba-77a35e239cc8"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/05c5da3b-6cbc-421c-87c3-20bb3c41ab7c"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint creates a new role for a user in an organization or space.</p>

<p>To create an organization role you must be an admin or organization manager in the organization associated with the role.</p>

<p>To create a space role you must be an admin, an organization manager in the parent organization of the space associated with the role, or a space manager in the space associated with the role.</p>

<p>For a user to be assigned a space role, the user must already have an organization role in the parent organization.</p>

<p>If the associated user is valid but does not exist in Cloud Controller&rsquo;s database, a user resource will be created automatically.</p>

<p>If CAPI property <code class="prettyprint">cc.allow_user_creation_by_org_manager</code> is enabled, the organization role is being created by username + origin and the user does not exist in UAA yet, the user will be created.
The origin must be different from <code class="prettyprint">uaa</code> in this case.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/roles</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Role to create; see <a href="#valid-role-types">valid role types</a></td>
</tr>
<tr>
<td><strong>relationships.user</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to a user; the user can be defined by either a <code class="prettyprint">guid</code> or, if the <code class="prettyprint">set_roles_by_username</code> <a href="#list-of-feature-flags">feature_flag</a> is enabled, a <code class="prettyprint">username</code> (with the option of including an <code class="prettyprint">origin</code> to disambiguate it)</td>
</tr>
<tr>
<td><strong>relationships.organization</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to an organization; required only when creating an organization role</td>
</tr>
<tr>
<td><strong>relationships.space</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to a space; required only when creating a space role</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can create roles in managed organizations and spaces within those organizations; can also create roles for users outside of managed organizations when <code class="prettyprint">set_roles_by_username</code> <a href="#list-of-feature-flags">feature_flag</a> is enabled; this requires identifying users by username and origin</td>
</tr>
<tr>
<td>Space Manager</td>
<td>Can create roles in managed spaces for users in their org</td>
</tr>
</tbody></table>
<h3 id="get-a-role">Get a role</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/roles/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40557c70-d1bd-4976-a2ab-a85f5e882418"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-10T17:19:12Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-10T17:19:12Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"organization_auditor"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59eadb5f-fc13-414f-84ba-77a35e239cc8"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05c5da3b-6cbc-421c-87c3-20bb3c41ab7c"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/roles/40557c70-d1bd-4976-a2ab-a85f5e882418"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/59eadb5f-fc13-414f-84ba-77a35e239cc8"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/05c5da3b-6cbc-421c-87c3-20bb3c41ab7c"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint gets an individual role resource.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/roles/:guid</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>include</strong></td>
<td><em>list of strings</em></td>
<td>Optionally include a list of unique related resources in the response; <br>valid values are <code class="prettyprint">user</code>, <code class="prettyprint">space</code>, and <code class="prettyprint">organization</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can see roles in managed organizations or spaces in those organizations</td>
</tr>
<tr>
<td>Org Auditor</td>
<td>Can only see organization roles in audited organizations</td>
</tr>
<tr>
<td>Org Billing Manager</td>
<td>Can only see organization roles in billing-managed organizations</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Can see roles in audited spaces or parent organizations</td>
</tr>
<tr>
<td>Space Developer</td>
<td>Can see roles in developed spaces or parent organizations</td>
</tr>
<tr>
<td>Space Manager</td>
<td>Can see roles in managed spaces or parent organizations</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Can see roles in supported spaces or parent organizations</td>
</tr>
</tbody></table>
<h3 id="list-roles">List roles</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/roles"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/roles?page=1&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/roles?page=2&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/roles?page=2&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40557c70-d1bd-4976-a2ab-a85f5e882418"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-10T17:19:12Z"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-10T17:19:12Z"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"organization_auditor"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59eadb5f-fc13-414f-84ba-77a35e239cc8"</span><span class="w">
               </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05c5da3b-6cbc-421c-87c3-20bb3c41ab7c"</span><span class="w">
               </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/roles/40557c70-d1bd-4976-a2ab-a85f5e882418"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/59eadb5f-fc13-414f-84ba-77a35e239cc8"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/05c5da3b-6cbc-421c-87c3-20bb3c41ab7c"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12347c70-d1bd-4976-a2ab-a85f5e882418"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2047-11-10T17:19:12Z"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2047-11-10T17:19:12Z"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space_auditor"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"47eadb5f-fc13-414f-84ba-47a35e239cc8"</span><span class="w">
               </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"47c5da3b-6cbc-421c-87c3-20bb3c41ab7c"</span><span class="w">
               </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/roles/12347c70-d1bd-4976-a2ab-a85f5e882418"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/47eadb5f-fc13-414f-84ba-77a35e239cc8"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/47c5da3b-6cbc-421c-87c3-20bb3c41ab7c"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint lists roles that the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/roles</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of role guids to filter by</td>
</tr>
<tr>
<td><strong>types</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of <a href="#valid-role-types">role types</a> to filter by</td>
</tr>
<tr>
<td><strong>space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space guids to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>user_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of user guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>include</strong></td>
<td><em>list of strings</em></td>
<td>Optionally include a list of unique related resources in the response; <br>valid values are <code class="prettyprint">user</code>, <code class="prettyprint">space</code>, and <code class="prettyprint">organization</code></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="delete-a-role">Delete a role</h3>

<p>This endpoint deletes an individual role.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/roles/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/roles/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can delete roles in managed organizations or spaces in those organizations</td>
</tr>
<tr>
<td>Space Manager</td>
<td>Can delete roles in managed spaces</td>
</tr>
</tbody></table>
<h2 id="root">Root</h2>

<p>These endpoints link to other resources, endpoints, and external services that are relevant to API clients.</p>
<h3 id="global-api-root">Global API Root</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cloud_controller_v2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.155.0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cloud_controller_v3"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.90.0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"network_policy_v0"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/networking/v0/external"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"network_policy_v1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/networking/v1/external"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://login.example.org"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"uaa"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://uaa.example.org"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"credhub"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"routing"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/routing"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"logging"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wss://doppler.example.org:443"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"log_cache"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://log-cache.example.org"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"log_stream"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://log-stream.example.org"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app_ssh"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ssh.example.org:2222"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"host_key_fingerprint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Y411oivJwZCUQnXHq83mdM5SKCK4ftyoSXI31RRe4Zs"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"oauth_client"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ssh-proxy"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint returns links to the APIs available on a given Cloud Foundry deployment.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /</code></p>

<h4 id="authentication">Authentication</h4>

<p>No authentication required.</p>
<h3 id="v3-api-root">V3 API Root</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app_usage_events"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/app_usage_events"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"audit_events"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/audit_events"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/buildpacks"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"builds"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/builds"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"deployments"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/deployments"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"environment_variable_groups"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/environment_variable_groups"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"feature_flags"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/feature_flags"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/info"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"isolation_segments"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization_quotas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organization_quotas"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"packages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/packages"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"resource_matches"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/resource_matches"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/roles"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"security_groups"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_brokers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_brokers"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instances"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"experimental"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_offerings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_plans"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_usage_events"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_usage_events"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space_quotas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/space_quotas"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"stacks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint returns links to all the resources available on the v3 API.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3</code></p>

<h4 id="authentication">Authentication</h4>

<p>No authentication required.</p>
<h2 id="routes">Routes</h2>

<p>Routes are addresses that direct matched network traffic to one or more destinations. Each route is based on a domain name with additional matching criteria (host (subdomain), path, etc). Matched traffic will be distributed across all destinations, based on their configuration (round-robin by default).</p>
<h3 id="the-route-object">The route object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Route object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">6666</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-10T17:17:48Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-10T17:17:48Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a-hostname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/some_path"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a-hostname.a-domain.com/some_path"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"385bf117-17f5-4689-8c5c-08c6cc821fed"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0a6636b5-7fc4-44d8-8752-0db3e40b35a5"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27e96a3b-5bcf-49ed-8048-351e0be23e6f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f61e59fa-2121-4217-8c7b-15bfd75baf25"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="w">
    </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
  </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"loadbalancing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"round-robin"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885a8cb3-c07b-4856-b448-eeb10bf36236"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b5f3633-194c-42d2-9408-972366617e0e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885a8cb3-c07b-4856-b448-eeb10bf36236"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/0b5f3633-194c-42d2-9408-972366617e0e"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31/destinations"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the route</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>protocol</strong></td>
<td><em>string</em></td>
<td>The protocol supported by the route, based on the route&rsquo;s domain configuration. Valid protocols are <code class="prettyprint">http</code> and <code class="prettyprint">tcp</code></td>
</tr>
<tr>
<td><strong>host</strong></td>
<td><em>string</em></td>
<td>The hostname for the route; not compatible with routes specifying the <code class="prettyprint">tcp</code> protocol;<br>must be either a wildcard (*) or be under 63 characters long and only contain letters, numbers, dashes (-) or underscores(_)</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td><em>string</em></td>
<td>The path for the route; not compatible with routes specifying the <code class="prettyprint">tcp</code> protocol;<br>must be under 128 characters long and not contain question marks (?), begin with a slash (/) and not be exactly a slash (/). Must conform to path components from <a href="https://tools.ietf.org/html/rfc2396">RFC 2396</a></td>
</tr>
<tr>
<td><strong>port</strong></td>
<td><em>integer or <code class="prettyprint">null</code></em></td>
<td>The port that the route listens on. Only compatible with routes specifying the <code class="prettyprint">tcp</code> protocol</td>
</tr>
<tr>
<td><strong>url</strong></td>
<td><em>string</em></td>
<td>The URL for the route; URLs of protocol <code class="prettyprint">http</code> are a combination of host, domain name, and path; URLs of protocol <code class="prettyprint">tcp</code> are a combination of domain name and port</td>
</tr>
<tr>
<td><strong>destinations</strong></td>
<td>array of <a href="#the-destination-object"><em>destination objects</em></a></td>
<td>List of destinations for the route</td>
</tr>
<tr>
<td><strong>relationships.space</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to the space containing the route. Routes can only be mapped to destinations in that space</td>
</tr>
<tr>
<td><strong>relationships.domain</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to the domain of the route</td>
</tr>
<tr>
<td><strong>options</strong></td>
<td><a href="#the-route-options-object"><em>route option object</em></a></td>
<td>Options applied to the route</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the route</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the route</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="the-destination-object">The destination object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Destination object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"89323d4e-2e84-43e7-83e9-adbf50a20c0e"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
  </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http2"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>A destination represents the relationship between a route and a resource that can serve traffic (for example, the <code class="prettyprint">web</code> process of an application).</p>

<p>When a route has destinations, that route will direct traffic to the processes represented by those destinations.</p>

<p>If a destination is created with a port specified, the route will direct traffic to that port on the process. A destination with port 9000 and process type <code class="prettyprint">api</code> means traffic will be directed to the <code class="prettyprint">api</code> process running on container port 9000.</p>

<p>Note that when using a custom port, the app process must be listening on the specified port for the mapping to work. Otherwise, visiting the route will result in a 404 error.</p>

<p>If a destination does not specify a port, the default port depends on the app lifecycle type. For buildpack apps, traffic will be directed to port 8080. For Docker apps, the first port specified in the Dockerfile will be used.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the destination</td>
</tr>
<tr>
<td><strong>app.guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the app to route traffic to</td>
</tr>
<tr>
<td><strong>app.process.type</strong></td>
<td><em>string</em></td>
<td>Type of the process belonging to the app to route traffic to</td>
</tr>
<tr>
<td><strong>port</strong></td>
<td><em>integer</em></td>
<td>Port on the destination process to route traffic to</td>
</tr>
<tr>
<td><strong>weight</strong> (<em>deprecated</em>)</td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Percentage of traffic which will be routed to this destination. <em><strong>DEPRECATED:</strong> this feature was only available via the experimental Service Mesh routing plane. It is no longer supported.</em></td>
</tr>
<tr>
<td><strong>protocol</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Protocol to use for this destination. Valid protocols are <code class="prettyprint">http1</code> or <code class="prettyprint">http2</code> if route protocol is <code class="prettyprint">http</code>, <code class="prettyprint">tcp</code> if route protocol is <code class="prettyprint">tcp</code>. A <code class="prettyprint">null</code> value will set it either <code class="prettyprint">http1</code> or <code class="prettyprint">tcp</code> based on the route protocol; <em>this feature is only available if you turn it on in routing release</em></td>
</tr>
</tbody></table>
<h3 id="the-route-options-object">The route options object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Route-Options object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"loadbalancing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"round-robin"</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>loadbalancing</strong></td>
<td><em>string</em></td>
<td>The load-balancer associated with this route. Valid values are &lsquo;round-robin&rsquo; and &lsquo;least-connection&rsquo;</td>
</tr>
</tbody></table>
<h3 id="create-a-route">Create a route</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/routes"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "host": "a-hostname",
    "path": "/some_path",
    "port": 6666,
    "relationships": {
      "domain": {
        "data": { "guid": "domain-guid" }
      },
      "space": {
        "data": { "guid": "space-guid" }
      }
    },
    "options": {
        "loadbalancing": "round-robin"
    }
    "metadata": {
      "labels": { "key": "value" },
      "annotations": { "note": "detailed information"}
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">6666</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-10T17:17:48Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-10T17:17:48Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a-hostname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/some_path"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a-hostname.a-domain.com/some_path"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"385bf117-17f5-4689-8c5c-08c6cc821fed"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0a6636b5-7fc4-44d8-8752-0db3e40b35a5"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27e96a3b-5bcf-49ed-8048-351e0be23e6f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f61e59fa-2121-4217-8c7b-15bfd75baf25"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="w">
    </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
  </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"loadbalancing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"round-robin"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"key"</span><span class="p">:</span><span class="s2">"value"</span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"note"</span><span class="p">:</span><span class="s2">"detailed information"</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885a8cb3-c07b-4856-b448-eeb10bf36236"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b5f3633-194c-42d2-9408-972366617e0e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885a8cb3-c07b-4856-b448-eeb10bf36236"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/0b5f3633-194c-42d2-9408-972366617e0e"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31/destinations"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/routes</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>relationships.space</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to the space containing the route; routes can only be mapped to destinations in that space</td>
</tr>
<tr>
<td><strong>relationships.domain</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to the domain of the route</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>host</strong></td>
<td><em>string</em></td>
<td>The host component for the route; not compatible with routes specifying the <code class="prettyprint">tcp</code> protocol</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td><em>string</em></td>
<td>The path component for the route; should begin with a <code class="prettyprint">/</code> and not compatible with routes specifying the <code class="prettyprint">tcp</code> protocol</td>
</tr>
<tr>
<td><strong>port</strong></td>
<td><em>integer</em></td>
<td>The port the route will listen on; only compatible with routes leveraging a domain that supports the <code class="prettyprint">tcp</code> protocol. For <code class="prettyprint">tcp</code> domains, a port will be randomly assigned if not specified</td>
</tr>
<tr>
<td><strong>options</strong></td>
<td><a href="#the-route-options-object"><em>route option object</em></a></td>
<td>Options applied to the route</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the route</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the route</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="get-a-route">Get a route</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/routes/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">6666</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-10T17:17:48Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-10T17:17:48Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a-hostname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/some_path"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a-hostname.a-domain.com/some_path"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"385bf117-17f5-4689-8c5c-08c6cc821fed"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0a6636b5-7fc4-44d8-8752-0db3e40b35a5"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27e96a3b-5bcf-49ed-8048-351e0be23e6f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f61e59fa-2121-4217-8c7b-15bfd75baf25"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="w">
    </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
  </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"loadbalancing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"round-robin"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885a8cb3-c07b-4856-b448-eeb10bf36236"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b5f3633-194c-42d2-9408-972366617e0e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885a8cb3-c07b-4856-b448-eeb10bf36236"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/0b5f3633-194c-42d2-9408-972366617e0e"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31/destinations"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/routes/:guid</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>include</strong></td>
<td><em>string</em></td>
<td>Optionally include additional related resources in the response <br>Valid values are <code class="prettyprint">domain</code>, <code class="prettyprint">space.organization</code>, <code class="prettyprint">space</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-routes">List routes</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/routes"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-10T17:17:48Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-10T17:17:48Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a-hostname"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/some_path"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a-hostname.a-domain.com/some_path"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"385bf117-17f5-4689-8c5c-08c6cc821fed"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0a6636b5-7fc4-44d8-8752-0db3e40b35a5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
          </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http1"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27e96a3b-5bcf-49ed-8048-351e0be23e6f"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f61e59fa-2121-4217-8c7b-15bfd75baf25"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
          </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http1"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"loadbalancing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"round-robin"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885a8cb3-c07b-4856-b448-eeb10bf36236"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b5f3633-194c-42d2-9408-972366617e0e"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885a8cb3-c07b-4856-b448-eeb10bf36236"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/0b5f3633-194c-42d2-9408-972366617e0e"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31/destinations"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all routes the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/routes</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>app_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of app guids to filter by</td>
</tr>
<tr>
<td><strong>domain_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of domain guids to filter by</td>
</tr>
<tr>
<td><strong>hosts</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of hostnames to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>paths</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of paths to filter by (e.g. <code class="prettyprint">/path1,/path2</code>)</td>
</tr>
<tr>
<td><strong>ports</strong></td>
<td><em>list of integers</em></td>
<td>Comma-delimited list of ports to filter by (e.g. <code class="prettyprint">3306,5432</code>)</td>
</tr>
<tr>
<td><strong>space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space guids to filter by</td>
</tr>
<tr>
<td><strong>service_instance_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service instance guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>include</strong></td>
<td><em>string</em></td>
<td>Optionally include a list of unique related resources in the response <br>Valid values are <code class="prettyprint">domain</code>, <code class="prettyprint">space.organization</code>, <code class="prettyprint">space</code></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-routes-for-an-app">List routes for an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/routes"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/routes?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/routes?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/routes?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-10T17:17:48Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-10T17:17:48Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a-hostname"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/some_path"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a-hostname.a-domain.com/some_path"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"385bf117-17f5-4689-8c5c-08c6cc821fed"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0a6636b5-7fc4-44d8-8752-0db3e40b35a5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
          </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http1"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27e96a3b-5bcf-49ed-8048-351e0be23e6f"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f61e59fa-2121-4217-8c7b-15bfd75baf25"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
          </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http1"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"loadbalancing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"round-robin"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885a8cb3-c07b-4856-b448-eeb10bf36236"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b5f3633-194c-42d2-9408-972366617e0e"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885a8cb3-c07b-4856-b448-eeb10bf36236"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/0b5f3633-194c-42d2-9408-972366617e0e"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31/destinations"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all routes that have <a href="#the-destination-object">destinations</a> that point to the given app.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/routes</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>domain_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of domain guids to filter by</td>
</tr>
<tr>
<td><strong>hosts</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of hostnames to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>paths</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of paths to filter by (e.g. <code class="prettyprint">/path1,/path2</code>)</td>
</tr>
<tr>
<td><strong>ports</strong></td>
<td><em>list of integers</em></td>
<td>Comma-delimited list of ports to filter by (e.g. <code class="prettyprint">3306,5432</code>)</td>
</tr>
<tr>
<td><strong>space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="update-a-route">Update a route</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/routes/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "options": {
      "loadbalancing": "round-robin"
    }
    "metadata": {
      "labels": {"key": "value"},
      "annotations": {"note": "detailed information"}
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">6666</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-10T17:17:48Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-10T17:17:48Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a-hostname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/some_path"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a-hostname.a-domain.com/some_path"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"385bf117-17f5-4689-8c5c-08c6cc821fed"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0a6636b5-7fc4-44d8-8752-0db3e40b35a5"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27e96a3b-5bcf-49ed-8048-351e0be23e6f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f61e59fa-2121-4217-8c7b-15bfd75baf25"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="w">
    </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
  </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"loadbalancing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"round-robin"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"key"</span><span class="p">:</span><span class="s2">"value"</span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"note"</span><span class="p">:</span><span class="s2">"detailed information"</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885a8cb3-c07b-4856-b448-eeb10bf36236"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b5f3633-194c-42d2-9408-972366617e0e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885a8cb3-c07b-4856-b448-eeb10bf36236"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/domains/0b5f3633-194c-42d2-9408-972366617e0e"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31/destinations"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/routes/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>options</strong></td>
<td><a href="#the-route-options-object"><em>route option object</em></a></td>
<td>Options applied to the route</td>
<td></td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the route</td>
<td></td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the route</td>
<td></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
</tr>
</thead><tbody>
<tr>
</tr>
<tr>
</tr>
<tr>
</tr>
</tbody></table>
<h3 id="delete-a-route">Delete a route</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/routes/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/routes/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="check-reserved-routes-for-a-domain">Check reserved routes for a domain</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/domains/[guid]/route_reservations"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"matching_route"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Check if a specific route for a domain exists, regardless of the user&rsquo;s visibility for the route in case the route
belongs to a space the user does not belong to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/domains/:guid/route_reservations</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>host</strong></td>
<td><em>string</em></td>
<td>Hostname to filter by; defaults to empty string if not provided and only applicable to <code class="prettyprint">http</code> routes</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td><em>string</em></td>
<td>Path to filter by; defaults to empty string if not provided and only applicable to <code class="prettyprint">http</code> routes</td>
</tr>
<tr>
<td><strong>port</strong></td>
<td><em>integer</em></td>
<td>Port to filter by; only applicable to <code class="prettyprint">tcp</code> routes and required for <code class="prettyprint">tcp</code> routes</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td></td>
</tr>
<tr>
<td>Org Auditor</td>
<td></td>
</tr>
<tr>
<td>Org Billing Manager</td>
<td>Can only check if routes exist for a domain without an organization relationship</td>
</tr>
<tr>
<td>Org Manager</td>
<td></td>
</tr>
<tr>
<td>Space Auditor</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
<tr>
<td>Space Manager</td>
<td></td>
</tr>
<tr>
<td>Space Supporter</td>
<td></td>
</tr>
</tbody></table>
<h3 id="lists-shared-spaces-relationship-experimental">Lists shared spaces relationship (experimental)</h3>

<p>Lists the spaces that the route has been shared to.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/routes/[guid]/relationships/shared_spaces"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-one-guid"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-two-guid"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="s2">"http://api.example.com/v3/routes/[guid]/relationships/shared_spaces"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/routes/:guid/relationships/shared_spaces</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="share-a-route-with-other-spaces-experimental">Share a route with other spaces (experimental)</h3>

<p>This endpoint shares the route with the specified spaces. This allows users with read and write access in both the route&rsquo;s space and a shared space to bind a route to an app in the shared space. In order to share into a space the requesting user must have write permission in the target space.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/routes/[guid]/relationships/shared_spaces"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "data": [
      { "guid": "space-one-guid" },
      { "guid": "space-two-guid" }
    ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-one-guid"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-two-guid"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="s2">"http://api.example.com/v3/routes/[guid]/relationships/shared_spaces"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/routes/:guid/relationships/shared_spaces</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>Shared space relationships; each space will have this route shared to it</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="unshare-a-route-that-was-shared-with-another-space-experimental">Unshare a route that was shared with another space (experimental)</h3>

<p>Unshares a route that was shared with another space.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/routes/:guid/relationships/shared_spaces/[space_guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/routes/:guid/relationships/shared_spaces/:space_guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="transfer-ownership-experimental">Transfer ownership (experimental)</h3>

<p>Transfers a the ownership of a route to a another space.  Users must have write access for both spaces to perform this action.
The original owning space will still retain access to the route as a <a href="#share-a-route-with-other-spaces-experimental">shared space</a>.
To completely remove a space from a route, users will have to use <a href="#unshare-a-route-that-was-shared-with-another-space-experimental">unshare route</a>.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/routes/:route-guid/relationships/space"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span>
  <span class="nt">-d</span> <span class="s1">'{ "data": { "guid": "space-guid"} }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/routes/:route-guid/relationships/space</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="list-destinations-for-a-route">List destinations for a route</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/routes/[guid]/destinations"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"89323d4e-2e84-43e7-83e9-adbf50a20c0e"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
        </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fbef10a2-8ee7-11e9-aa2d-abeeaf7b83c5"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01856e12-8ee8-11e9-98a5-bb397dbc818f"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">9000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http1"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31/destinations"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all destinations associated with a route.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/routes/:guid/destinations</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of destination guids to filter by</td>
</tr>
<tr>
<td><strong>app_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of app guids to filter by</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="insert-destinations-for-a-route">Insert destinations for a route</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/routes/[guid]/destinations"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span>
  <span class="nt">-d</span> <span class="s1">'{
    "destinations": [
      {
        "app": {
          "guid": "1cb006ee-fb05-47e1-b541-c34179ddc446"
        }
      },
      {
        "app": {
          "guid": "01856e12-8ee8-11e9-98a5-bb397dbc818f",
          "process": {
            "type": "api"
          }
        },
        "port": 9000,
        "protocol": "http1"
      }
    ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"89323d4e-2e84-43e7-83e9-adbf50a20c0e"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
        </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fbef10a2-8ee7-11e9-aa2d-abeeaf7b83c5"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01856e12-8ee8-11e9-98a5-bb397dbc818f"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">9000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http1"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31/destinations"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Add one or more destinations to a route, preserving any existing destinations.</p>

<p>Weighted destinations (deprecated) cannot be added with this endpoint.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/routes/:guid/destinations</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>destinations</strong></td>
<td>array of <a href="#the-destination-object"><em>destination objects</em></a></td>
<td>List of destinations to add to route; destinations without <code class="prettyprint">process.type</code> specified will get process type <code class="prettyprint">&quot;web&quot;</code> by default</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="replace-all-destinations-for-a-route">Replace all destinations for a route</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/routes/[guid]/destinations"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
  <span class="nt">-d</span> <span class="s1">'{
    "destinations": [
      {
        "app": {
          "guid": "1cb006ee-fb05-47e1-b541-c34179ddc446"
        },
        "weight": 61
      },
      {
        "app": {
          "guid": "01856e12-8ee8-11e9-98a5-bb397dbc818f",
          "process": {
            "type": "api"
          }
        },
        "weight": 39,
        "port": 9000,
        "protocol": "http1"
      }
    ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"89323d4e-2e84-43e7-83e9-adbf50a20c0e"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">61</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fbef10a2-8ee7-11e9-aa2d-abeeaf7b83c5"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01856e12-8ee8-11e9-98a5-bb397dbc818f"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">39</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">9000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31/destinations"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Replaces all destinations for a route, removing any destinations not included in the provided list.</p>

<p>Weighted destinations are <strong>deprecated</strong>. Development of the experimental Istio Service Mesh routing layer
was discontinued in 2020 and is no longer supported by the platform. Specifying a <code class="prettyprint">weight</code> for a destination will take no effect.</p>

<p>If weighted destinations are provided, however, all destinations provided here must have a <code class="prettyprint">weight</code> specified, and all weights
for this route must sum to 100. If not, all provided destinations must not have a <code class="prettyprint">weight</code>. Mixing weighted
and unweighted destinations for a route is not allowed.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/routes/:guid/destinations</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>destinations</strong></td>
<td>array of <a href="#the-destination-object"><em>destination objects</em></a></td>
<td>List of destinations use for route. Destinations without <code class="prettyprint">process.type</code> specified will get process type <code class="prettyprint">&quot;web&quot;</code> by default</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="update-a-destination-protocol-for-a-route">Update a destination protocol for a route</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/routes/[guid]/destinations/[destination_guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
  <span class="nt">-d</span> <span class="s1">'{"protocol": "http2"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"89323d4e-2e84-43e7-83e9-adbf50a20c0e"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"process"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">61</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8080</span><span class="p">,</span><span class="w">
  </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31/destinations"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/cbad697f-cac1-48f4-9017-ac08f39dfb31"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint updates the protocol of a route destination (app, port and weight cannot be updated)</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/routes/:guid/destinations/:destination_guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>protocol</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Protocol the destination will use. Valid protocols are <code class="prettyprint">http1</code> or <code class="prettyprint">http2</code> if route protocol is <code class="prettyprint">http</code>, <code class="prettyprint">tcp</code> if route protocol is <code class="prettyprint">tcp</code>. A <code class="prettyprint">null</code> value will set it to either <code class="prettyprint">http1</code> or <code class="prettyprint">tcp</code> based on the route protocol;</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="remove-destination-for-a-route">Remove destination for a route</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/routes/[guid]/destinations/[destination_guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div>
<p>Remove a destination from a route.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/routes/:guid/destinations/:destination_guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="delete-unmapped-routes-for-a-space">Delete unmapped routes for a space</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces/[guid]/routes?unmapped=true"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE<span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<p>Deletes all routes in a space that are not mapped to any applications and not bound to any service instances.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/spaces/:guid/routes?unmapped=true</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>

<p><strong>Note</strong>: <code class="prettyprint">unmapped=true</code> is a required query parameter; always include it.</p>
<h2 id="security-groups">Security Groups</h2>

<p>Security groups are collections of egress traffic rules that can be applied to the staging or running state of applications.</p>

<p>Security groups can either be applied globally or at the space-level.</p>

<p>Security groups can only allow (whitelist) traffic. They cannot be used to disallow (blacklist) traffic.</p>
<h3 id="the-security-group-object">The security group object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Security Group object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b85a788e-671f-4549-814d-e34cdb2f539a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-group0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"globally_enabled"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"running"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"443,80,8080"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"icmp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
      </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow ping requests to private services"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1.1.1,2.2.2.2/24,10.0.0.0-10.0.0.255"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80,443,8080"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Only valid if cc.security_groups.enable_comma_delimited_destinations is true"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"staging_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid-1"</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid-2"</span><span class="w"> </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"running_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups/b85a788e-671f-4549-814d-e34cdb2f539a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the security group</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the security group</td>
</tr>
<tr>
<td><strong>rules</strong></td>
<td><em>array of <a href="#the-rule-object">rule objects</a></em></td>
<td>Rules that will be applied by this security group</td>
</tr>
<tr>
<td><strong>globally_enabled</strong></td>
<td><em>object</em></td>
<td>Object that controls if the group is applied globally to the lifecycle of all applications</td>
</tr>
<tr>
<td><strong>globally_enabled.running</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether the group should be applied globally to all running applications</td>
</tr>
<tr>
<td><strong>globally_enabled.staging</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether the group should be applied globally to all staging applications</td>
</tr>
<tr>
<td><strong>relationships.running_spaces</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>A relationship to the spaces where the security_group is applied to applications during runtime</td>
</tr>
<tr>
<td><strong>relationships.staging_spaces</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>A relationship to the spaces where the security_group is applied to applications during staging</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>

<h4 id="the-rule-object">The rule object</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>protocol</strong></td>
<td><em>string</em></td>
<td>Protocol type Valid values are <code class="prettyprint">tcp</code>, <code class="prettyprint">udp</code>, <code class="prettyprint">icmp</code>, or <code class="prettyprint">all</code></td>
<td>yes</td>
<td>N/A</td>
</tr>
<tr>
<td><strong>destination</strong></td>
<td><em>string</em></td>
<td>The destination where the rule applies. Must be a singular Valid CIDR, IP address, or IP address range unless <code class="prettyprint">cc.security_groups.enable_comma_delimited_destinations</code> is enabled. Then, the destination can be a comma-delimited string of CIDRs, IP addresses, or IP address ranges. Octets within destinations cannot contain leading zeros; eg. <code class="prettyprint">10.0.0.0/24</code> is valid, but <code class="prettyprint">010.00.000.0/24</code> is <em>not</em>.</td>
<td>yes</td>
<td>N/A</td>
</tr>
<tr>
<td><strong>ports</strong></td>
<td><em>string</em></td>
<td>Ports that the rule applies to; can be a single port (<code class="prettyprint">9000</code>), a comma-separated list (<code class="prettyprint">9000,9001</code>), or a range (<code class="prettyprint">9000-9200</code>)</td>
<td>no</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>type</strong></td>
<td><em>integer</em></td>
<td><a href="https://www.iana.org/assignments/icmp-parameters/icmp-parameters.xhtml#icmp-parameters-types">Type</a> required for ICMP protocol; valid values are between -1 and 255 (inclusive), where -1 allows all</td>
<td>no</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>code</strong></td>
<td><em>integer</em></td>
<td><a href="https://www.iana.org/assignments/icmp-parameters/icmp-parameters.xhtml#icmp-parameters-codes">Code</a> required for ICMP protocol; valid values are between -1 and 255 (inclusive), where -1 allows all</td>
<td>no</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>description</strong></td>
<td><em>string</em></td>
<td>A description for the rule; this field is limited to 16MB</td>
<td>no</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>log</strong></td>
<td><em>boolean</em></td>
<td>Enable logging for rule, only valid for tcp rules</td>
<td>no</td>
<td><code class="prettyprint">null</code></td>
</tr>
</tbody></table>
<h3 id="create-a-security-group">Create a security group</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/security_groups"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
  "name": "my-group0",
  "rules": [
    {
      "protocol": "tcp",
      "destination": "10.10.10.0/24",
      "ports": "443,80,8080"
    },
    {
      "protocol": "icmp",
      "destination": "10.10.10.0/24",
      "type": 8,
      "code": 0,
      "description": "Allow ping requests to private services"
    }
  ]
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b85a788e-671f-4549-814d-e34cdb2f539a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-group0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"globally_enabled"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"running"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"443,80,8080"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"icmp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
      </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow ping requests to private services"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1.1.1,2.2.2.2/24,10.0.0.0-10.0.0.255"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80,443,8080"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Only valid if cc.security_groups.enable_comma_delimited_destinations is true"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"staging_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid-1"</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid-2"</span><span class="w"> </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"running_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups/b85a788e-671f-4549-814d-e34cdb2f539a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/security_groups</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the security group</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>globally_enabled</strong></td>
<td><em>object</em></td>
<td>Object that controls if the group is applied globally to the lifecycle of all applications</td>
</tr>
<tr>
<td><strong>globally_enabled.running</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether the group should be applied globally to all running applications</td>
</tr>
<tr>
<td><strong>globally_enabled.staging</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether the group should be applied globally to all staging applications</td>
</tr>
<tr>
<td><strong>rules</strong></td>
<td><em>array of <a href="#the-rule-object">rule objects</a></em></td>
<td>Rules that will be applied by this security group</td>
</tr>
<tr>
<td><strong>relationships.staging_spaces</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>A relationship to the spaces where the security group is applied to applications during staging</td>
</tr>
<tr>
<td><strong>relationships.running_spaces</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>A relationship to the spaces where the security group is applied to applications during runtime</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="get-a-security-group">Get a security group</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/security_groups/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b85a788e-671f-4549-814d-e34cdb2f539a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-group0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"globally_enabled"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"running"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"443,80,8080"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"icmp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
      </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow ping requests to private services"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1.1.1,2.2.2.2/24,10.0.0.0-10.0.0.255"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80,443,8080"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Only valid if cc.security_groups.enable_comma_delimited_destinations is true"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"staging_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid-1"</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid-2"</span><span class="w"> </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"running_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups/b85a788e-671f-4549-814d-e34cdb2f539a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/security_groups/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td>Can see all security groups</td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td>Can see all security groups</td>
</tr>
<tr>
<td>Global Auditor</td>
<td>Can see all security groups</td>
</tr>
<tr>
<td>Org Auditor</td>
<td>Can see globally enabled security groups</td>
</tr>
<tr>
<td>Org Billing Manager</td>
<td>Can see globally enabled security groups</td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can see globally enabled security groups or groups associated with a space they can see</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Can see globally enabled security groups or groups associated with a space they can see</td>
</tr>
<tr>
<td>Space Developer</td>
<td>Can see globally enabled security groups or groups associated with a space they can see</td>
</tr>
<tr>
<td>Space Manager</td>
<td>Can see globally enabled security groups or groups associated with a space they can see</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Can see globally enabled security groups or groups associated with a space they can see</td>
</tr>
</tbody></table>
<h3 id="list-security-groups">List security groups</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/security_groups"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b85a788e-671f-4549-814d-e34cdb2f539a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-group0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"globally_enabled"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"running"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"ports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"443,80,8080"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"icmp"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
          </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow ping requests to private services"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"staging_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid-1"</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid-2"</span><span class="w"> </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"running_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups/b85a788e-671f-4549-814d-e34cdb2f539a"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a89a788e-671f-4549-814d-e34c1b2f533a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-group1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"globally_enabled"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"running"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"staging_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"running_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups/a89a788e-671f-4549-814d-e34c1b2f533a"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/security_groups</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of security group guids to filter by</td>
</tr>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of security group names to filter by</td>
</tr>
<tr>
<td><strong>globally_enabled_running</strong></td>
<td><em>boolean</em></td>
<td>If true, only include the security groups that are enabled for running</td>
</tr>
<tr>
<td><strong>globally_enabled_staging</strong></td>
<td><em>boolean</em></td>
<td>If true, only include the security groups that are enabled for staging</td>
</tr>
<tr>
<td><strong>running_space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space guids to filter by</td>
</tr>
<tr>
<td><strong>staging_space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td>Can see all security groups</td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td>Can see all security groups</td>
</tr>
<tr>
<td>Global Auditor</td>
<td>Can see all security groups</td>
</tr>
<tr>
<td>Org Auditor</td>
<td>Can see globally–enabled security groups</td>
</tr>
<tr>
<td>Org Billing Manager</td>
<td>Can see globally–enabled security groups</td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can see globally–enabled security groups or groups associated with a space they can see</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Can see globally–enabled security groups or groups associated with a space they can see</td>
</tr>
<tr>
<td>Space Developer</td>
<td>Can see globally–enabled security groups or groups associated with a space they can see</td>
</tr>
<tr>
<td>Space Manager</td>
<td>Can see globally–enabled security groups or groups associated with a space they can see</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Can see globally–enabled security groups or groups associated with a space they can see</td>
</tr>
</tbody></table>
<h3 id="update-a-security-group">Update a security group</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/security_groups/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
  "name": "my-group0",
  "globally_enabled": {
    "running": true
  }
  "rules": [
    {
      "protocol": "tcp",
      "destination": "10.10.10.0/24",
      "ports": "443,80,8080"
    },
    {
      "protocol": "icmp",
      "destination": "10.10.10.0/24",
      "type": 8,
      "code": 0,
      "description": "Allow ping requests to private services"
    }
  ]
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b85a788e-671f-4549-814d-e34cdb2f539a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-group0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"globally_enabled"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"running"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"443,80,8080"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"icmp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
      </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow ping requests to private services"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1.1.1,2.2.2.2/24,10.0.0.0-10.0.0.255"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80,443,8080"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Only valid if cc.security_groups.enable_comma_delimited_destinations is true"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"staging_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid-1"</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid-2"</span><span class="w"> </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"running_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups/b85a788e-671f-4549-814d-e34cdb2f539a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint will only update the parameters specified in the request body. Any unspecified parameters will retain their existing values.</p>

<p>Updates to the <code class="prettyprint">rules</code> parameter will fully replace the current set of <code class="prettyprint">rules</code> for the security group.</p>

<p>Updates to the <code class="prettyprint">globally_enabled</code> parameter will be merged with the existing configuration. For example, an update to the <code class="prettyprint">globally_enabled.running</code> parameter will not affect the <code class="prettyprint">globally_enabled.staging</code> configuration.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/security_groups/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the security group</td>
</tr>
<tr>
<td><strong>globally_enabled</strong></td>
<td><em>object</em></td>
<td>Object that controls if the group is applied globally to the lifecycle of all applications</td>
</tr>
<tr>
<td><strong>globally_enabled.running</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether the group should be applied globally to all running applications</td>
</tr>
<tr>
<td><strong>globally_enabled.staging</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether the group should be applied globally to all staging applications</td>
</tr>
<tr>
<td><strong>rules</strong></td>
<td><em>array of <a href="#the-rule-object">rule objects</a></em></td>
<td>Rules that will be applied by this security group</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="delete-a-security-group">Delete a security group</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/security_groups/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>

</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/security_groups/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="bind-a-running-security-group-to-spaces">Bind a running security group to spaces</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/security_groups/[guid]/relationships/running_spaces"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
  "data": [{ "guid": "space-guid1" }, { "guid": "space-guid2" }]
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid1"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid2"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"previous-space-guid"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups/b85a788e-671f-4549-814d-e34cdb2f539a/relationships/running_spaces"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint binds one or more spaces to a security group with the running lifecycle.</p>

<p>Running app containers within these spaces will inherit the rules specified by this security group.</p>

<p>Apps within these spaces must be restarted for these changes to take effect.</p>

<p>Unless a security group is globally-enabled, an admin must add it to a space for it to be visible for the org and space managers. Once it&rsquo;s visible, org and space managers can add it to additional spaces.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/security_groups/:guid/relationships/running_spaces</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>Space guids that will be bound to the security group</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Manager</td>
<td>Can bind visible security groups to their spaces (visible groups are globally–enabled security groups or groups associated with a space they can see)</td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can bind visible security groups to their organizations&rsquo; spaces (visible groups are globally–enabled security groups or groups associated with a space they can see)</td>
</tr>
</tbody></table>
<h3 id="bind-a-staging-security-group-to-spaces">Bind a staging security group to spaces</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/security_groups/[guid]/relationships/staging_spaces"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
  "data": [{ "guid": "space-guid1" }, { "guid": "space-guid2" }]
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid1"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid2"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"previous-space-guid"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups/b85a788e-671f-4549-814d-e34cdb2f539a/relationships/staging_spaces"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint binds one or more spaces to a security group with the staging lifecycle.</p>

<p>Staging app containers within these spaces will inherit the rules specified by this security group.</p>

<p>Apps within these spaces must be restaged for these changes to take effect.</p>

<p>Unless a security group is globally-enabled, an admin must add it to a space for it to be visible for the org and space managers. Once it&rsquo;s visible, org and space managers can add it to additional spaces.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/security_groups/:guid/relationships/staging_spaces</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>Space guids that will be bound to the security group</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Manager</td>
<td>Can bind visible security groups to their spaces (visible groups are globally–enabled security groups or groups associated with a space they can see)</td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can bind visible security groups to their organizations&rsquo; spaces (visible groups are globally–enabled security groups or groups associated with a space they can see)</td>
</tr>
</tbody></table>
<h3 id="unbind-a-running-security-group-from-a-space">Unbind a running security group from a space</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/security_groups/[guid]/relationships/running_spaces/[space_guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
</code></pre></div>
<p>This endpoint removes a space from a security group with the running lifecycle.</p>

<p>Apps within this space must be restarted for these changes to take effect.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/security_groups/:guid/relationships/running_spaces/:space_guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Manager</td>
<td>Can unbind visible security groups from their spaces (visible groups are globally–enabled security groups or groups associated with a space they can see)</td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can unbind visible security groups from their organizations&rsquo; spaces (visible groups are globally–enabled security groups or groups associated with a space they can see)</td>
</tr>
</tbody></table>
<h3 id="unbind-a-staging-security-group-from-a-space">Unbind a staging security group from a space</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/security_groups/[guid]/relationships/staging_spaces/[space_guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
</code></pre></div>
<p>This endpoint removes a space from a security group with the staging lifecycle.</p>

<p>Apps within this space must be restaged for these changes to take effect.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/security_groups/:guid/relationships/staging_spaces/:space_guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Manager</td>
<td>Can unbind visible security groups from their spaces (visible groups are globally–enabled security groups or groups associated with a space they can see)</td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can unbind visible security groups from their organizations&rsquo; spaces (visible groups are globally–enabled security groups or groups associated with a space they can see)</td>
</tr>
</tbody></table>
<h3 id="list-running-security-groups-for-a-space">List running security groups for a space</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces/[guid]/running_security_groups"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/c5048979-53b9-4d2a-9fca-78e6bc07c041/running_security_groups?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/c5048979-53b9-4d2a-9fca-78e6bc07c041/running_security_groups?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b85a788e-671f-4549-814d-e34cdb2f539a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-group0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"globally_enabled"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"running"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"ports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"443,80,8080"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"icmp"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
          </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow ping requests to private services"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"staging_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"running_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid-1"</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid-2"</span><span class="w"> </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups/b85a788e-671f-4549-814d-e34cdb2f539a"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a89a788e-671f-4549-814d-e34c1b2f533a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-group1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"globally_enabled"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"running"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"staging_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"running_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups/a89a788e-671f-4549-814d-e34c1b2f533a"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint returns security groups that are enabled for running globally or at the space level for the given space.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/spaces/:guid/running_security_groups</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of security group guids to filter by</td>
</tr>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of security group names to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td>Can see all security groups</td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td>Can see all security groups</td>
</tr>
<tr>
<td>Global Auditor</td>
<td>Can see all security groups</td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can see globally-enabled security groups and groups associated with spaces in their managed organizations</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Can see globally-enabled security groups and groups associated with spaces where they have this role</td>
</tr>
<tr>
<td>Space Developer</td>
<td>Can see globally-enabled security groups and groups associated with spaces where they have this role</td>
</tr>
<tr>
<td>Space Manager</td>
<td>Can see globally-enabled security groups and groups associated with spaces where they have this role</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Can see globally-enabled security groups and groups associated with spaces where they have this role</td>
</tr>
</tbody></table>
<h3 id="list-staging-security-groups-for-a-space">List staging security groups for a space</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces/[guid]/staging_security_groups"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/c5048979-53b9-4d2a-9fca-78e6bc07c041/staging_security_groups?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/c5048979-53b9-4d2a-9fca-78e6bc07c041/staging_security_groups?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b85a788e-671f-4549-814d-e34cdb2f539a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-group0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"globally_enabled"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"running"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"ports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"443,80,8080"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"icmp"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
          </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow ping requests to private services"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"staging_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid-1"</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid-2"</span><span class="w"> </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"running_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups/b85a788e-671f-4549-814d-e34cdb2f539a"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a89a788e-671f-4549-814d-e34c1b2f533a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-02-20T17:42:08Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-group1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"globally_enabled"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"running"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"staging_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"running_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/security_groups/a89a788e-671f-4549-814d-e34c1b2f533a"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint returns security groups that are enabled for staging globally or at the space level for the given space.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/spaces/:guid/staging_security_groups</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of security group guids to filter by</td>
</tr>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of security group names to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td>Can see all security groups</td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td>Can see all security groups</td>
</tr>
<tr>
<td>Global Auditor</td>
<td>Can see all security groups</td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can see globally-enabled security groups and groups associated with spaces in their managed organizations</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Can see globally-enabled security groups and groups associated with spaces where they have this role</td>
</tr>
<tr>
<td>Space Developer</td>
<td>Can see globally-enabled security groups and groups associated with spaces where they have this role</td>
</tr>
<tr>
<td>Space Manager</td>
<td>Can see globally-enabled security groups and groups associated with spaces where they have this role</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Can see globally-enabled security groups and groups associated with spaces where they have this role</td>
</tr>
</tbody></table>
<h2 id="service-brokers">Service Brokers</h2>

<p>Service brokers manage the lifecycle of services. On behalf of users, Cloud Controller will interact with service brokers to provision, get access to and manage access to the service offerings and plans they offer.</p>

<p>Admins can create and manage service brokers that are globally available, i.e., the service broker and its associated resources (service offerings and plans) can be made available to all users.</p>

<p>Space Developers can create and manage space-scoped service brokers. A space-scoped broker and its associated resources will only be available in the space the service broker was created.</p>
<h3 id="the-service-broker-object">The service broker object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Service Broker object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_service_broker"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.service-broker.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dev"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_brokers/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_offerings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings?service_broker_guids=dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the service broker</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the service broker</td>
</tr>
<tr>
<td><strong>url</strong></td>
<td><em>string</em></td>
<td>URL of the service broker</td>
</tr>
<tr>
<td><strong>relationships.space</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The space the service broker is restricted to; omitted for globally available service brokers</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service broker</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations added to the service broker</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="create-a-service-broker">Create a service broker</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_brokers"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "my_service_broker",
    "url": "https://example.service-broker.com",
    "authentication": {
      "type": "basic",
      "credentials": {
        "username": "us3rn4me",
        "password": "p4ssw0rd"
      }
    },
    "relationships": {
      "space": {
        "data": {
          "guid": "2f35885d-0c9d-4423-83ad-fd05066f8576"
        }
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/af5c57f6-8769-41fa-a499-2c84ed896788</span>
</code></pre></div>
<p>This endpoint creates a new service broker and a job to synchronize the service offerings and service plans with those in the broker&rsquo;s catalog.
The <code class="prettyprint">Location</code> header refers to the created job which syncs the broker with the catalog. See <a href="#service-broker-jobs"><em>Service broker jobs</em></a> for more information and limitations.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/service_brokers</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the service broker</td>
</tr>
<tr>
<td><strong>url</strong></td>
<td><em>string</em></td>
<td>URL of the service broker</td>
</tr>
<tr>
<td><strong>authentication</strong></td>
<td><a href="#the-authentication-object"><em>authentication</em></a></td>
<td>Credentials used to authenticate against the service broker</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>relationships.space</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>If set, restricts the service broker to the specified space</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service broker</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service broker</td>
</tr>
</tbody></table>

<h4 id="the-authentication-object">The authentication object</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Type of the authentication mechanisms that can be used. Valid value is <code class="prettyprint">basic</code>.</td>
</tr>
<tr>
<td><strong>credentials</strong></td>
<td><em>object</em></td>
<td>Credentials for given authentication type.</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight plaintext"><code>Example basic authentication
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"secretpassw0rd"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h5 id="basic-authentication-credentials">Basic authentication credentials</h5>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>username</strong></td>
<td><em>string</em></td>
<td>The username with which to authenticate against the service broker.</td>
</tr>
<tr>
<td><strong>password</strong></td>
<td><em>string</em></td>
<td>The password with which to authenticate against the service broker.</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer*</td>
</tr>
</tbody></table>

<p>*Space Developers can only create space-scoped brokers. Space-scoped brokers can only be created when the <code class="prettyprint">space_scoped_private_broker_creation</code> feature flag is <code class="prettyprint">true</code>.</p>
<h3 id="get-a-service-broker">Get a service broker</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_brokers/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_service_broker"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.service-broker.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dev"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_brokers/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_offerings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings?service_broker_guids=dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the service broker by GUID.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_brokers/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td>Only space-scoped brokers</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Only space-scoped brokers</td>
</tr>
</tbody></table>
<h3 id="list-service-brokers">List service brokers</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_brokers"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_brokers?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_brokers?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_brokers?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_service_broker"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.service-broker.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_brokers/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_offerings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings?service_broker_guids=dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7aa37bad-6ccb-4ef9-ba48-9ce3a91b2b62"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"another_service_broker"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://another-example.service-broker.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_brokers/7aa37bad-6ccb-4ef9-ba48-9ce3a91b2b62"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_offerings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings?service_broker_guids=7aa37bad-6ccb-4ef9-ba48-9ce3a91b2b62"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the service brokers the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_brokers</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service broker names to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space GUIDs to filter by</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code>, <code class="prettyprint">name</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td>Only space-scoped brokers</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Only space-scoped brokers</td>
</tr>
<tr>
<td>Other</td>
<td>Will receive an empty list</td>
</tr>
</tbody></table>
<h3 id="update-a-service-broker">Update a service broker</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_brokers/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "my_service_broker",
    "url": "https://example.service-broker.com",
    "authentication": {
      "type": "basic",
      "credentials": {
        "username": "us3rn4me",
        "password": "p4ssw0rd"
      }
    },
    "metadata": {
      "labels": {"key": "value"},
      "annotations": {"note": "detailed information"}
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response with job
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/af5c57f6-8769-41fa-a499-2c84ed896788</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response without job
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_service_broker"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.service-broker.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dev"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_brokers/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_offerings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings?service_broker_guids=dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint updates a service broker. Depending on the parameters specified,
the endpoint may respond with a background job, and it may synchronize the
service offerings and service plans with those in the broker&rsquo;s catalog.</p>

<p>When a service broker has a synchronization job in progress, only
updates with <code class="prettyprint">metadata</code> are permitted until the synchronization job
is complete.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Updates Catalog</th>
<th>Responds with job</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td>No</td>
<td>Yes</td>
</tr>
<tr>
<td><strong>url</strong></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><strong>authentication</strong></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td>No</td>
<td>No</td>
</tr>
</tbody></table>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/service_brokers/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the service broker</td>
</tr>
<tr>
<td><strong>url</strong></td>
<td><em>string</em></td>
<td>URL of the service broker</td>
</tr>
<tr>
<td><strong>authentication</strong></td>
<td><a href="#the-authentication-object"><em>authentication</em></a></td>
<td>Credentials used to authenticate against the service broker</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service broker</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service broker</td>
</tr>
</tbody></table>

<h4 id="the-authentication-object">The authentication object</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Type of the authentication mechanisms that can be used. Valid value is <code class="prettyprint">basic</code>.</td>
</tr>
<tr>
<td><strong>credentials</strong></td>
<td><em>object</em></td>
<td>Credentials for given authentication type.</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight plaintext"><code>Example basic authentication
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"secretpassw0rd"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h5 id="basic-authentication-credentials">Basic authentication credentials</h5>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>username</strong></td>
<td><em>string</em></td>
<td>The username with which to authenticate against the service broker.</td>
</tr>
<tr>
<td><strong>password</strong></td>
<td><em>string</em></td>
<td>The password with which to authenticate against the service broker.</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td>Only space-scoped brokers</td>
</tr>
</tbody></table>
<h3 id="delete-a-service-broker">Delete a service broker</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_brokers/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/af5c57f6-8769-41fa-a499-2c84ed896788</span>
</code></pre></div>
<p>This endpoint creates a job to delete an existing service broker. The <code class="prettyprint">Location</code> header refers to the created job. See <a href="#service-broker-jobs"><em>Service broker jobs</em></a> for more information and limitations.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/service_brokers/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td>Only space-scoped brokers</td>
</tr>
</tbody></table>
<h3 id="service-broker-jobs">Service broker jobs</h3>

<p>CRUD operations for service brokers are asynchronous. <code class="prettyprint">create</code>, <code class="prettyprint">update</code> and <code class="prettyprint">delete</code> endpoints include a job URL in the <code class="prettyprint">Location</code> header of the HTTP response.</p>

<p>These jobs are the only source of information about the progress of the operation. Therefore, the job must be polled to find out when the process ends and if it was successful.
There is no mechanism to link a service broker with its jobs, apart from the <code class="prettyprint">Location</code> header in the API response.</p>

<p>When a failure occurs during a create job, the service broker won&rsquo;t be usable. It will still be included in the <code class="prettyprint">GET</code> endpoints responses, hence the importance of querying the job to find out the end status.</p>

<p>When updating a service broker, catalog changes will be rolled-back in the event of the job failing. The service broker catalog will remain unchanged with no indication that the update operation failed. Querying the job will provide such information.</p>
<h2 id="service-offerings">Service Offerings</h2>

<p>Service offerings represent the services offered by service brokers.
A service broker will have one or more service offerings.
A service offering will have one or more service plans.
Service offerings and service plans are created and updated when a service broker is registered or updated.</p>
<h3 id="visibility-of-service-offerings">Visibility of service offerings</h3>

<p>This table shows the service offerings that different roles can see.
The service offerings that a user can see relate to their space and organization roles,
regardless of which space or organization is being targeted.</p>

<p>A service offering can be seen when at least one of its service plans can be seen.
Service plans may be configured to be <code class="prettyprint">public</code>,
or they may be configured with a relationship to a restricted list of organizations.</p>

<p>Service offerings and service plans from a space-scoped service broker cannot have their visibility configured.
They are only visible to members of that space.</p>

<table><thead>
<tr>
<th>Role</th>
<th>Public plans</th>
<th>Restricted plans</th>
<th>From space-scoped service brokers</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td>All</td>
<td>All</td>
<td>All</td>
</tr>
<tr>
<td>Admin Read</td>
<td>All</td>
<td>All</td>
<td>All</td>
</tr>
<tr>
<td>Global Auditor</td>
<td>All</td>
<td>All</td>
<td>All</td>
</tr>
<tr>
<td>Org Manager</td>
<td>All</td>
<td>In organisation</td>
<td>None</td>
</tr>
<tr>
<td>Org Auditor</td>
<td>All</td>
<td>In organisation</td>
<td>None</td>
</tr>
<tr>
<td>Org Billing</td>
<td>All</td>
<td>In organisation</td>
<td>None</td>
</tr>
<tr>
<td>Space Manager</td>
<td>All</td>
<td>In organisation</td>
<td>In space</td>
</tr>
<tr>
<td>Space Developer</td>
<td>All</td>
<td>In organisation</td>
<td>In space</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>All</td>
<td>In organisation</td>
<td>In space</td>
</tr>
<tr>
<td>Unauthenticated</td>
<td>All*</td>
<td>None</td>
<td>None</td>
</tr>
</tbody></table>

<p>*Unless the <code class="prettyprint">hide_marketplace_from_unauthenticated_users</code> feature flag is <code class="prettyprint">true</code></p>
<h3 id="the-service-offering-object">The service offering object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Service Offering object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bf7eb420-11e5-11ea-b7db-4b5d5e7976a9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_service_offering"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Provides my service"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"relational"</span><span class="p">,</span><span class="w"> </span><span class="s2">"caching"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"requires"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shareable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"documentation_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://some-documentation-link.io"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"broker_catalog"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db730a8c-11e5-11ea-838a-0f4fff3b1cfb"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"shareable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"plan_updateable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bindable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instances_retrievable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bindings_retrievable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"allow_context_updates"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_broker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings/bf7eb420-11e5-11ea-b7db-4b5d5e7976a"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_plans"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans?service_offering_guids=bf7eb420-11e5-11ea-b7db-4b5d5e7976a"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_broker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_brokers/13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the service offering</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the service offering</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td><em>string</em></td>
<td>Description of the service offering</td>
</tr>
<tr>
<td><strong>available</strong></td>
<td><em>boolean</em></td>
<td>Whether or not the service offering is available</td>
</tr>
<tr>
<td><strong>tags</strong></td>
<td><em>list of strings</em></td>
<td>Descriptive tags for the service offering</td>
</tr>
<tr>
<td><strong>requires</strong></td>
<td><em>list of strings</em></td>
<td>A list of permissions that the user would have to give the service, if they provision it; the only permissions currently supported are <code class="prettyprint">syslog_drain</code>, <code class="prettyprint">route_forwarding</code> and <code class="prettyprint">volume_mount</code></td>
</tr>
<tr>
<td><strong>shareable</strong></td>
<td><em>boolean</em></td>
<td>Whether or not service Instances of this service offering can be shared across organizations and spaces</td>
</tr>
<tr>
<td><strong>documentation_url</strong></td>
<td><em>string</em></td>
<td>Url that points to a documentation page for the service offering, if provided by the service broker as part of the metadata field</td>
</tr>
<tr>
<td><strong>broker_catalog</strong></td>
<td><em><a href="#the-service-offering-broker-catalog">broker catalog object</a></em></td>
<td>This object contains information obtained from the service broker Catalog</td>
</tr>
<tr>
<td><strong>relationships.service_broker</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The service broker that provides this service offering</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service offering</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations added to the service offering</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>

<h4 id="the-service-offering-broker-catalog">The service offering broker catalog</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td><em>string</em></td>
<td>The identifier that the service broker provided for this service offering</td>
</tr>
<tr>
<td><strong>metadata</strong></td>
<td><em>object</em></td>
<td>Additional information provided by the service broker as specified by <a href="https://github.com/openservicebrokerapi/servicebroker/blob/master/profile.md#service-metadata-fields">OSBAPI</a></td>
</tr>
<tr>
<td><strong>features.plan_updateable</strong></td>
<td><em>boolean</em></td>
<td>Whether the service offering supports upgrade/downgrade for service plans by default; service plans can override this field</td>
</tr>
<tr>
<td><strong>features.bindable</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether service Instances of the service can be bound to applications</td>
</tr>
<tr>
<td><strong>features.instances_retrievable</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether the Fetching a service instance endpoint is supported for all service plans</td>
</tr>
<tr>
<td><strong>features.bindings_retrievable</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether the Fetching a service binding endpoint is supported for all service plans</td>
</tr>
<tr>
<td><strong>features.allow_context_updates</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether service instance updates relating only to context are propagated to the service broker</td>
</tr>
</tbody></table>
<h3 id="get-a-service-offering">Get a service offering</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_offerings/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bf7eb420-11e5-11ea-b7db-4b5d5e7976a9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_service_offering"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Provides my service"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"relational"</span><span class="p">,</span><span class="w"> </span><span class="s2">"caching"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"requires"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shareable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"documentation_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://some-documentation-link.io"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"broker_catalog"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db730a8c-11e5-11ea-838a-0f4fff3b1cfb"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"shareable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"plan_updateable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bindable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instances_retrievable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bindings_retrievable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"allow_context_updates"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_broker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings/bf7eb420-11e5-11ea-b7db-4b5d5e7976a"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_plans"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans?service_offering_guids=bf7eb420-11e5-11ea-b7db-4b5d5e7976a"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_broker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_brokers/13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<p>This endpoint retrieves the service offering by GUID.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_offerings/:guid</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>fields</strong></td>
<td><a href="#fields-parameter"><em>fields parameter</em></a></td>
<td><a href="#service-offering-fields"><em>Allowed values</em></a></td>
</tr>
</tbody></table>

<h5 id="service-offering-fields">Service Offering Fields</h5>

<table><thead>
<tr>
<th>Resource</th>
<th>Allowed Keys</th>
</tr>
</thead><tbody>
<tr>
<td>service_broker</td>
<td><code class="prettyprint">guid</code>, <code class="prettyprint">name</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
<tr>
<td>Unauthenticated Users (for service offerings with public plans, unless <code class="prettyprint">hide_marketplace_from_unauthenticated_users</code> is set)</td>
</tr>
</tbody></table>
<h3 id="list-service-offerings">List service offerings</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_offerings"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bf7eb420-11e5-11ea-b7db-4b5d5e7976a9"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_service_offering"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Provides my service"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"relational"</span><span class="p">,</span><span class="w"> </span><span class="s2">"caching"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"requires"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"shareable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"documentation_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://some-documentation-link.io"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"broker_catalog"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db730a8c-11e5-11ea-838a-0f4fff3b1cfb"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"shareable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"plan_updateable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"bindable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instances_retrievable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"bindings_retrievable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"allow_context_updates"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"service_broker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings/bf7eb420-11e5-11ea-b7db-4b5d5e7976a"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_plans"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans?service_offering_guids=bf7eb420-11e5-11ea-b7db-4b5d5e7976a"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_broker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_brokers/13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20e6cd62-12bb-11ea-90d1-7bfec2c75bcd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"other_service_offering"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Provides another service"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"caching"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"requires"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-29T16:44:02Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-29T16:44:02Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"shareable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"documentation_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://some-other-documentation-link.io"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"broker_catalog"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3cb11822-12bb-11ea-beb1-a350dc7453b9"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"shareable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"plan_updateable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"bindable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instances_retrievable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"bindings_retrievable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"allow_context_updates"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"service_broker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings/20e6cd62-12bb-11ea-90d1-7bfec2c75bcd"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_plans"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans?service_offering_guids=20e6cd62-12bb-11ea-90d1-7bfec2c75bcd"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_broker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_brokers/13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the service offerings the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_offerings</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of names to filter by</td>
</tr>
<tr>
<td><strong>available</strong></td>
<td><em>boolean</em></td>
<td>Filter by the <code class="prettyprint">available</code> property; valid values are <code class="prettyprint">true</code> or <code class="prettyprint">false</code></td>
</tr>
<tr>
<td><strong>service_broker_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service broker GUIDs to filter by</td>
</tr>
<tr>
<td><strong>service_broker_names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service broker names to filter by</td>
</tr>
<tr>
<td><strong>space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space GUIDs to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization GUIDs to filter by</td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>fields</strong></td>
<td><a href="#fields-parameter"><em>fields parameter</em></a></td>
<td><a href="#service-offerings-list-fields"><em>Allowed values</em></a></td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending<br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code> and <code class="prettyprint">name</code></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h5 id="service-offerings-list-fields">Service Offerings List Fields</h5>

<table><thead>
<tr>
<th>Resource</th>
<th>Allowed Keys</th>
</tr>
</thead><tbody>
<tr>
<td>service_broker</td>
<td><code class="prettyprint">guid</code>, <code class="prettyprint">name</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
<tr>
<td>Unauthenticated Users (for service offerings with public plans, unless <code class="prettyprint">hide_marketplace_from_unauthenticated_users</code> is set)</td>
</tr>
</tbody></table>
<h3 id="update-a-service-offering">Update a service offering</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_offerings/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "metadata": {
      "labels": {"key": "value"},
      "annotations": {"note": "detailed information"}
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bf7eb420-11e5-11ea-b7db-4b5d5e7976a9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_service_offering"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Provides my service"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"relational"</span><span class="p">,</span><span class="w"> </span><span class="s2">"caching"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"requires"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shareable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"documentation_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://some-documentation-link.io"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"broker_catalog"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db730a8c-11e5-11ea-838a-0f4fff3b1cfb"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"shareable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"plan_updateable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bindable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instances_retrievable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bindings_retrievable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"allow_context_updates"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_broker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings/bf7eb420-11e5-11ea-b7db-4b5d5e7976a"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_plans"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans?service_offering_guids=bf7eb420-11e5-11ea-b7db-4b5d5e7976a"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_broker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_brokers/13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<p>This endpoint updates a service offering with labels and annotations.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/service_offerings/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service offering</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service offering</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td>Only for service offerings from space-scoped brokers</td>
</tr>
</tbody></table>
<h3 id="delete-a-service-offering">Delete a service offering</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_offerings/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div>
<p>This endpoint deletes a service offering. This is typically used to remove orphan service offerings from the Cloud
Foundry database when they have been removed from the service broker catalog, or when the service broker has been
removed.</p>

<p>Note that this operation only affects the Cloud Foundry database, and no attempt is made to contact the service
broker.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/service_offerings/:guid</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>purge</strong></td>
<td><em>boolean</em></td>
<td>If <code class="prettyprint">true</code>, any service plans, instances, and bindings associated with this service offering will also be deleted</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td>Only service offerings from space-scoped brokers</td>
</tr>
</tbody></table>
<h2 id="service-plans">Service Plans</h2>

<p>Service plans represent the service plans offered by a service offering.
A service offering will have one or more service plans.
Service offerings and service plans are created and updated when a service broker is registered or updated.</p>
<h3 id="the-service-plan-object">The service plan object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Service Plan object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bf7eb420-11e5-11ea-b7db-4b5d5e7976a9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_big_service_plan"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Big"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"visibility_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"free"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"costs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">199.99</span><span class="p">,</span><span class="w">
      </span><span class="nl">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Monthly"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maintenance_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0+dev4"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Database version 7.8.0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"broker_catalog"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db730a8c-11e5-11ea-838a-0f4fff3b1cfb"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"custom-key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom-information"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"maximum_polling_duration"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"plan_updateable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bindable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"schemas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"create"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/draft-04/schema#"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"billing-account"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Billing account number used to charge use of shared fake server."</span><span class="p">,</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"update"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_binding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"create"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_offering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans/bf7eb420-11e5-11ea-b7db-4b5d5e7976a9"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_offering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings/13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"visibility"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans/bf7eb420-11e5-11ea-b7db-4b5d5e7976a9/visibility"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the service plan</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the service plan</td>
</tr>
<tr>
<td><strong>visibility_type</strong></td>
<td><em>string</em></td>
<td>Denotes the visibility of the plan; can be <code class="prettyprint">public</code>, <code class="prettyprint">admin</code>, <code class="prettyprint">organization</code>, <code class="prettyprint">space</code>, see <a href="#list-of-visibility-types"><em>list of visibility types</em></a></td>
</tr>
<tr>
<td><strong>available</strong></td>
<td><em>boolean</em></td>
<td>Whether or not the service plan is available</td>
</tr>
<tr>
<td><strong>free</strong></td>
<td><em>boolean</em></td>
<td>Whether or not the service plan is free of charge</td>
</tr>
<tr>
<td><strong>costs</strong></td>
<td><em>array of <a href="#the-service-plan-cost">cost objects</a></em></td>
<td>The cost of the service plan as obtained from the service broker catalog</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td><em>string</em></td>
<td>Description of the service plan</td>
</tr>
<tr>
<td><strong>maintenance_info</strong></td>
<td><em><a href="#the-maintenance-info-object-for-service-plans">maintenance_info object</a></em></td>
<td>Information about the version of this service plan</td>
</tr>
<tr>
<td><strong>broker_catalog</strong></td>
<td><em><a href="#the-service-plan-broker-catalog">broker catalog object</a></em></td>
<td>This object contains information obtained from the service broker catalog</td>
</tr>
<tr>
<td><strong>schemas</strong></td>
<td><em><a href="#the-service-plan-schemas">schemas object</a></em></td>
<td>Schema definitions for service instances and service bindings for the service plan</td>
</tr>
<tr>
<td><strong>relationships.service_offering</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The service offering that this service plan relates to</td>
</tr>
<tr>
<td><strong>relationships.space</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The space of the service broker, if this service plan is from a space-scoped service broker</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service plan</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations added to the service plan</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>

<h4 id="the-service-plan-cost">The service plan cost</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>amount</strong></td>
<td><em>float</em></td>
<td>Pricing amount</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td><em>string</em></td>
<td>Currency code for the pricing amount, e.g. USD, GBP</td>
</tr>
<tr>
<td><strong>unit</strong></td>
<td><em>string</em></td>
<td>Display name for type of cost, e.g. Monthly, Hourly, Request, GB</td>
</tr>
</tbody></table>

<h4 id="the-maintenance-info-object-for-service-plans">The maintenance info object for service plans</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>version</strong></td>
<td><em>string</em></td>
<td>The current semantic version of the service plan; comparing this version with that of a service instance can be used to determine whether or not the service instance is up to date with this service plan</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td><em>string</em></td>
<td>A textual explanation associated with this version</td>
</tr>
</tbody></table>

<h4 id="the-service-plan-broker-catalog">The service plan broker catalog</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td><em>string</em></td>
<td>The identifier that the service broker provided for this service plan</td>
</tr>
<tr>
<td><strong>metadata</strong></td>
<td><em>object</em></td>
<td>Additional information provided by the service broker as specified by <a href="https://github.com/openservicebrokerapi/servicebroker/blob/master/profile.md#plan-metadata-fields">OSBAPI</a></td>
</tr>
<tr>
<td><strong>maximum_polling_duration</strong></td>
<td><em>integer</em></td>
<td>The maximum number of seconds that Cloud Foundry will wait for an asynchronous service broker operation</td>
</tr>
<tr>
<td><strong>features.plan_updateable</strong></td>
<td><em>boolean</em></td>
<td>Whether the service plan supports upgrade/downgrade for service plans; when the catalog does not specify a value, it is inherited from the service offering</td>
</tr>
<tr>
<td><strong>features.bindable</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether service instances of the service can be bound to applications</td>
</tr>
</tbody></table>

<h4 id="the-service-plan-schemas">The service plan schemas</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>service_instance.create</strong></td>
<td><em>object</em></td>
<td>Schema definition for service instance creation</td>
</tr>
<tr>
<td><strong>service_instance.create.parameters</strong></td>
<td><em>JSON Schema object</em></td>
<td>The schema definition for the input parameters; each input parameter is expressed as a property within a JSON object</td>
</tr>
<tr>
<td><strong>service_instance.update</strong></td>
<td><em>object</em></td>
<td>Schema definition for service instance update</td>
</tr>
<tr>
<td><strong>service_instance.update.parameters</strong></td>
<td><em>JSON Schema object</em></td>
<td>The schema definition for the input parameters; each input parameter is expressed as a property within a JSON object</td>
</tr>
<tr>
<td><strong>service_binding.create</strong></td>
<td><em>object</em></td>
<td>Schema definition for service Binding creation</td>
</tr>
<tr>
<td><strong>service_binding.create.parameters</strong></td>
<td><em>JSON Schema object</em></td>
<td>The schema definition for the input parameters; each input parameter is expressed as a property within a JSON object</td>
</tr>
</tbody></table>
<h3 id="get-a-service-plan">Get a service plan</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_plans/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bf7eb420-11e5-11ea-b7db-4b5d5e7976a9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_big_service_plan"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Big"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"visibility_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"free"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"costs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">199.99</span><span class="p">,</span><span class="w">
      </span><span class="nl">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Monthly"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maintenance_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0+dev4"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Database version 7.8.0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"broker_catalog"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db730a8c-11e5-11ea-838a-0f4fff3b1cfb"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"custom-key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom-information"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"maximum_polling_duration"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"plan_updateable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bindable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"schemas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"create"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/draft-04/schema#"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"billing-account"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Billing account number used to charge use of shared fake server."</span><span class="p">,</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"update"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_binding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"create"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_offering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans/bf7eb420-11e5-11ea-b7db-4b5d5e7976a9"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_offering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings/13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"visibility"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans/bf7eb420-11e5-11ea-b7db-4b5d5e7976a9/visibility"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<p>This endpoint retrieves the service plan by GUID.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_plans/:guid</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>fields</strong></td>
<td><a href="#fields-parameter"><em>fields parameter</em></a></td>
<td><a href="#service-plan-fields"><em>Allowed values</em></a></td>
</tr>
<tr>
<td><strong>include</strong></td>
<td><em>list of strings</em></td>
<td>Optionally include a list of related resources in the response; <br>valid values are <code class="prettyprint">space.organization</code> and <code class="prettyprint">service_offering</code></td>
</tr>
</tbody></table>

<h5 id="service-plan-fields">Service Plan Fields</h5>

<table><thead>
<tr>
<th>Resource</th>
<th>Allowed Keys</th>
</tr>
</thead><tbody>
<tr>
<td>service_offering.service_broker</td>
<td><code class="prettyprint">guid</code>, <code class="prettyprint">name</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
<tr>
<td>Unauthenticated Users (for public plans, unless <code class="prettyprint">hide_marketplace_from_unauthenticated_users</code> is set)</td>
</tr>
</tbody></table>
<h3 id="list-service-plans">List service plans</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_plans"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bf7eb420-11e5-11ea-b7db-4b5d5e7976a9"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_big_service_plan"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Big plan"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"visibility_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"organization"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"free"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"costs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">199.99</span><span class="p">,</span><span class="w">
          </span><span class="nl">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Monthly"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"maintenance_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0+dev4"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Database version 7.8.0"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"broker_catalog"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db730a8c-11e5-11ea-838a-0f4fff3b1cfb"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"custom-key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom-value"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"maximum_polling_duration"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"plan_updateable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"bindable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"schemas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"create"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/draft-04/schema#"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"billing-account"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Billing account number used to charge use of shared fake server."</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"update"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_binding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"create"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"service_offering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans/bf7eb420-11e5-11ea-b7db-4b5d5e7976a9"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_offering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings/13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"visibility"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans/bf7eb420-11e5-11ea-b7db-4b5d5e7976a9/visibility"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20e6cd62-12bb-11ea-90d1-7bfec2c75bcd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"other_service_plan"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Provides another service plan"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"visibility_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"free"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-29T16:44:02Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-29T16:44:02Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"maintenance_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"broker_catalog"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3cb11822-12bb-11ea-beb1-a350dc7453b9"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"other-data"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"maximum_polling_duration"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"plan_updateable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"bindable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"schemas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"create"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"update"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_binding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"create"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"service_offering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans/20e6cd62-12bb-11ea-90d1-7bfec2c75bcd"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_offering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings/13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"visibility"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans/20e6cd62-12bb-11ea-90d1-7bfec2c75bcd/visibility"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the service plans the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_plans</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of names to filter by</td>
</tr>
<tr>
<td><strong>available</strong></td>
<td><em>boolean</em></td>
<td>Filter by the <code class="prettyprint">available</code> property; valid values are <code class="prettyprint">true</code> or <code class="prettyprint">false</code></td>
</tr>
<tr>
<td><strong>broker_catalog_ids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of IDs provided by the service broker for the service plan to filter by</td>
</tr>
<tr>
<td><strong>space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space GUIDs to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization GUIDs to filter by</td>
</tr>
<tr>
<td><strong>service_broker_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service broker GUIDs to filter by</td>
</tr>
<tr>
<td><strong>service_broker_names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service broker names to filter by</td>
</tr>
<tr>
<td><strong>service_offering_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service Offering GUIDs to filter by</td>
</tr>
<tr>
<td><strong>service_offering_names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service Offering names to filter by</td>
</tr>
<tr>
<td><strong>service_instance_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service Instance GUIDs to filter by</td>
</tr>
<tr>
<td><strong>include</strong></td>
<td><em>list of strings</em></td>
<td>Optionally include a list of unique related resources in the response; <br>valid values are <code class="prettyprint">space.organization</code> and <code class="prettyprint">service_offering</code></td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code>, <code class="prettyprint">name</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>fields</strong></td>
<td><a href="#fields-parameter"><em>fields parameter</em></a></td>
<td><a href="#service-plans-list-fields"><em>Allowed values</em></a></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<p>The <strong>organization_guids</strong> and <strong>space_guids</strong> filters do not filter plans that are public.
They both act on plans that are restricted to certain organizations, and to plans from space-scoped
service brokers.</p>

<h5 id="service-plans-list-fields">Service plans list fields</h5>

<table><thead>
<tr>
<th>Resource</th>
<th>Allowed keys</th>
</tr>
</thead><tbody>
<tr>
<td>service_offering.service_broker</td>
<td><code class="prettyprint">guid</code>, <code class="prettyprint">name</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
<tr>
<td>Unauthenticated Users (for public plans, unless <code class="prettyprint">hide_marketplace_from_unauthenticated_users</code> is set)</td>
</tr>
</tbody></table>
<h3 id="update-a-service-plan">Update a service plan</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_plans/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "metadata": {
      "labels": {"key": "value"},
      "annotations": {"note": "detailed information"}
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bf7eb420-11e5-11ea-b7db-4b5d5e7976a9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_big_service_plan"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Big"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"visibility_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"free"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"costs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">199.99</span><span class="p">,</span><span class="w">
      </span><span class="nl">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Monthly"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-28T13:44:02Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maintenance_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0+dev4"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Database version 7.8.0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"broker_catalog"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db730a8c-11e5-11ea-838a-0f4fff3b1cfb"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"custom-key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom-information"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"maximum_polling_duration"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"plan_updateable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bindable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"schemas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"create"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/draft-04/schema#"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"billing-account"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Billing account number used to charge use of shared fake server."</span><span class="p">,</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"update"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_binding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"create"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_offering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans/bf7eb420-11e5-11ea-b7db-4b5d5e7976a9"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_offering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_offerings/13c60e38-11e7-11ea-9106-33ee3c5bd4d7"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"visibility"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans/bf7eb420-11e5-11ea-b7db-4b5d5e7976a9/visibility"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<p>This endpoint updates a service plan with labels and annotations.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/service_plans/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service plan</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service plan</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td>Only for service plans from space-scoped brokers</td>
</tr>
</tbody></table>
<h3 id="delete-a-service-plan">Delete a service plan</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_plans/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div>
<p>This endpoint deletes a service plan. This is used to remove service plans from the Cloud Foundry database when they
are no longer provided by the service broker.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/service_plans/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td>Only service plans from space-scoped brokers</td>
</tr>
</tbody></table>
<h2 id="service-plan-visibility">Service Plan Visibility</h2>

<p>Service plan visibility is used to manage whether a role has access to a given service plan and its service offering.</p>
<h3 id="the-service-plan-visibility-object">The service plan visibility object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Service Plan Visibility object - organization restricted
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"organization"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bf7eb420-11e5-11ea-b7db-4b5d5e7976a9"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_org"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Service Plan Visibility object - space restricted
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ab7eb420-11e5-11ea-b7db-4b5d5e7975ad"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_space"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Denotes the visibility of the plan; can be <code class="prettyprint">public</code>, <code class="prettyprint">admin</code>, <code class="prettyprint">organization</code>, <code class="prettyprint">space</code>, see <a href="#list-of-visibility-types"><em>list of visibility types</em></a></td>
</tr>
<tr>
<td><strong>space.guid</strong></td>
<td><em>string</em></td>
<td>Unique identifier for the space whose members can access the plan; present if <code class="prettyprint">type</code> is <code class="prettyprint">space</code></td>
</tr>
<tr>
<td><strong>space.name</strong></td>
<td><em>string</em></td>
<td>Name of the space whose members can access the plan; present if <code class="prettyprint">type</code> is <code class="prettyprint">space</code></td>
</tr>
<tr>
<td><strong>organizations</strong></td>
<td><em>array of <a href="#the-organization-visibility-object"><em>organization object</em></a></em></td>
<td>List of organizations whose members can access the plan; present if <code class="prettyprint">type</code> is <code class="prettyprint">organization</code></td>
</tr>
</tbody></table>

<h4 id="the-organization-visibility-object">The organization visibility object</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>string</em></td>
<td>Unique identifier for the organization where the plan is available</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the organization where the plan is available</td>
</tr>
</tbody></table>
<h3 id="list-of-visibility-types">List of visibility types</h3>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>public</strong></td>
<td>Everyone, including unauthenticated users can see the service plan</td>
</tr>
<tr>
<td><strong>admin</strong></td>
<td>Only Admin, Admin Read-Only and Global Auditor can see the service plan</td>
</tr>
<tr>
<td><strong>organization</strong></td>
<td>Restricted to members of a set of organizations</td>
</tr>
<tr>
<td><strong>space</strong></td>
<td>Restricted to members of a space; only possible if the plan comes from a space-scoped service broker</td>
</tr>
</tbody></table>
<h3 id="get-a-service-plan-visibility">Get a service plan visibility</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_plans/[guid]/visibility"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the service plan visibility for a given plan.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_plans/:guid/visibility</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="update-a-service-plan-visibility">Update a service plan visibility</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_plans/[guid]/visibility"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "type": "organization",
    "organizations": [
      { "guid" : "0fc1ad4f-e1d7-4436-8e23-6b20f03c6482" }
    ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"organization"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0fc1ad4f-e1d7-4436-8e23-6b20f03c6482"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"other_org"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint updates a service plan visibility. It behaves similar to the <a href="#apply-a-service-plan-visibility">POST service plan visibility endpoint</a> but this endpoint will replace the existing list of organizations when the service plan is <code class="prettyprint">organization</code> visible.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/service_plans/:guid/visibility</code></p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Denotes the visibility of the plan; can be <code class="prettyprint">public</code>, <code class="prettyprint">admin</code>, <code class="prettyprint">organization</code>, see <a href="#list-of-visibility-types"><em>list of visibility types</em></a></td>
</tr>
<tr>
<td><strong>organizations</strong></td>
<td><em>array of objects</em></td>
<td>Desired list of organizations GUIDs where the plan will be accessible; required if <code class="prettyprint">type</code> is <code class="prettyprint">organization</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="apply-a-service-plan-visibility">Apply a service plan visibility</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_plans/[guid]/visibility"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "type": "organization",
    "organizations": [
      { "guid": "0fc1ad4f-e1d7-4436-8e23-6b20f03c6482" }
    ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"organization"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint applies a service plan visibility. It behaves similar to the <a href="#update-a-service-plan-visibility">PATCH service plan visibility endpoint</a> but this endpoint will append to the existing list of organizations when the service plan is <code class="prettyprint">organization</code> visible.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/service_plans/:guid/visibility</code></p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Denotes the visibility of the plan; can be <code class="prettyprint">public</code>, <code class="prettyprint">admin</code>, <code class="prettyprint">organization</code>, see <a href="#list-of-visibility-types"><em>list of visibility types</em></a></td>
</tr>
<tr>
<td><strong>organizations</strong></td>
<td><em>array of objects</em></td>
<td>Desired list of organizations GUIDs where the plan will be accessible; required if <code class="prettyprint">type</code> is <code class="prettyprint">organization</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="remove-organization-from-a-service-plan-visibility">Remove organization from a service plan visibility</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_plans/[guid]/visibility/[organization_guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div>
<p>This endpoint removes an organization from a service plan visibility list of organizations. It is only defined for service plans which are org-restricted. It will fail with a HTTP status code of 422 for any other visibility type (e.g. Public).</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/service_plans/:guid/visibility/:organization_guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h2 id="service-instances">Service Instances</h2>

<p>An instantiation of a service.</p>

<p>Service instances can be of type <code class="prettyprint">managed</code> when it is an instantiation of a <a href="#service-offerings">service offering</a> registered with CF
or <code class="prettyprint">user-provided</code> when it describes an instance of an offering that is not registered with CF. </p>
<h3 id="the-service-instance-object">The service instance object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Managed Service Instance object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-managed-instance"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"managed"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maintenance_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"upgrade_available"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dashboard_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://service-broker.example.org/dashboard"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:32Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5358d122-638e-11ea-afca-bf6e756684ac"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans/5358d122-638e-11ea-afca-bf6e756684ac"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/c89b3280-fe8d-4aa0-a42e-44465bb1c61c/parameters"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shared_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/c89b3280-fe8d-4aa0-a42e-44465bb1c61c/relationships/shared_spaces"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_credential_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings?service_instance_guids=c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_route_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings?service_instance_guids=c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example User-Provided Service Instance object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:56:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:56:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:32Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-user-provided-instance"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"sql"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user-provided"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"syslog_drain_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://logs.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"route_service_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://routes.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/88ce23e5-27c3-4381-a2df-32a28ec43133/credentials"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_credential_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings?service_instance_guids=88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_route_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings?service_instance_guids=88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the service instance</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the service instance</td>
</tr>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Either <code class="prettyprint">managed</code> or <code class="prettyprint">user-provided</code></td>
</tr>
<tr>
<td><strong>tags</strong></td>
<td><em>list of strings</em></td>
<td>Tags are used by apps to identify service instances; they are shown in the app VCAP_SERVICES env</td>
</tr>
<tr>
<td><strong>syslog_drain_url</strong></td>
<td><em>string</em></td>
<td>URL to which logs for bound applications will be streamed; only shown when type is <code class="prettyprint">user-provided</code></td>
</tr>
<tr>
<td><strong>route_service_url</strong></td>
<td><em>string</em></td>
<td>URL to which requests for bound routes will be forwarded; only shown when type is <code class="prettyprint">user-provided</code></td>
</tr>
<tr>
<td><strong>maintenance_info</strong></td>
<td><em><a href="#the-maintenance-info-object-for-service-instances">maintenance_info object</a></em></td>
<td>Information about the version of this service instance; only shown when type is <code class="prettyprint">managed</code></td>
</tr>
<tr>
<td><strong>upgrade_available</strong></td>
<td><em>bool</em></td>
<td>Whether or not an upgrade of this service instance is available on the current Service Plan; details are available in the maintenance_info object; Only shown when type is <code class="prettyprint">managed</code></td>
</tr>
<tr>
<td><strong>dashboard_url</strong></td>
<td><em>string</em></td>
<td>The URL to the service instance dashboard (or null if there is none); only shown when type is <code class="prettyprint">managed</code></td>
</tr>
<tr>
<td><strong>last_operation</strong></td>
<td><em><a href="#the-last-operation-object-for-service-instances">last operation object</a></em></td>
<td>The last operation of this service instance</td>
</tr>
<tr>
<td><strong>relationships.service_plan</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The service plan the service instance relates to; only shown when type is <code class="prettyprint">managed</code></td>
</tr>
<tr>
<td><strong>relationships.space</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The space the service instance is contained in</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service instance</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service instance</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>

<h4 id="the-maintenance-info-object-for-service-instances">The maintenance info object for service instances</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>version</strong></td>
<td><em>string</em></td>
<td>The current semantic version of this service instance; comparing this version with the version of the Service Plan can be used to determine whether or not this service instance is up to date with the Service Plan</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td><em>string</em></td>
<td>A textual explanation associated with this version</td>
</tr>
</tbody></table>

<h4 id="the-last-operation-object-for-service-instances">The last operation object for service instances</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Either <code class="prettyprint">create</code>, <code class="prettyprint">update</code>, or <code class="prettyprint">delete</code></td>
</tr>
<tr>
<td><strong>state</strong></td>
<td><em>string</em></td>
<td>Either <code class="prettyprint">initial</code>, <code class="prettyprint">in progress</code>, <code class="prettyprint">succeeded</code>, or <code class="prettyprint">failed</code><br><em>Note: The <code class="prettyprint">initial</code> state indicates that no response from the service broker has been received yet.</em></td>
</tr>
<tr>
<td><strong>description</strong></td>
<td><em>string</em></td>
<td>A textual explanation associated with this state</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the operation started</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the operation was last updated</td>
</tr>
</tbody></table>
<h3 id="create-a-service-instance">Create a service instance</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request for Managed Service Instance
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "type": "managed",
    "name": "my_service_instance",
    "parameters": {
      "foo": "bar",
      "baz": "qux"
    },
    "tags": ["foo", "bar", "baz"],
    "metadata": {
      "annotations": {
        "foo": "bar"
      },
      "labels": {
        "baz": "qux"
      }
    },
    "relationships": {
      "space": {
        "data": {
          "guid": "7304bc3c-7010-11ea-8840-48bf6bec2d78"
        }
      },
      "service_plan": {
        "data": {
          "guid": "e0e4417c-74ee-11ea-a604-48bf6bec2d78"
        }
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response for Managed Service Instance
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/af5c57f6-8769-41fa-a499-2c84ed896788</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Request for User-Provided Service Instance
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "type": "user-provided",
    "name": "my_service_instance",
    "credentials": {
      "foo": "bar",
      "baz": "qux"
    },
    "tags": ["foo", "bar", "baz"],
    "syslog_drain_url": "https://syslog.com/drain",
    "route_service_url": "https://route.com/service",
    "metadata": {
      "annotations": {
        "foo": "bar"
      },
      "labels": {
        "baz": "qux"
      }
    },
    "relationships": {
      "space": {
        "data": {
          "guid": "7304bc3c-7010-11ea-8840-48bf6bec2d78"
        }
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response for User-Provided Service Instance
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:56:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:56:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:32Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-user-provided-instance"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"sql"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user-provided"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"syslog_drain_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://logs.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"route_service_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://routes.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"baz"</span><span class="p">:</span><span class="s2">"qux"</span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"foo"</span><span class="p">:</span><span class="s2">"bar"</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/88ce23e5-27c3-4381-a2df-32a28ec43133/credentials"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_credential_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings?service_instance_guids=88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_route_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings?service_instance_guids=88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint creates a new service instance. Service instances can be of type <code class="prettyprint">managed</code> or <code class="prettyprint">user-provided</code>, and
the required parameters are different for each type. User provided service instances do not require interactions with
service brokers.</p>

<p>If failures occur when creating managed service instances, the API might execute orphan mitigation steps
accordingly to cases outlined in the <a href="https://github.com/openservicebrokerapi/servicebroker/blob/master/spec.md#orphan-mitigation">OSBAPI specification</a></p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/service_instances</code></p>

<h4 id="required-parameters-for-managed-service-instance">Required parameters for managed service instance</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Must be <code class="prettyprint">managed</code></td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the service instance</td>
</tr>
<tr>
<td><strong>relationships.space</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The space in which to create the service instance</td>
</tr>
<tr>
<td><strong>relationships.service_plan</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The service plan from which to create the service instance</td>
</tr>
</tbody></table>

<h4 id="optional-parameters-for-managed-service-instance">Optional parameters for managed service instance</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tags</strong></td>
<td><em>list of strings</em></td>
<td>Tags are used by apps to identify service instances; they are shown in the app VCAP_SERVICES env</td>
</tr>
<tr>
<td><strong>parameters</strong></td>
<td><em>object</em></td>
<td>A JSON object that is passed to the service broker</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service instance</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service instance</td>
</tr>
</tbody></table>

<h4 id="required-parameters-for-user-provided-service-instance">Required parameters for user-provided service instance</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Must be <code class="prettyprint">user-provided</code></td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the service instance</td>
</tr>
<tr>
<td><strong>relationships.space</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The space in which to create the service instance</td>
</tr>
</tbody></table>

<h4 id="optional-parameters-for-user-provided-service-instance">Optional parameters for user-provided service instance</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tags</strong></td>
<td><em>list of strings</em></td>
<td>Tags are used by apps to identify service instances; they are shown in the app VCAP_SERVICES env</td>
</tr>
<tr>
<td><strong>credentials</strong></td>
<td><em>object</em></td>
<td>A JSON object that is made available to apps bound to this service instance</td>
</tr>
<tr>
<td><strong>syslog_drain_url</strong></td>
<td><em>string</em></td>
<td>URL to which logs for bound applications will be streamed</td>
</tr>
<tr>
<td><strong>route_service_url</strong></td>
<td><em>string</em></td>
<td>URL to which requests for bound routes will be forwarded; must use the <code class="prettyprint">https</code> protocol</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service instance</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service instance</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="get-a-service-instance">Get a service instance</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Managed Service Instance Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-managed-instance"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"managed"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maintenance_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"upgrade_available"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dashboard_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://service-broker.example.org/dashboard"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:32Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5358d122-638e-11ea-afca-bf6e756684ac"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans/5358d122-638e-11ea-afca-bf6e756684ac"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/c89b3280-fe8d-4aa0-a42e-44465bb1c61c/parameters"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shared_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/c89b3280-fe8d-4aa0-a42e-44465bb1c61c/relationships/shared_spaces"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_credential_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings?service_instance_guids=c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_route_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings?service_instance_guids=c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example User-Provided Service Instance Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:56:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:56:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:32Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-user-provided-instance"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"sql"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user-provided"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"syslog_drain_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://logs.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"route_service_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://routes.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/88ce23e5-27c3-4381-a2df-32a28ec43133/credentials"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_credential_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings?service_instance_guids=88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_route_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings?service_instance_guids=88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the service instance by GUID.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_instances/:guid</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>fields</strong></td>
<td><a href="#fields-parameter"><em>fields parameter</em></a></td>
<td><a href="#service-instance-fields"><em>Allowed values</em></a></td>
</tr>
</tbody></table>

<h5 id="service-instance-fields">Service Instance Fields</h5>

<table><thead>
<tr>
<th>Resource</th>
<th>Allowed Keys</th>
</tr>
</thead><tbody>
<tr>
<td>space</td>
<td><code class="prettyprint">guid</code>, <code class="prettyprint">name</code></td>
</tr>
<tr>
<td>space.organization</td>
<td><code class="prettyprint">name</code>, <code class="prettyprint">guid</code></td>
</tr>
<tr>
<td>service_plan</td>
<td><code class="prettyprint">name</code>, <code class="prettyprint">guid</code></td>
</tr>
<tr>
<td>service_plan.service_offering</td>
<td><code class="prettyprint">name</code>, <code class="prettyprint">guid</code>, <code class="prettyprint">description</code>, <code class="prettyprint">documentation_url</code>, <code class="prettyprint">tags</code></td>
</tr>
<tr>
<td>service_plan.service_offering.service_broker</td>
<td><code class="prettyprint">name</code>, <code class="prettyprint">guid</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-service-instances">List service instances</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-managed-instance"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"managed"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"maintenance_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"upgrade_available"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"dashboard_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://service-broker.example.org/dashboard"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation succeeded"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:32Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"service_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5358d122-638e-11ea-afca-bf6e756684ac"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans/5358d122-638e-11ea-afca-bf6e756684ac"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/c89b3280-fe8d-4aa0-a42e-44465bb1c61c/parameters"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"shared_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/c89b3280-fe8d-4aa0-a42e-44465bb1c61c/relationships/shared_spaces"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_credential_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings?service_instance_guids=c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_route_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings?service_instance_guids=c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:56:08Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:56:08Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-user-provided-instance"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"sql"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user-provided"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"syslog_drain_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://logs.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"route_service_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://routes.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation succeeded"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:59:32Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:59:29Z"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/88ce23e5-27c3-4381-a2df-32a28ec43133/credentials"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_credential_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings?service_instance_guids=88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_route_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings?service_instance_guids=88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the service instances the user has access to, including access granted by service instance sharing.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_instances</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service instance names to filter by</td>
</tr>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service instance guids to filter by</td>
</tr>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Filter by type; valid values are <code class="prettyprint">managed</code> and <code class="prettyprint">user-provided</code></td>
</tr>
<tr>
<td><strong>space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space guids to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>service_plan_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service plan guids to filter by</td>
</tr>
<tr>
<td><strong>service_plan_names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service plan names to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending<br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code>, and <code class="prettyprint">name</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>fields</strong></td>
<td><a href="#fields-parameter"><em>fields parameter</em></a></td>
<td><a href="#service-instances-list-fields"><em>Allowed values</em></a></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h5 id="service-instances-list-fields">Service Instances List Fields</h5>

<table><thead>
<tr>
<th>Resource</th>
<th>Allowed Keys</th>
</tr>
</thead><tbody>
<tr>
<td>space</td>
<td><code class="prettyprint">guid</code>, <code class="prettyprint">name</code>, <code class="prettyprint">relationships.organization</code></td>
</tr>
<tr>
<td>space.organization</td>
<td><code class="prettyprint">guid</code>, <code class="prettyprint">name</code></td>
</tr>
<tr>
<td>service_plan</td>
<td><code class="prettyprint">guid</code>, <code class="prettyprint">name</code>, <code class="prettyprint">relationships.service_offering</code></td>
</tr>
<tr>
<td>service_plan.service_offering</td>
<td><code class="prettyprint">guid</code>, <code class="prettyprint">name</code>, <code class="prettyprint">description</code>, <code class="prettyprint">documentation_url</code>, <code class="prettyprint">tags</code>, <code class="prettyprint">relationships.service_broker</code></td>
</tr>
<tr>
<td>service_plan.service_offering.service_broker</td>
<td><code class="prettyprint">guid</code>, <code class="prettyprint">name</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="delete-a-service-instance">Delete a service instance</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response for User-provided Service Instances
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response for Managed Service Instance
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/af5c57f6-8769-41fa-a499-2c84ed896788</span>
</code></pre></div>
<p>This endpoint deletes a service instance and any associated service credential
bindings or service route bindings. The service instance is removed from all
spaces where it is available.</p>

<p>User provided service instances do not require interactions with service brokers,
therefore the API will respond synchronously to the delete request.</p>

<p>For managed service instances, the API will respond asynchronously.
If a service credential binding or service route binding cannot be deleted
synchronously, then the operation will fail, and the deletion of the binding
will continue in the background. The operation can be retried until it is successful.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/service_instances/:guid</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>purge</strong></td>
<td><em>boolean</em></td>
<td>If <code class="prettyprint">true</code>, deletes the service instance and all associated resources without any interaction with the service broker.</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td>Can only purge service instances from space-scoped brokers</td>
</tr>
</tbody></table>
<h3 id="update-a-service-instance">Update a service instance</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request for Managed Service Instance
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "my_service_instance",
    "parameters": {
      "foo": "bar",
      "baz": "qux"
    },
    "tags": ["foo", "bar", "baz"],
    "relationships": {
      "service_plan": {
        "data": {
          "guid": "f2b6ba9c-a4d2-11ea-8ae6-48bf6bec2d78"
        }
      }
    },
    "metadata": {
      "annotations": {
        "note": "detailed information"
      },
      "labels": {
        "key": "value"
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Request for Managed Service Instance Upgrade (maintenance_info update)
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "maintenance_info": {
      "version": "2.1.1"
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Synchronous Response for Managed Service Instance:
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-managed-instance"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"managed"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maintenance_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"upgrade_available"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dashboard_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://service-broker.example.org/dashboard"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:32Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5358d122-638e-11ea-afca-bf6e756684ac"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"key"</span><span class="p">:</span><span class="s2">"value"</span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"note"</span><span class="p">:</span><span class="s2">"detailed information"</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_plans/5358d122-638e-11ea-afca-bf6e756684ac"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/c89b3280-fe8d-4aa0-a42e-44465bb1c61c/parameters"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shared_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/c89b3280-fe8d-4aa0-a42e-44465bb1c61c/relationships/shared_spaces"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_credential_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings?service_instance_guids=c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_route_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings?service_instance_guids=c89b3280-fe8d-4aa0-a42e-44465bb1c61c"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Asynchronous Response for Managed Service Instance:
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/af5c57f6-8769-41fa-a499-2c84ed896788</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Request for User-Provided Service Instance
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "my_service_instance",
    "credentials": {
      "foo": "bar",
      "baz": "qux"
    },
    "tags": ["foo", "bar", "baz"],
    "syslog_drain_url": "https://syslog.com/drain",
    "route_service_url": "https://route.com/service",
    "metadata": {
      "annotations": {
        "foo": "bar"
      },
      "labels": {
        "baz": "qux"
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response for User-Provided Service Instance
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:56:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:56:08Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:32Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-user-provided-instance"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"sql"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user-provided"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"syslog_drain_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://logs.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"route_service_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://routes.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"baz"</span><span class="p">:</span><span class="s2">"qux"</span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"foo"</span><span class="p">:</span><span class="s2">"bar"</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/5a84d315-9513-4d74-95e5-f6a5501eeef7"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/88ce23e5-27c3-4381-a2df-32a28ec43133/credentials"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_credential_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings?service_instance_guids=88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_route_bindings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings?service_instance_guids=88ce23e5-27c3-4381-a2df-32a28ec43133"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/service_instances/:guid</code></p>

<h4 id="optional-parameters-for-managed-service-instances">Optional parameters for managed service instances</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the service instance</td>
</tr>
<tr>
<td><strong>tags</strong></td>
<td><em>list of strings</em></td>
<td>Tags are used by apps to identify service instances; they are shown in the app VCAP_SERVICES env</td>
</tr>
<tr>
<td><strong>parameters</strong></td>
<td><em>object</em></td>
<td>A JSON object that is passed to the service broker</td>
</tr>
<tr>
<td><strong>relationships.service_plan</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The service plan from which to create the service instance</td>
</tr>
<tr>
<td><strong>maintenance_info</strong></td>
<td><em><a href="#the-maintenance-info-object-for-service-instances">maintenance_info object</a></em></td>
<td>If provided, must have the <code class="prettyprint">version</code> field; <code class="prettyprint">version</code> must be a semantic version value and it must match the <code class="prettyprint">version</code> in the <code class="prettyprint">maintenance_info</code> for the service instance plan in the updated broker catalog. Any other value for <code class="prettyprint">version</code> will cause a <code class="prettyprint">MaintenanceInfoConflict</code> error</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service_instance</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service_instance</td>
</tr>
</tbody></table>

<p>Some updates can be performed entirely within the Cloud Controller in which case the response is synchronous.
Some updates require communication with the service broker, in which case the response will be asynchronous.
The response will be asynchronous if any of these parameters are specified:</p>

<ul>
<li><code class="prettyprint">parameters</code></li>
<li><code class="prettyprint">service_plan</code></li>
<li><code class="prettyprint">maintenance_info</code></li>
<li><code class="prettyprint">name</code> - when the service offering has <code class="prettyprint">allow_context_updates</code> feature enabled</li>
</ul>

<p>Otherwise the response will be synchronous.</p>

<h4 id="optional-parameters-for-user-provided-service-instances">Optional parameters for user-provided service instances</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the service instance</td>
</tr>
<tr>
<td><strong>tags</strong></td>
<td><em>list of strings</em></td>
<td>Tags are used by apps to identify service instances; they are shown in the app VCAP_SERVICES env</td>
</tr>
<tr>
<td><strong>credentials</strong></td>
<td><em>object</em></td>
<td>A JSON object that is made available to apps bound to this service instance</td>
</tr>
<tr>
<td><strong>syslog_drain_url</strong></td>
<td><em>string</em></td>
<td>URL to which logs for bound applications will be streamed</td>
</tr>
<tr>
<td><strong>route_service_url</strong></td>
<td><em>string</em></td>
<td>URL to which requests for bound routes will be forwarded; must use the <code class="prettyprint">https</code> protocol</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service_instance</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service_instance</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="get-credentials-for-a-user-provided-service-instance">Get credentials for a user-provided service instance</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances/[guid]/credentials"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-username"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"super-secret"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"other"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credential"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves the credentials for a user-provided service instance.
This endpoint is not available for managed service instances.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_instances/:guid/credentials</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
</tbody></table>
<h3 id="get-usage-summary-in-shared-spaces">Get usage summary in shared spaces</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances/[guid]/relationships/shared_spaces/usage_summary"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"usage_summary"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68d54d31-9b3a-463b-ba94-e8e4c32edbac"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"bound_app_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"bound_app_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/bdeg4371-cbd3-4155-b156-dc0c2a431b4c/relationships/shared_spaces/usage_summary"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shared_spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/bdeg4371-cbd3-4155-b156-dc0c2a431b4c/relationships/shared_spaces"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/bdeg4371-cbd3-4155-b156-dc0c2a431b4c"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint returns the number of bound apps in spaces where the service instance has been shared to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_instances/:guid/relationships/shared_spaces/usage_summary</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-shared-spaces-relationship">List shared spaces relationship</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances/[guid]/relationships/shared_spaces"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68d54d31-9b3a-463b-ba94-e8e4c32edbac"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/bdeg4371-cbd3-4155-b156-dc0c2a431b4c/relationships/shared_spaces"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint lists the spaces that the service instance has been shared to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_instances/:guid/relationships/shared_spaces</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>fields</strong></td>
<td><a href="#fields-parameter"><em>fields parameter</em></a></td>
<td><a href="#shared-spaces-list-fields"><em>Allowed values</em></a></td>
</tr>
</tbody></table>

<h5 id="shared-spaces-list-fields">Shared Spaces List Fields</h5>

<table><thead>
<tr>
<th>Resource</th>
<th>Allowed Keys</th>
</tr>
</thead><tbody>
<tr>
<td>space</td>
<td><code class="prettyprint">guid</code>, <code class="prettyprint">name</code>, <code class="prettyprint">relationships.organization</code></td>
</tr>
<tr>
<td>space.organization</td>
<td><code class="prettyprint">guid</code>, <code class="prettyprint">name</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="get-parameters-for-a-managed-service-instance">Get parameters for a managed service instance</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances/[guid]/parameters"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"key_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"key_2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_2"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Queries the Service Broker for the parameters associated with this service instance.
The broker catalog must have enabled the <code class="prettyprint">instances_retrievable</code> feature for the Service Offering.
Check the <a href="#the-service-offering-object">Service Offering object</a> for the value of this feature flag.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_instances/:guid/parameters</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
</tbody></table>
<h3 id="get-permissions-for-a-service-instance">Get permissions for a service instance</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances/[guid]/permissions"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"read"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"manage"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Get the current user&rsquo;s permissions for the given service instance. If a user can get a service instance then they can &lsquo;read&rsquo; it. Users who can update a service instance can &lsquo;manage&rsquo; it.</p>

<p>This endpoint&rsquo;s primary purpose is to enable third-party service dashboards to determine the permissions of a given Cloud Foundry user that has authenticated with the dashboard via single sign-on (SSO). For more information, see the Cloud Foundry documentation on <a href="https://docs.cloudfoundry.org/services/dashboard-sso.html">Dashboard Single Sign-On</a>.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_instances/:guid/permissions</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="share-a-service-instance-to-other-spaces">Share a service instance to other spaces</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances/[guid]/relationships/shared_spaces"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "data": [
      { "guid":"space-guid-1" },
      { "guid":"space-guid-2" }
    ]
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68d54d31-9b3a-463b-ba94-e8e4c32edbac"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b19f6525-cbd3-4155-b156-dc0c2a431b4c"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/bdeg4371-cbd3-4155-b156-dc0c2a431b4c/relationships/shared_spaces"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint shares the service instance with the specified spaces.
In order to share into a space the requesting user must be a space developer in the target space.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/service_instances/:guid/relationships/shared_spaces</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>Shared space relationships; each space will have this service instance shared to it</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="unshare-a-service-instance-from-another-space">Unshare a service instance from another space</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_instances/[guid]/relationships/shared_spaces/[space_guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div>
<p>This endpoint unshares the service instance from the specified space. This will automatically unbind any applications bound to this service instance in the specified space.
Unsharing a service instance from a space will not delete any service keys.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/service_instances/:guid/relationships/shared_spaces/:space_guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h2 id="service-credential-binding">Service Credential Binding</h2>

<p>Service credential bindings are used to make the details of the connection to a service instance available to an app or a developer.</p>

<p>Service credential bindings can be of type <code class="prettyprint">app</code> or <code class="prettyprint">key</code>.</p>

<p>A service credential binding is of type <code class="prettyprint">app</code> when it is a binding between a <a href="#service-instances">service instance</a> and an <a href="#apps">application</a>
Not all services support this binding, as some services deliver value to users directly without integration with an application. 
Field <code class="prettyprint">broker_catalog.features.bindable</code> from <a href="#the-service-plan-object">service plan</a> of the service instance can be used to determine if it is bindable.</p>

<p>A service credential binding is of type <code class="prettyprint">key</code> when it only retrieves the details of the service instance and makes them available to the developer. </p>
<h3 id="the-service-credential-binding-object">The service credential binding object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example App Service Credential Binding object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"baz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qux"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3/details"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3/parameters"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Key Service Credential Binding object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"key"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"baz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qux"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3/details"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3/parameters"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the service credential binding</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the binding. <code class="prettyprint">null</code> when it&rsquo;s not defined.</td>
</tr>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Either <code class="prettyprint">app</code> or <code class="prettyprint">key</code></td>
</tr>
<tr>
<td><strong>last_operation</strong></td>
<td><em><a href="#the-last-operation-object-for-service-credential-binding">last operation object</a></em></td>
<td>The last operation of this binding</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service credential binding</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service credential binding</td>
</tr>
<tr>
<td><strong>relationships.service_instance</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The service instance that this binding is originated from</td>
</tr>
<tr>
<td><strong>relationships.app</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The app using this binding; omitted for <code class="prettyprint">key</code> bindings</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>

<h4 id="the-last-operation-object-for-service-credential-binding">The last operation object for service credential binding</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td><em>string</em></td>
<td>Either <code class="prettyprint">create</code> or <code class="prettyprint">delete</code></td>
</tr>
<tr>
<td><strong>state</strong></td>
<td><em>string</em></td>
<td>Either <code class="prettyprint">initial</code>, <code class="prettyprint">in progress</code>, <code class="prettyprint">succeeded</code>, or <code class="prettyprint">failed</code><br><em>Note: The <code class="prettyprint">initial</code> state indicates that no response from the service broker has been received yet.</em></td>
</tr>
<tr>
<td><strong>description</strong></td>
<td><em>string</em></td>
<td>A textual explanation associated with this state</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the operation started</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the operation was last updated</td>
</tr>
</tbody></table>
<h3 id="create-a-service-credential-binding">Create a service credential binding</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request to create an App Credential Binding
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_credential_bindings"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "type": "app",
    "name": "some-binding-name",
    "relationships": {
      "service_instance": {
        "data": {
          "guid": "7304bc3c-7010-11ea-8840-48bf6bec2d78"
        }
      },
      "app": {
        "data": {
          "guid": "e0e4417c-74ee-11ea-a604-48bf6bec2d78"
        }
      }
    },
    "parameters": {
      "key1": "value1",
      "key2": "value2"
    },
    "metadata": {
      "labels": {
        "foo": "bar"
      },
      "annotations": {
        "baz": "qux"
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Request to create a Key Credential Binding
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_credential_bindings"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "type": "key",
    "name": "some-binding-name",
    "relationships": {
      "service_instance": {
        "data": {
          "guid": "7304bc3c-7010-11ea-8840-48bf6bec2d78"
        }
      }
    },
    "parameters": {
      "key1": "value1",
      "key2": "value2"
    },
    "metadata": {
      "labels": {
        "foo": "bar"
      },
      "annotations": {
        "baz": "qux"
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response for a Managed Service Instance
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/af5c57f6-8769-41fa-a499-2c84ed896788</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response for a User-Provided Service Instance
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"baz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qux"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3/details"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3/parameters"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint creates a new service credential binding. Service credential bindings can be of type <code class="prettyprint">app</code> or <code class="prettyprint">key</code>; <code class="prettyprint">key</code> is only
valid for managed service instances.</p>

<p>If failures occur when creating a service credential binding for a managed service instances, the API might execute orphan mitigation steps
accordingly to cases outlined in the <a href="https://github.com/openservicebrokerapi/servicebroker/blob/master/spec.md#orphan-mitigation">OSBAPI specification</a></p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/service_credential_bindings</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td>string</td>
<td>Type of the service credential binding. Valid values are <code class="prettyprint">key</code> and <code class="prettyprint">app</code></td>
</tr>
<tr>
<td><strong>relationships.service_instance</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The service instance to be bound</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>string</td>
<td>Name of the service credential binding. <code class="prettyprint">name</code> is optional when the type is <code class="prettyprint">app</code></td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>relationships.app</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The app to be bound. Required when type is <code class="prettyprint">app</code></td>
</tr>
<tr>
<td><strong>parameters</strong></td>
<td><em>object</em></td>
<td>A JSON object that is passed to the service broker</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service credential binding</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service credential binding</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Only allowed to create bindings of type <code class="prettyprint">app</code>.</td>
</tr>
</tbody></table>
<h3 id="get-a-service-credential-binding">Get a service credential binding</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_credential_bindings/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example App Credential Binding Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"baz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qux"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3/details"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3/parameters"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Key Credential Binding Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"key"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"baz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qux"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3/details"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3/parameters"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the service credential binding by GUID.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_credential_bindings/:guid</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>include</strong></td>
<td><em>list of strings</em></td>
<td>Optionally include a list of unique related resources in the response. Valid values are: <code class="prettyprint">app</code>, <code class="prettyprint">service_instance</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-service-credential-bindings">List service credential bindings</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_credential_bindings </span><span class="se">\</span><span class="s2">
  -X GET </span><span class="se">\</span><span class="s2">
  -H "</span>Authorization: bearer <span class="o">[</span>token]<span class="s2">"
</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-binding-name"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"baz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qux"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3/details"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7aa37bad-6ccb-4ef9-ba48-9ce3a91b2b62"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-key-name"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"key"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/7aa37bad-6ccb-4ef9-ba48-9ce3a91b2b62"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/7aa37bad-6ccb-4ef9-ba48-9ce3a91b2b62/details"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/8bf356j3-9e18-45b1-3333-124163f31f9e"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the service credential bindings the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_credential_bindings</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service credential binding names to filter by</td>
</tr>
<tr>
<td><strong>service_instance_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service instance guids to filter by</td>
</tr>
<tr>
<td><strong>service_instance_names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service instance names to filter by</td>
</tr>
<tr>
<td><strong>app_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of app guids to filter by</td>
</tr>
<tr>
<td><strong>app_names</strong></td>
<td><em>strings</em></td>
<td>Comma-delimited list of app names to filter by</td>
</tr>
<tr>
<td><strong>service_plan_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service plan guids to filter by</td>
</tr>
<tr>
<td><strong>service_plan_names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service plan names to filter by</td>
</tr>
<tr>
<td><strong>service_offering_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service offering guids to filter by</td>
</tr>
<tr>
<td><strong>service_offering_names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service offering names to filter by</td>
</tr>
<tr>
<td><strong>type</strong></td>
<td><em>list of strings</em></td>
<td>Type of credential binding to filter by. Valid values are: <code class="prettyprint">app</code> or <code class="prettyprint">key</code></td>
</tr>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service route binding guids to filter by</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>include</strong></td>
<td><em>list of strings</em></td>
<td>Optionally include a list of unique related resources in the response. Valid values are: <code class="prettyprint">app</code>, <code class="prettyprint">service_instance</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending<br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code>, and <code class="prettyprint">name</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="update-a-service-credential-binding">Update a service credential binding</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_credential_bindings/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "metadata": {
      "labels": {"foo": "bar"},
      "annotations": {"baz": "qux"}
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"baz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qux"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3/details"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_credential_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3/parameters"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint updates a service credential binding with labels and annotations.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/service_credential_bindings/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service credential binding</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service credential binding</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="delete-a-service-credential-binding">Delete a service credential binding</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_credential_bindings/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response for User-provided Service Instances
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response for Managed Service Instance
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/af5c57f6-8769-41fa-a499-2c84ed896788</span>
</code></pre></div>
<p>This endpoint deletes a service credential binding. When deleting credential bindings originated from user provided 
service instances, the delete operation does not require interactions with service brokers, therefore the API will 
respond synchronously to the delete request.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/service_credential_bindings/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Only allowed to delete bindings of type <code class="prettyprint">app</code>.</td>
</tr>
</tbody></table>
<h3 id="get-a-service-credential-binding-details">Get a service credential binding details</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_credential_bindings/[guid]/details"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Credential Binding Details Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"connection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mydb://user@password:example.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"syslog_drain_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://syslog.example.com/drain"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume_mounts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"/vcap/data"</span><span class="p">,</span><span class="w"> </span><span class="s2">"store"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the service credential binding details.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_credential_bindings/:guid/details</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="get-parameters-for-a-service-credential-binding">Get parameters for a service credential binding</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_credential_bindings/[guid]/parameters"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"foz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"baz"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Queries the Service Broker for the parameters associated with this service credential binding.
The broker catalog must have enabled the <code class="prettyprint">bindings_retrievable</code> feature for the Service Offering.
Check the <a href="#the-service-offering-object">Service Offering object</a> for the value of this feature flag.
This endpoint is not available for User-Provided Service Instances.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_credential_bindings/:guid/parameters</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h2 id="service-route-binding">Service Route Binding</h2>

<p>Service route bindings are relations between a service instance and a route.</p>

<p>Not all service instances support route binding. 
In order to bind to a managed service instance, the service instance should be created from a service offering that has requires route forwarding (<code class="prettyprint">requires=[route_forwarding]</code>). 
In order to bind to a user-provided service instance, the service instance must have <code class="prettyprint">route_service_url</code> set.</p>
<h3 id="the-service-route-binding-object">The service route binding object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Service Route Binding object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"route_service_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://route-service-url.io"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:32Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"baz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qux"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings/b3536566-63e2-428f-8f87-a1b99864ada6/parameters"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the service route binding</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>route_service_url</strong></td>
<td><em>string</em></td>
<td>The URL for the route service</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service route binding</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service route binding</td>
</tr>
<tr>
<td><strong>relationships.service_instance</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The service instance that the route is bound to</td>
</tr>
<tr>
<td><strong>relationships.route</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The route that the service instance is bound to</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="get-a-service-route-binding">Get a service route binding</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_route_bindings/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"route_service_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://route-service-url.io"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:32Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"baz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qux"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings/b3536566-63e2-428f-8f87-a1b99864ada6/parameters"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the service route binding by GUID.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_route_bindings/:guid</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>include</strong></td>
<td><em>list of strings</em></td>
<td>Optionally include a list of unique related resources in the response. Valid values are: <code class="prettyprint">route</code>, <code class="prettyprint">service_instance</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-service-route-bindings">List service route bindings</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_route_bindings </span><span class="se">\</span><span class="s2">
  -X GET </span><span class="se">\</span><span class="s2">
  -H "</span>Authorization: bearer <span class="o">[</span>token]<span class="s2">"
</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings?page=1&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings?page=2&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings?page=2&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4ac1a475-0f4d-4e4b-8ff6-957c94f68211"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"route_service_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://some-route-1.api.example.org"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-09-08T08:55:59Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-09-08T08:55:59Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"baz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qux"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39903ed2-6476-4c78-843a-0195f5fc4ccd"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15697508-cb68-4d88-9f19-85fc53851571"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings/4ac1a475-0f4d-4e4b-8ff6-957c94f68211"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/39903ed2-6476-4c78-843a-0195f5fc4ccd"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/15697508-cb68-4d88-9f19-85fc53851571"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings/b3536566-63e2-428f-8f87-a1b99864ada6/parameters"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bdf63c4f-85af-4c20-bea9-e9def7d57dab"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"route_service_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://some-route-2.api.example.org"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-09-08T09:13:51Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-09-08T09:13:51Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"baz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qux"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f957dc7c-46d1-4a3f-973d-71ce5fdec788"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"75ebe2a1-04b0-407b-b33c-733388fc7aa4"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings/bdf63c4f-85af-4c20-bea9-e9def7d57dab"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/f957dc7c-46d1-4a3f-973d-71ce5fdec788"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/75ebe2a1-04b0-407b-b33c-733388fc7aa4"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the service route bindings the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_route_bindings</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>route_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of route guids to filter by</td>
</tr>
<tr>
<td><strong>service_instance_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service instance guids to filter by</td>
</tr>
<tr>
<td><strong>service_instance_names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service instance names to filter by</td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service route binding guids to filter by</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>include</strong></td>
<td><em>list of strings</em></td>
<td>Optionally include a list of unique related resources in the response. Valid values are: <code class="prettyprint">route</code>, <code class="prettyprint">service_instance</code></td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending<br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="create-a-service-route-binding">Create a service route binding</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_route_bindings"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "metadata": {
      "annotations": {
        "foo": "bar"
      },
      "labels": {
        "baz": "qux"
      }
    },
    "relationships": {
      "route": {
        "data": {
          "guid": "7304bc3c-7010-11ea-8840-48bf6bec2d78"
        }
      },
      "service_instance": {
        "data": {
          "guid": "e0e4417c-74ee-11ea-a604-48bf6bec2d78"
        }
      }
    },
    "parameters": {
      "key1": "value1",
      "key2": "value2"
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response for Managed Service Instance
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/af5c57f6-8769-41fa-a499-2c84ed896788</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response for User-Provided Service Instance
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"route_service_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://route-service-url.io"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:32Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"baz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qux"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings/b3536566-63e2-428f-8f87-a1b99864ada6/parameters"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint creates a new route service binding. The service instance and the route
must be in the same space.</p>

<p>To bind a route to a user-provided service instance, the service instance must
have the <code class="prettyprint">route_service_url</code> property set.</p>

<p>To bind a route to a managed service instance, the service offering must be bindable,
and the service offering must have <code class="prettyprint">route_forwarding</code> set in the <code class="prettyprint">requires</code> property.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/service_route_bindings</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>relationships.route</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The route to bind</td>
</tr>
<tr>
<td><strong>relationships.service_instance</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The service instance to bind</td>
</tr>
</tbody></table>

<h4 id="optional-parameters-for-managed-service-instances">Optional parameters for managed service instances</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>parameters</strong></td>
<td><em>object</em></td>
<td>A JSON object that is passed to the service broker</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service route binding</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service route binding</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="update-a-service-route-binding">Update a service route binding</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_route_bindings/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "metadata": {
      "labels": {"key": "value"},
      "annotations": {"note": "detailed information"}
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T17:02:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"route_service_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://route-service-url.io"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:32Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-10T15:49:29Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"baz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qux"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_instances/8bfe4c1b-9e18-45b1-83be-124163f31f9e"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/routes/74f7c078-0934-470f-9883-4fddss5b8f13"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_route_bindings/b3536566-63e2-428f-8f87-a1b99864ada6/parameters"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint updates a service route binding with labels and annotations.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/service_route_bindings/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the service route binding</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the service route binding</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="delete-a-service-route-binding">Delete a service route binding</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_route_bindings/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response for User-provided Service Instances
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response for Managed Service Instance
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/af5c57f6-8769-41fa-a499-2c84ed896788</span>
</code></pre></div>
<p>This endpoint deletes a service route binding. When deleting route bindings originating from user provided
service instances, the delete operation does not require interactions with service brokers, therefore the API will 
respond synchronously to the delete request. Consequently, deleting route bindings from managed service instances
responds with a job which can be used to track the progress of the delete operation.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/service_route_bindings/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="get-parameters-for-a-route-binding">Get parameters for a route binding</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_route_bindings/[guid]/parameters"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"foz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"baz"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Queries the Service Broker for the parameters associated with this service route binding.
The broker catalog must have enabled the <code class="prettyprint">bindings_retrievable</code> feature for the Service Offering.
Check the <a href="#the-service-offering-object">Service Offering object</a> for the value of this feature flag.
This endpoint is not available for User-Provided Service Instances.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_route_bindings/:guid/parameters</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h2 id="service-usage-events">Service Usage Events</h2>

<p>Service usage events are a record of changes in the usage of services. For
example, service usage events are recorded when a service instance is created,
updated, and deleted. They may contain information about the service instance in
question and the associated space, service broker, and service offering.</p>

<p>Usage events are typically used by billing and chargeback applications.</p>
<h3 id="the-service-usage-event-object">The service usage event object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Service Usage Event object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c9976002-96f4-435a-888e-db1e1178df62"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-28T12:34:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-28T12:34:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-5e28f12f-9d80-473e-b826-537b148eb338"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1664"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-036444f4-f2f5-4ea8-a353-e73330ca0f0a"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-f93250f7-7ef5-4b02-8d33-353919ce8358"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1982"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"managed_service_instance"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"service_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-e9d2d5a0-69a6-46ef-bac5-43f3ed177614"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1983"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"service_offering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-34916716-31d7-40c1-9afd-f312996c9654"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"label-64"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"service_broker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-7cc11646-bf38-4f4e-b6e0-9581916a74d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-2929"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_usage_events/c9976002-96f4-435a-888e-db1e1178df62"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the event</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the event occurred</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Identical to <code class="prettyprint">created_at</code> (events are created, never updated)</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Current state of the service that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>space.guid</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Unique identifier of the space that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>space.name</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Name of the space that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>organization.guid</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Unique identifier of the org that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>service_instance.guid</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Unique identifier of the service instance that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>service_instance.name</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Name of the service instance that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>service_instance.type</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Type of the service instance that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>service_plan.guid</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Unique identifier of the service plan that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>service_plan.name</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Name of the service plan that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>service_offering.guid</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Unique identifier of the service offering that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>service_offering.name</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Name of the service offering that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>service_broker.guid</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Unique identifier of the service broker that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>service_broker.name</strong></td>
<td><em>string</em> or <code class="prettyprint">null</code></td>
<td>Name of the service broker that this event pertains to, if applicable</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="get-a-service-usage-event">Get a service usage event</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_usage_events/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c9976002-96f4-435a-888e-db1e1178df62"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-28T12:34:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-28T12:34:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-5e28f12f-9d80-473e-b826-537b148eb338"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1664"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-036444f4-f2f5-4ea8-a353-e73330ca0f0a"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-f93250f7-7ef5-4b02-8d33-353919ce8358"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1982"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"managed_service_instance"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"service_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-e9d2d5a0-69a6-46ef-bac5-43f3ed177614"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1983"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"service_offering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-34916716-31d7-40c1-9afd-f312996c9654"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"label-64"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"service_broker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-7cc11646-bf38-4f4e-b6e0-9581916a74d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-2929"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_usage_events/c9976002-96f4-435a-888e-db1e1178df62"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve a service usage event.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_usage_events/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
</tbody></table>
<h3 id="list-service-usage-events">List service usage events</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_usage_events"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_usage_events?page=1&amp;per_page=1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_usage_events?page=2&amp;per_page=1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_usage_events?page=2&amp;per_page=1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c9976002-96f4-435a-888e-db1e1178df62"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-28T12:34:56Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-28T12:34:56Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-5e28f12f-9d80-473e-b826-537b148eb338"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1664"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-036444f4-f2f5-4ea8-a353-e73330ca0f0a"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"service_instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-f93250f7-7ef5-4b02-8d33-353919ce8358"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1982"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"managed_service_instance"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"service_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-e9d2d5a0-69a6-46ef-bac5-43f3ed177614"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-1983"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"service_offering"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-34916716-31d7-40c1-9afd-f312996c9654"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"label-64"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"service_broker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guid-7cc11646-bf38-4f4e-b6e0-9581916a74d9"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-2929"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/service_usage_events/c9976002-96f4-435a-888e-db1e1178df62"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all service usage events the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/service_usage_events</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending; <br>valid value is <code class="prettyprint">created_at</code></td>
</tr>
<tr>
<td><strong>after_guid</strong></td>
<td><em>string</em></td>
<td>Filters out events before and including the event with the given guid</td>
</tr>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of usage event guids to filter by</td>
</tr>
<tr>
<td><strong>service_instance_types</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service instance types to filter by; valid values are <code class="prettyprint">managed_service_instance</code> and <code class="prettyprint">user_provided_service_instance</code></td>
</tr>
<tr>
<td><strong>service_offering_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of service offering guids to filter by</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="purge-and-seed-service-usage-events">Purge and seed service usage events</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/service_usage_events/actions/destructively_purge_all_and_reseed"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

</code></pre></div>
<p>Destroys all existing events. Populates new usage events, one for each existing service instance. All populated events will have a <code class="prettyprint">created_at</code> value of current time. There is the potential race condition if service instances are currently being created or deleted. The seeded usage events will have the same guid as the service instance.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/service_usage_events/actions/destructively_purge_all_and_reseed</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h2 id="sidecars">Sidecars</h2>

<p>Sidecars are additional operating system processes that are run in the same container as a <a href="#processes">process</a>.</p>

<h4 id="use-cases-for-sidecars">Use cases for sidecars</h4>

<p>Sidecars are useful for any app processes that need to communicate with another within the same container or are otherwise dependent on each other. Some use cases are:</p>

<ul>
<li>Two or more processes that require access to a shared file</li>
<li>An Application Performance Monitoring (APM) tool that attaches to a dependent app&rsquo;s processes</li>
<li>Two or more processes that communicate via a local socket</li>
</ul>

<h4 id="steps-to-create-a-sidecar">Steps to create a sidecar</h4>

<p>The recommended way to create sidecars for your app is with a <a href="#manifests">manifest</a>.</p>
<div class="highlight"><pre class="highlight yaml"><code> <span class="na">sidecars</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">authenticator</span>
    <span class="na">process_types</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">web'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">worker'</span> <span class="pi">]</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">bundle exec run-authenticator</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">performance monitor</span>
    <span class="na">process_types</span><span class="pi">:</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">web'</span> <span class="pi">]</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">bundle exec run-performance-monitor</span>
    <span class="na">memory</span><span class="pi">:</span> <span class="s">128M</span>
</code></pre></div>
<ul>
<li><strong>name</strong> is a user defined identifier (unique per app)</li>
<li><strong>process_types</strong> is a list of app processes the sidecar will attach to. You can attach multiple sidecars to each process type your app uses</li>
<li><strong>command</strong> is the command used to start the sidecar</li>
<li><strong>memory</strong> is the memory reserved for the sidecar<sup>[1]</sup></li>
</ul>

<p><sup>1 Applies for Java apps.  If you do not reserve memory for the sidecar, the JVM will consume all of the memory in the app container.  This value must be less thatn the process&rsquo; reserved memory.</sup></p>

<h4 id="current-limitations">Current limitations</h4>

<ul>
<li>Start and stop order of app processes and their sidecars is undefined</li>
<li>App processes and sidecar processes are codependent: if either crashes or exits, the other will as well</li>
<li>Sidecars are currently not independently scalable (memory / disk) and share resources with the main app process and other sidecars within that container</li>
<li>Sidecars only support PID based health checks; HTTP health-checks for sidecars are not currently supported</li>
<li>This has only been tested on Linux based systems</li>
</ul>
<h3 id="the-sidecar-object">The sidecar object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Sidecar object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth-sidecar"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"web"</span><span class="p">,</span><span class="w"> </span><span class="s2">"worker"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
  </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the sidecar</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Human-readable name for the sidecar</td>
</tr>
<tr>
<td><strong>command</strong></td>
<td><em>string</em></td>
<td>The command used to start the sidecar</td>
</tr>
<tr>
<td><strong>process_types</strong></td>
<td><em>list of strings</em></td>
<td>A list of process types the sidecar applies to</td>
</tr>
<tr>
<td><strong>memory_in_mb</strong></td>
<td><em>integer</em></td>
<td>Reserved memory for sidecar</td>
</tr>
<tr>
<td><strong>origin</strong></td>
<td><em>string</em></td>
<td>Specifies whether the sidecar was created by the user or via the buildpack</td>
</tr>
<tr>
<td><strong>relationships.app</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The app the sidecar is associated with</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
</tbody></table>
<h3 id="create-a-sidecar-associated-with-an-app">Create a sidecar associated with an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/sidecars"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "auth-sidecar",
    "command": "bundle exec rackup",
    "process_types": ["web", "worker"],
    "memory_in_mb": 300
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth-sidecar"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"web"</span><span class="p">,</span><span class="w"> </span><span class="s2">"worker"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
  </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/apps/:guid/sidecars</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Human-readable name for the sidecar</td>
</tr>
<tr>
<td><strong>command</strong></td>
<td><em>string</em></td>
<td>The command used to start the sidecar</td>
</tr>
<tr>
<td><strong>process_types</strong></td>
<td><em>list of strings</em></td>
<td>A list of process types the sidecar applies to</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>memory_in_mb</strong></td>
<td><em>integer</em></td>
<td>Reserved memory for sidecar</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="get-a-sidecar">Get a sidecar</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/sidecars/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth-sidecar"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"web"</span><span class="p">,</span><span class="w"> </span><span class="s2">"worker"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
  </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/sidecars/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="update-a-sidecar">Update a sidecar</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/sidecars/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "auth-sidecar",
    "command": "bundle exec rackup",
    "process_types": ["web", "worker"],
    "memory_in_mb": 300
  }'</span>

</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth-sidecar"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"web"</span><span class="p">,</span><span class="w"> </span><span class="s2">"worker"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
  </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/sidecars/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Human-readable name for the sidecar</td>
</tr>
<tr>
<td><strong>command</strong></td>
<td><em>string</em></td>
<td>The command used to start the sidecar</td>
</tr>
<tr>
<td><strong>process_types</strong></td>
<td><em>list of strings</em></td>
<td>A list of process types the sidecar applies to</td>
</tr>
<tr>
<td><strong>memory_in_mb</strong></td>
<td><em>integer</em></td>
<td>Reserved memory for sidecar</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="list-sidecars-for-app">List sidecars for app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/sidecars"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/c7bd571f-dc48-406e-a503-3d871d659551/sidecars?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/c7bd571f-dc48-406e-a503-3d871d659551/sidecars?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/c7bd571f-dc48-406e-a503-3d871d659551/sidecars?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth-sidecar"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"web"</span><span class="p">,</span><span class="w"> </span><span class="s2">"worker"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
      </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41921"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"echo-sidecar"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"start-echo-server"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"web"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
      </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:59Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:59Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves all sidecars associated with a app.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/sidecars</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-sidecars-for-process">List sidecars for process</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/processes/[guid]/sidecars"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/sidecars?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/sidecars?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/processes/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/sidecars?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth-sidecar"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle exec rackup"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"web"</span><span class="p">,</span><span class="w"> </span><span class="s2">"worker"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
      </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41921"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"echo-sidecar"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"start-echo-server"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"process_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"web"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
      </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:59Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:59Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves all sidecars associated with a process.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/processes/:guid/sidecars</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="delete-a-sidecar">Delete a sidecar</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/sidecars/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/sidecars/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h2 id="spaces">Spaces</h2>

<p>Every application and service is scoped to a space. Each org contains at least one space. A space provides users with access to a shared location for application development, deployment, and maintenance.</p>
<h3 id="the-space-object">The space object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Space object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-space"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e00705b9-7b42-4561-ae97-2520399d2133"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920/features"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/e00705b9-7b42-4561-ae97-2520399d2133"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"apply_manifest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920/actions/apply_manifest"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the space</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the space</td>
</tr>
<tr>
<td><strong>relationships.organization</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The organization the space is contained in</td>
</tr>
<tr>
<td><strong>relationships.quota</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>The space quota applied to the space</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the space</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the space</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="create-a-space">Create a space</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "my-space",
    "relationships": {
      "organization": {
        "data": {
          "guid": "[org-guid]"
        }
      }
    }
  }'</span>

</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-space"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e00705b9-7b42-4561-ae97-2520399d2133"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920/features"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/e00705b9-7b42-4561-ae97-2520399d2133"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"apply_manifest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920/actions/apply_manifest"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/spaces</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Space name</td>
</tr>
<tr>
<td><strong>relationships.organization</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to an organization</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the space</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the space</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
</tbody></table>
<h3 id="get-a-space">Get a space</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-space"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e00705b9-7b42-4561-ae97-2520399d2133"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920/features"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/e00705b9-7b42-4561-ae97-2520399d2133"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"apply_manifest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920/actions/apply_manifest"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint retrieves the specified space object.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/spaces/:guid</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>include</strong></td>
<td><em>list of strings</em></td>
<td>Optionally include additional related resources in the response; <br>valid value is <code class="prettyprint">organization</code></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-spaces">List spaces</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e00705b9-7b42-4561-ae97-2520399d2133"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920/features"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/e00705b9-7b42-4561-ae97-2520399d2133"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"apply_manifest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920/actions/apply_manifest"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d4c91047-7b29-4fda-b7f9-04033e5c9c9f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-02T00:14:30Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-02T00:14:30Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b4ce91bd-31df-4b7d-8fd4-21a6b533276b"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6da62599-4890-4a08-8b6f-180a4f47e46b"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/d4c91047-7b29-4fda-b7f9-04033e5c9c9f"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/d4c91047-7b29-4fda-b7f9-04033e5c9c9f/features"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/b4ce91bd-31df-4b7d-8fd4-21a6b533276b"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/space_quotas/6da62599-4890-4a08-8b6f-180a4f47e46b"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"apply_manifest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/d4c91047-7b29-4fda-b7f9-04033e5c9c9/actions/apply_manifest"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all spaces the user has access to.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/spaces</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space names to filter by</td>
</tr>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space guids to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code>, <code class="prettyprint">name</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>include</strong></td>
<td><em>string</em></td>
<td>Optionally include a list of unique related resources in the response; <br>valid value is <code class="prettyprint">organization</code></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="update-a-space">Update a space</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.space/v3/spaces/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "name": "new-space-name" }'</span>

</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-01T01:33:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-space"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e00705b9-7b42-4561-ae97-2520399d2133"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"quota"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920/features"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/e00705b9-7b42-4561-ae97-2520399d2133"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"apply_manifest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920/actions/apply_manifest"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/spaces/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>New space name</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the space</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the space</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
</tbody></table>
<h3 id="delete-a-space">Delete a space</h3>

<p>When a space is deleted, the user roles associated with the space will be
deleted.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/spaces/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
</tbody></table>
<h3 id="get-assigned-isolation-segment">Get assigned isolation segment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces/[guid]/relationships/isolation_segment"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e4c91047-3b29-4fda-b7f9-04033e5a9c9f"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920/relationships/isolation_segment"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"related"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/e4c91047-3b29-4fda-b7f9-04033e5a9c9f"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/spaces/:guid/relationships/isolation_segment</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="manage-isolation-segment">Manage isolation segment</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces/[guid]/relationships/isolation_segment"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "data": {
      "guid": "[iso-seg-guid]"
    }
   }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e4c91047-3b29-4fda-b7f9-04033e5a9c9f"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/885735b5-aea4-4cf5-8e44-961af0e41920/relationships/isolation_segment"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"related"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/isolation_segments/e4c91047-3b29-4fda-b7f9-04033e5a9c9f"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint assigns an isolation segment to the space.
The isolation segment must be <a href="#entitle-organizations-for-an-isolation-segment">entitled</a> to the space&rsquo;s parent organization.</p>

<aside class="notice">Apps will not run in the newly assigned isolation segment until they are restarted.</aside>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/spaces/:guid/relationships/isolation_segment</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>Isolation segment relationship, apps will run in this isolation segment; set data to <code class="prettyprint">null</code> to remove the relationship</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
</tbody></table>
<h3 id="list-users-for-a-space">List users for a space</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces/:guid/users"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/:guid/users?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/:guid/users?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/:guid/users?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
     </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client_id"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"presentation_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client_id"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9da93b89-3f89-4f05-7238-8a2b123c79l9"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"presentation_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uaa"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/9da93b89-3f89-4f05-7238-8a2b123c79l9"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<p>Retrieve all users with a role in the specified space.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/spaces/:guid/users</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of user guids to filter by</td>
</tr>
<tr>
<td><strong>usernames</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of usernames to filter by. Mutually exclusive with <strong>partial_usernames</strong></td>
</tr>
<tr>
<td><strong>partial_usernames</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of strings to search by. When using this query parameter, all the users that contain the string provided in their username will be returned. Mutually exclusive with <strong>usernames</strong></td>
</tr>
<tr>
<td><strong>origins</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of user origins (user stores) to filter by, for example, users authenticated by UAA have the origin &ldquo;uaa&rdquo;; users authenticated by an LDAP provider have the origin &ldquo;ldap&rdquo;; when filtering by origins, usernames must be included</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending<br>Valid values are <code class="prettyprint">created_at</code> and <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h2 id="space-features">Space Features</h2>

<p>Space features are used to manage whether optional capabilities are enabled for
a given space.</p>

<p>Currently, the only space feature is SSH (<code class="prettyprint">ssh</code>), which controls whether
applications in the space may be accessed via SSH.</p>

<p><strong>Note</strong>: SSH must also be <a href="https://docs.cloudfoundry.org/running/config-ssh.html">enabled globally</a> and on the <a href="#supported-app-features">app</a>.</p>
<h3 id="the-space-feature-object">The space feature object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Space Feature object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ssh"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable SSHing into apps in the space."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the space feature</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td><em>string</em></td>
<td>Description of the space feature</td>
</tr>
<tr>
<td><strong>enabled</strong></td>
<td><em>boolean</em></td>
<td>Denotes whether or not the space feature is enabled</td>
</tr>
</tbody></table>
<h3 id="get-a-space-feature">Get a space feature</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces/[guid]/features/[name]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ssh"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable SSHing into apps in the space."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/spaces/:guid/features/:name</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="list-space-features">List space features</h3>

<p>This endpoint retrieves the list of features for the specified space. Currently, the only feature on spaces is the SSH feature.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces/[guid]/features"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ssh"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable SSHing into apps in the space."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/spaces/:guid/features</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Admin Read-Only</td>
</tr>
<tr>
<td>Global Auditor</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Auditor</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h3 id="update-space-features">Update space features</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/spaces/[guid]/features/[name]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
  <span class="nt">-d</span> <span class="s1">'{ "enabled": true }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ssh"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable SSHing into apps in the space."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/spaces/:guid/features/:name</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Org Manager</td>
</tr>
<tr>
<td>Space Manager</td>
</tr>
</tbody></table>
<h2 id="space-quotas">Space Quotas</h2>

<p>Space quotas are named sets of quotas. Space quota names are unique within an organization. For example, an organization may only have one space quota named &ldquo;production&rdquo;, but two organizations may have two distinct space quotas, both named &ldquo;production&rdquo;.</p>

<p>Only one space quota may be applied to a given space at any given time.</p>

<p>Space quotas cannot be used to bypass organization quotas. When the organization&rsquo;s quota and the space&rsquo;s quota specify a different values for a given resource, the more restrictive of the two is used. In the event of permissions, the more restrictive permission is used.</p>
<h3 id="the-space-quota-object">The space quota object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Space Quota object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f919ef8a-e333-472a-8172-baaf2c30d301"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-quixote"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">5120</span><span class="p">,</span><span class="w">
    </span><span class="nl">"per_process_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"per_app_tasks"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"paid_services_allowed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_service_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_service_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_routes"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_reserved_ports"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"45bb0018-c38e-44c9-86d6-155c76803600"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/space_quotas/f919ef8a-e333-472a-8172-baaf2c30d301"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the space quota</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the space quota was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the space quota was last updated</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the quota</td>
</tr>
<tr>
<td><strong>apps</strong></td>
<td><em>object</em></td>
<td>Quotas that affect applications and application sub-resources</td>
</tr>
<tr>
<td><strong>apps.per_process_memory_in_mb</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Maximum memory for a single process or task</td>
</tr>
<tr>
<td><strong>apps.total_memory_in_mb</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total memory allowed for all the started processes and running tasks in a space</td>
</tr>
<tr>
<td><strong>apps.total_instances</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total instances of all the started processes allowed in a space</td>
</tr>
<tr>
<td><strong>apps.log_rate_limit_in_bytes_per_second</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total log rate limit allowed for all the started processes and running tasks in an organization</td>
</tr>
<tr>
<td><strong>apps.per_app_tasks</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Maximum number of running tasks in a space</td>
</tr>
<tr>
<td><strong>services</strong></td>
<td><em>object</em></td>
<td>Quotas that affect services</td>
</tr>
<tr>
<td><strong>services.paid_services_allowed</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether instances of paid service plans can be created</td>
</tr>
<tr>
<td><strong>services.total_service_instances</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of service instances allowed in a space</td>
</tr>
<tr>
<td><strong>services.total_service_keys</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of service keys allowed in a space</td>
</tr>
<tr>
<td><strong>routes</strong></td>
<td><em>object</em></td>
<td>Quotas that affect routes</td>
</tr>
<tr>
<td><strong>routes.total_routes</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of routes allowed in a space</td>
</tr>
<tr>
<td><strong>routes.total_reserved_ports</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of ports that are reservable by routes in a space</td>
</tr>
<tr>
<td><strong>relationships.organization</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to the organization where the quota belongs</td>
</tr>
<tr>
<td><strong>relationships.spaces</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>A relationship to the spaces where the quota is applied</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="create-a-space-quota">Create a space quota</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/space_quotas"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
        "name": "production",
        "relationships": {
          "organization": {
            "data": {
              "guid": "[org-guid]"
            }
          }
        }
      }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f919ef8a-e333-472a-8172-baaf2c30d301"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-quixote"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">5120</span><span class="p">,</span><span class="w">
    </span><span class="nl">"per_process_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"per_app_tasks"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"paid_services_allowed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_service_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_service_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_routes"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_reserved_ports"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"45bb0018-c38e-44c9-86d6-155c76803600"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/space_quotas/f919ef8a-e333-472a-8172-baaf2c30d301"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint creates a new space quota scoped to a specific organization.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/space_quotas</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the quota</td>
</tr>
<tr>
<td><strong>relationships.organization</strong></td>
<td><a href="#to-one-relationships"><em>to-one relationship</em></a></td>
<td>A relationship to the organization where the quota belongs</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>apps</strong></td>
<td><em>object</em></td>
<td>Quotas that affect applications and application sub-resources</td>
<td></td>
</tr>
<tr>
<td><strong>apps.per_process_memory_in_mb</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Maximum memory for a single process or task</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>apps.total_memory_in_mb</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total memory allowed for all the started processes and running tasks in a space</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>apps.total_instances</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total instances of all the started processes allowed in a space</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>apps.log_rate_limit_in_bytes_per_second</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total log rate limit allowed for all the started processes and running tasks in an organization</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>apps.per_app_tasks</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Maximum number of running tasks in a space</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>services</strong></td>
<td><em>object</em></td>
<td>Quotas that affect services</td>
<td></td>
</tr>
<tr>
<td><strong>services.paid_services_allowed</strong></td>
<td><em>boolean</em></td>
<td>Specifies whether instances of paid service plans can be created</td>
<td>true</td>
</tr>
<tr>
<td><strong>services.total_service_instances</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of service instances allowed in a space</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>services.total_service_keys</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of service keys allowed in a space</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>routes</strong></td>
<td><em>object</em></td>
<td>Quotas that affect routes</td>
<td></td>
</tr>
<tr>
<td><strong>routes.total_routes</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of routes allowed in a space</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>routes.total_reserved_ports</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of ports that are reservable by routes in a space</td>
<td>null (infinite)</td>
</tr>
<tr>
<td><strong>relationships.spaces</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>A relationship to the spaces where the quota is applied</td>
<td></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td>Org managers can create space quotas in their managed organizations</td>
</tr>
</tbody></table>
<h3 id="get-a-space-quota">Get a space quota</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/space_quotas/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f919ef8a-e333-472a-8172-baaf2c30d301"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-quixote"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">5120</span><span class="p">,</span><span class="w">
    </span><span class="nl">"per_process_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"per_app_tasks"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"paid_services_allowed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_service_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_service_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_routes"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_reserved_ports"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"45bb0018-c38e-44c9-86d6-155c76803600"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/space_quotas/f919ef8a-e333-472a-8172-baaf2c30d301"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/space_quotas/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can only query space quotas owned by affiliated organizations</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Can only query space quotas applied to affiliated spaces</td>
</tr>
<tr>
<td>Space Developer</td>
<td>Can only query space quotas applied to affiliated spaces</td>
</tr>
<tr>
<td>Space Manager</td>
<td>Can only query space quotas applied to affiliated spaces</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Can only query space quotas applied to affiliated spaces</td>
</tr>
</tbody></table>

<p><strong>Note:</strong> Response will not show any space guids that a user would not otherwise be able to see (see <a href="#get-a-space">space view permissions</a>).</p>
<h3 id="list-space-quotas">List space quotas</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/space_quotas"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/space_quotas?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/space_quotas?page=1&amp;per_page=50"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f919ef8a-e333-472a-8172-baaf2c30d301"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-quixote"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"total_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">5120</span><span class="p">,</span><span class="w">
        </span><span class="nl">"per_process_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
        </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nl">"per_app_tasks"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"paid_services_allowed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_service_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_service_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"total_routes"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_reserved_ports"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"45bb0018-c38e-44c9-86d6-155c76803600"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/space_quotas/f919ef8a-e333-472a-8172-baaf2c30d301"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"554bcf32-7032-4cb0-92bc-738f9d2089d3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sancho-panza"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"total_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">2048</span><span class="p">,</span><span class="w">
        </span><span class="nl">"per_process_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
        </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"per_app_tasks"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"paid_services_allowed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_service_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_service_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"total_routes"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_reserved_ports"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/space_quotas/554bcf32-7032-4cb0-92bc-738f9d2089d3"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint lists all space quota resources that the user has permission to view (see <a href="#get-a-space-quota">getting a space quota</a>).</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/space_quotas</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space quota guids to filter by</td>
</tr>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space quota names to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>

<p><strong>Note:</strong> Space quotas in the response will not show any space guids that a user would not otherwise be able to see (see <a href="#get-a-space">space view permissions</a>).</p>
<h3 id="update-a-space-quota">Update a space quota</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/space_quotas/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "don-quixote",
    "apps": {
      "total_memory_in_mb": 5120,
      "per_process_memory_in_mb": 1024,
      "log_rate_limit_in_bytes_per_second": 1024,
      "total_instances": 10,
      "per_app_tasks": 5
    },
    "services": {
      "paid_services_allowed": true,
      "total_service_instances": 10,
      "total_service_keys": 20,
    },
    "routes": {
      "total_routes": 8,
      "total_reserved_ports": 4
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f919ef8a-e333-472a-8172-baaf2c30d301"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-quixote"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">5120</span><span class="p">,</span><span class="w">
    </span><span class="nl">"per_process_memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"per_app_tasks"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"paid_services_allowed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_service_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_service_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_routes"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_reserved_ports"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"45bb0018-c38e-44c9-86d6-155c76803600"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/space_quotas/f919ef8a-e333-472a-8172-baaf2c30d301"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/organizations/9b370018-c38e-44c9-86d6-155c76801104"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint will only update the parameters specified in the request body. Any unspecified parameters will retain their existing values.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/space_quotas/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the quota</td>
</tr>
<tr>
<td><strong>apps</strong></td>
<td><em>object</em></td>
<td>Quotas that affect applications and application sub-resources</td>
</tr>
<tr>
<td><strong>apps.per_process_memory_in_mb</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Maximum memory for a single process or task</td>
</tr>
<tr>
<td><strong>apps.total_memory_in_mb</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total memory of all the started processes and running tasks in a space</td>
</tr>
<tr>
<td><strong>apps.total_instances</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total instances of all the started processes in a space</td>
</tr>
<tr>
<td><strong>apps.log_rate_limit_in_bytes_per_second</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total log rate limit allowed for all the started processes and running tasks in an organization</td>
</tr>
<tr>
<td><strong>apps.per_app_tasks</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Maximum number of running tasks in a space</td>
</tr>
<tr>
<td><strong>services</strong></td>
<td><em>object</em></td>
<td>Quotas that affect services</td>
</tr>
<tr>
<td><strong>services.paid_services_allowed</strong></td>
<td><em>boolean</em></td>
<td>If instances of paid service plans can be created</td>
</tr>
<tr>
<td><strong>services.total_service_instances</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of service instances in a space</td>
</tr>
<tr>
<td><strong>services.total_service_keys</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of service keys in a space</td>
</tr>
<tr>
<td><strong>routes</strong></td>
<td><em>object</em></td>
<td>Quotas that affect routes</td>
</tr>
<tr>
<td><strong>routes.total_routes</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of routes that a space can have</td>
</tr>
<tr>
<td><strong>routes.total_reserved_ports</strong></td>
<td><em>integer</em> or <code class="prettyprint">null</code></td>
<td>Total number of ports that all routes in a space can reserve</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can update space quotas in the organization where they have this role</td>
</tr>
</tbody></table>
<h3 id="delete-a-space-quota">Delete a space quota</h3>

<p>Space quotas cannot be deleted when applied to any spaces.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/space_quotas/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/space_quotas/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can delete space quotas within their managed organizations</td>
</tr>
</tbody></table>
<h3 id="apply-a-space-quota-to-a-space">Apply a space quota to a space</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/space_quotas/:quota_guid/relationships/spaces"</span> <span class="se">\</span>
<span class="nt">-X</span> POST <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{
  "data": [{ "guid": "space-guid1" }, { "guid": "space-guid2" }]
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid1"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-guid2"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"previous-space-guid"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/space_quotas/quota-guid/relationships/spaces"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>This endpoint applies a space quota to one or more spaces.</p>

<p>Only an admin or an org manager in the quota&rsquo;s parent organization can apply a space quota to a space.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/space_quotas/:quota_guid/relationships/spaces</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>data</strong></td>
<td><a href="#to-many-relationships"><em>to-many relationship</em></a></td>
<td>Space guids that the quota will apply to</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can apply space quotas to spaces within their managed organizations</td>
</tr>
</tbody></table>
<h3 id="remove-a-space-quota-from-a-space">Remove a space quota from a space</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/space_quotas/:quota_guid/relationships/spaces/:space_guid"</span> <span class="se">\</span>
<span class="nt">-X</span> DELETE <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div>
<p>This endpoint removes a space quota from a space.</p>

<p>Only an admin or an org manager in the quota&rsquo;s parent organization can remove a space quota from a space.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/space_quotas/:quota_guid/relationships/spaces/:space_guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can remove space quotas from spaces within their managed organizations</td>
</tr>
</tbody></table>
<h2 id="stacks">Stacks</h2>

<p>Stacks are the base operating system and file system that your application will execute in.
A stack is how you configure applications to run against different operating systems
(like Windows or Linux)
and different versions of those operating systems
(like Windows 2012 or Windows 2016).</p>

<p>An application&rsquo;s <a href="#lifecycles">lifecycle</a> will specify which stack to execute the application in.
Buildpacks can also be associated with a particular stack if they contain stack-specific logic.
An application will automatically use buildpacks associated with the application&rsquo;s configured stack.</p>

<p>Stacks are not used for apps with a <a href="#docker-lifecycle">Docker lifecycle</a>.</p>
<h3 id="the-stack-object">The stack object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Stack object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11c916c9-c2f9-440e-8e73-102e79c4704d"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-09T22:43:28Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-09T22:43:28Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Here is my stack!"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"build_rootfs_image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"run_rootfs_image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
     </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.com/v3/stacks/11c916c9-c2f9-440e-8e73-102e79c4704d"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the stack</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>The name of the stack</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td><em>string</em></td>
<td>The description of the stack</td>
</tr>
<tr>
<td><strong>build_rootfs_image</strong></td>
<td>_string</td>
<td>The name of the stack image associated with staging/building Apps. If a stack does not have unique images, this will be the same as the stack name.</td>
</tr>
<tr>
<td><strong>run_rootfs_image</strong></td>
<td>_string</td>
<td>The name of the stack image associated with running Apps + Tasks. If a stack does not have unique images, this will be the same as the stack name.</td>
</tr>
<tr>
<td><strong>default</strong></td>
<td><em>boolean</em></td>
<td>Whether the stack is configured to be the default stack for new applications.</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the stack</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the stack</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="create-a-stack">Create a stack</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/stacks"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "my-stack",
    "description": "Here is my stack!",
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11c916c9-c2f9-440e-8e73-102e79c4704d"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-09T22:43:28Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-09T22:43:28Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Here is my stack!"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"build_rootfs_image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"run_rootfs_image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
     </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.com/v3/stacks/11c916c9-c2f9-440e-8e73-102e79c4704d"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/stacks</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the stack; must be unique and no longer than 250 characters</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>description</strong></td>
<td><em>string</em></td>
<td>Description of the stack; must no longer than 250 characters</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the stack</td>
<td></td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the stack</td>
<td></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="get-a-stack">Get a stack</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/stacks/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11c916c9-c2f9-440e-8e73-102e79c4704d"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-09T22:43:28Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-09T22:43:28Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Here is my stack!"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"build_rootfs_image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"run_rootfs_image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
     </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.com/v3/stacks/11c916c9-c2f9-440e-8e73-102e79c4704d"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/stacks/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-stacks">List stacks</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/stacks"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11c916c9-c2f9-440e-8e73-102e79c4704d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-09T22:43:28Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-09T22:43:28Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack-1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"build_rootfs_image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack-1-build"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"run_rootfs_image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack-1-run"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is my first stack!"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks/11c916c9-c2f9-440e-8e73-102e79c4704d"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"81c916c9-c2f9-440e-8e73-102e79c4704h"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-09T22:43:29Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-09T22:43:29Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack-2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is my second stack!"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"build_rootfs_image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack-2-build"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"run_rootfs_image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack-2-run"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks/81c916c9-c2f9-440e-8e73-102e79c4704h"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<p>Retrieve all stacks.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/stacks</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of stack names to filter by</td>
</tr>
<tr>
<td><strong>default</strong></td>
<td><em>boolean</em></td>
<td>If true, only return the default stack</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending<br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code>, and <code class="prettyprint">name</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-apps-on-a-stack">List apps on a stack</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/stacks/[guid]/apps"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks/[guid]/apps?page=1&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks/[guid]/apps?page=2&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks/[guid]/apps?page=2&amp;per_page=2"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_app"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STARTED"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T21:41:30Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-18T11:32:30Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"java_buildpack"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/processes"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"packages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/packages"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/environment_variables"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets/current"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"droplets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/droplets"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/tasks"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/start"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"stop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/actions/stop"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"deployed_revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/revisions/deployed"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/1cb006ee-fb05-47e1-b541-c34179ddc446/features"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
          </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02b4ec9b-94c7-4468-9c23-4e906191a0f8"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_app2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOPPED"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1970-01-01T00:00:02Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-08T16:41:26Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"lifecycle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buildpack"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"buildpacks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"ruby_buildpack"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"stack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cflinuxfs4"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"585bc3c1-3743-497d-88b0-403ad6b56d16"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks/[guid]/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/spaces/2f35885d-0c9d-4423-83ad-fd05066f8576"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"processes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks/[guid]/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/processes"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"packages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks/[guid]/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/packages"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"environment_variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks/[guid]/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/environment_variables"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"current_droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks/[guid]/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/droplets/current"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"droplets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks/[guid]/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/droplets"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks/[guid]/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/tasks"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks/[guid]/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/actions/start"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"stop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/stacks/[guid]/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/actions/stop"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org//v3/stacks/[guid]/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/revisions"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"deployed_revisions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org//v3/stacks/[guid]/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/revisions/deployed"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org//v3/stacks/[guid]/apps/02b4ec9b-94c7-4468-9c23-4e906191a0f8/features"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
          </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all apps using a given stack.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/stacks/:guid/apps</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending<br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code>, and <code class="prettyprint">name</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="update-a-stack">Update a stack</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/stacks/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "metadata": { "labels": { "key": "value" }, "annotations": {"note": "detailed information"}}}'</span>

</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11c916c9-c2f9-440e-8e73-102e79c4704d"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-09T22:43:28Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-09T22:43:28Z"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Here is my stack!"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"build_rootfs_image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"run_rootfs_image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-stack"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"key"</span><span class="p">:</span><span class="s2">"value"</span><span class="p">},</span><span class="w">
     </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"note"</span><span class="p">:</span><span class="s2">"detailed information"</span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.com/v3/stacks/11c916c9-c2f9-440e-8e73-102e79c4704d"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/stacks/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the stack</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the stack</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="delete-a-stack">Delete a stack</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/stacks/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/stacks/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h2 id="tasks">Tasks</h2>

<p>Tasks are one-off jobs that are intended to perform a task, stop, and be cleaned up, freeing up resources.</p>

<p>Examples of this include database migrations, sending things, and batch jobs.</p>
<h3 id="the-task-object">The task object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Task object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sequence_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"migrate"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rake db:migrate"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RUNNING"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"droplet_guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:42Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa/actions/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the task</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>sequence_id</strong></td>
<td><em>integer</em></td>
<td>User-facing id of the task; this number is unique for every task associated with a given app</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the task</td>
</tr>
<tr>
<td><strong>command</strong></td>
<td><em>string</em></td>
<td>Command that will be executed; this field may be excluded based on a user&rsquo;s role</td>
</tr>
<tr>
<td><strong>user</strong></td>
<td><em>string</em> or <em>null</em></td>
<td>The OS user used to run the task in the runtime</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td><em>string</em></td>
<td>State of the task Possible states are <code class="prettyprint">PENDING</code>, <code class="prettyprint">RUNNING</code>, <code class="prettyprint">SUCCEEDED</code>, <code class="prettyprint">CANCELING</code>, and <code class="prettyprint">FAILED</code></td>
</tr>
<tr>
<td><strong>memory_in_mb</strong></td>
<td><em>integer</em></td>
<td>Amount of memory to allocate for the task in MB</td>
</tr>
<tr>
<td><strong>disk_in_mb</strong></td>
<td><em>integer</em></td>
<td>Amount of disk to allocate for the task in MB</td>
</tr>
<tr>
<td><strong>log_rate_limit_per_second</strong></td>
<td><em>integer</em></td>
<td>Amount of log rate to allocate for the task in bytes</td>
</tr>
<tr>
<td><strong>result</strong></td>
<td><em>object</em></td>
<td>Results from the task</td>
</tr>
<tr>
<td><strong>result.failure_reason</strong></td>
<td><em>string</em></td>
<td>Null if the task succeeds, contains the error message if it fails</td>
</tr>
<tr>
<td><strong>droplet_guid</strong></td>
<td><em>uuid</em></td>
<td>The guid of the droplet that will be used to run the command</td>
</tr>
<tr>
<td><strong>relationships.app</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The app the task belongs to</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the task</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the task</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="create-a-task">Create a task</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request with Command
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/tasks"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "command": "rake db:migrate" }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Request with Template Process
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/[guid]/tasks"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "template": { "process": {"guid": "89323d4e-2e84-43e7-83e9-adbf50a20c0e"} } }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sequence_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"migrate"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rake db:migrate"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RUNNING"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"droplet_guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:42Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa/actions/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/apps/:guid/tasks</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>command</strong><sup>[1]</sup></td>
<td><em>string</em></td>
<td>Command that will be executed; <strong>NOTE:</strong> optional if a <code class="prettyprint">template.process.guid</code> is provided</td>
</tr>
</tbody></table>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><em>string</em></td>
<td>Name of the task</td>
<td>auto-generated</td>
</tr>
<tr>
<td><strong>user</strong></td>
<td><em>string</em></td>
<td>OS user used to run the task in the runtime</td>
<td>&ldquo;vcap&rdquo;</td>
</tr>
<tr>
<td><strong>disk_in_mb</strong><sup>[1]</sup></td>
<td><em>integer</em></td>
<td>Amount of disk to allocate for the task in MB</td>
<td>operator-configured <code class="prettyprint">default_app_disk_in_mb</code></td>
</tr>
<tr>
<td><strong>memory_in_mb</strong><sup>[1]</sup></td>
<td><em>integer</em></td>
<td>Amount of memory to allocate for the task in MB</td>
<td>operator-configured <code class="prettyprint">default_app_memory</code></td>
</tr>
<tr>
<td><strong>log_rate_limit_per_second</strong><sup>[1]</sup></td>
<td><em>integer</em></td>
<td>Amount of log rate to allocate for the task in bytes</td>
<td>operator-configured <code class="prettyprint">default_app_log_rate_limit_in_bytes_per_second</code></td>
</tr>
<tr>
<td><strong>droplet_guid</strong></td>
<td><em>uuid</em></td>
<td>The guid of the droplet that will be used to run the command</td>
<td>the app&rsquo;s current droplet</td>
</tr>
<tr>
<td><strong>template.process.guid</strong></td>
<td><em>uuid</em></td>
<td>The guid of the process that will be used as a template</td>
<td><code class="prettyprint">null</code></td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the package</td>
<td></td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the package</td>
<td></td>
</tr>
</tbody></table>

<p><sup>1 If not provided, and a <code class="prettyprint">template.process.guid</code> is provided, this field will use the value from the process with the given guid.</sup></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="get-a-task">Get a task</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/tasks/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sequence_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"migrate"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rake db:migrate"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RUNNING"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"droplet_guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:42Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa/actions/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve a specific task. The <code class="prettyprint">command</code> field may be excluded
in the response based on the user&rsquo;s role.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/tasks/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td><code class="prettyprint">command</code> field redacted</td>
</tr>
<tr>
<td>Org Manager</td>
<td><code class="prettyprint">command</code> field redacted</td>
</tr>
<tr>
<td>Space Auditor</td>
<td><code class="prettyprint">command</code> field redacted</td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
<tr>
<td>Space Manager</td>
<td><code class="prettyprint">command</code> field redacted</td>
</tr>
<tr>
<td>Space Supporter</td>
<td><code class="prettyprint">command</code> field redacted</td>
</tr>
</tbody></table>
<h3 id="list-tasks">List tasks</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/tasks"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sequence_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCEEDED"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
      </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"droplet_guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:42Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa/actions/cancel"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"63b4cd89-fd8b-4bf1-a311-7174fcc907d6"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sequence_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"migrate"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FAILED"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
      </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Exited with status 1"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"droplet_guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:42Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/63b4cd89-fd8b-4bf1-a311-7174fcc907d6"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/63b4cd89-fd8b-4bf1-a311-7174fcc907d6/actions/cancel"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve all tasks the user has access to. The <code class="prettyprint">command</code> field is excluded in the response.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/tasks</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of task guids to filter by</td>
</tr>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of task names to filter by</td>
</tr>
<tr>
<td><strong>states</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of task states to filter by</td>
</tr>
<tr>
<td><strong>app_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of app guids to filter by</td>
</tr>
<tr>
<td><strong>space_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of space guids to filter by</td>
</tr>
<tr>
<td><strong>organization_guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of organization guids to filter by</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>All Roles</td>
</tr>
</tbody></table>
<h3 id="list-tasks-for-an-app">List tasks for an app</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/:guid/tasks"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/tasks?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/tasks?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/tasks?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sequence_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCEEDED"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
      </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"droplet_guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:42Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa/actions/cancel"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"63b4cd89-fd8b-4bf1-a311-7174fcc907d6"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sequence_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"migrate"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FAILED"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
      </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Exited with status 1"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"droplet_guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:42Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/63b4cd89-fd8b-4bf1-a311-7174fcc907d6"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/63b4cd89-fd8b-4bf1-a311-7174fcc907d6/actions/cancel"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve tasks for an app the user has access to. The <code class="prettyprint">command</code> field may be
excluded in the response based on the user&rsquo;s role.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/apps/:guid/tasks</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of task guids to filter by</td>
</tr>
<tr>
<td><strong>names</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of task names to filter by</td>
</tr>
<tr>
<td><strong>states</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of task states to filter by</td>
</tr>
<tr>
<td><strong>sequence_ids</strong></td>
<td><em>list of strings</em></td>
<td>Comma delimited list of sequence ids to filter by Valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending. <br>Valid values are <code class="prettyprint">created_at</code>, <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td><code class="prettyprint">command</code> field redacted</td>
</tr>
<tr>
<td>Org Manager</td>
<td><code class="prettyprint">command</code> field redacted</td>
</tr>
<tr>
<td>Space Auditor</td>
<td><code class="prettyprint">command</code> field redacted</td>
</tr>
<tr>
<td>Space Developer</td>
<td></td>
</tr>
<tr>
<td>Space Manager</td>
<td><code class="prettyprint">command</code> field redacted</td>
</tr>
<tr>
<td>Space Supporter</td>
<td><code class="prettyprint">command</code> field redacted</td>
</tr>
</tbody></table>
<h3 id="update-a-task">Update a task</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/tasks/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "metadata": { "labels": { "key": "value" }, "annotations": {"note": "detailed information"}}}'</span>

</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sequence_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"migrate"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rake db:migrate"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RUNNING"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"droplet_guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"key"</span><span class="p">:</span><span class="s2">"value"</span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"note"</span><span class="p">:</span><span class="s2">"detailed information"</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:42Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa/actions/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/tasks/:guid</code></p>

<h4 id="optional-parameters">Optional parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#labels"><em>label object</em></a></td>
<td>Labels applied to the task</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#annotations"><em>annotation object</em></a></td>
<td>Annotations applied to the task</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
</tbody></table>
<h3 id="cancel-a-task">Cancel a task</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/tasks/[guid]/actions/cancel"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sequence_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"migrate"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rake db:migrate"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vcap"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CANCELING"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"memory_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disk_in_mb"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"log_rate_limit_in_bytes_per_second"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"droplet_guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:41Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-04T17:00:42Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"droplet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Cancels a running task.</p>

<p>Canceled tasks will initially be in state <code class="prettyprint">CANCELING</code> and will move to state <code class="prettyprint">FAILED</code> once the cancel request has been processed.</p>

<p>Cancel requests are idempotent and will be processed according to the state of the task when the request is executed.</p>

<p>Canceling a task that is in <code class="prettyprint">SUCCEEDED</code> or <code class="prettyprint">FAILED</code> state will return an error.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/tasks/:guid/actions/cancel</code> <br>
<code class="prettyprint">PUT /v3/tasks/:guid/cancel</code> <em>(Deprecated)</em></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
<tr>
<td>Space Developer</td>
</tr>
<tr>
<td>Space Supporter</td>
</tr>
</tbody></table>
<h2 id="users">Users</h2>

<p>Every Cloud Foundry action (pushing an application, creating a space) requires a
user. Each Cloud Foundry installation has one pre-installed user, admin, which
can create subsequent users. Users can be assigned roles which give them
privileges to perform actions. For example, the Space Developer role grants a
user permission to manage apps and services in a space (to push apps, scale
apps, delete apps).</p>
<h3 id="the-user-object">The user object</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example User object
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"presentation_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uaa"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:{}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>uuid</em></td>
<td>Unique identifier for the user</td>
</tr>
<tr>
<td><strong>created_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was created</td>
</tr>
<tr>
<td><strong>updated_at</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>The time with zone when the object was last updated</td>
</tr>
<tr>
<td><strong>username</strong></td>
<td><em>string</em></td>
<td>The name registered in UAA; will be <code class="prettyprint">null</code> for UAA clients and non-UAA users</td>
</tr>
<tr>
<td><strong>presentation_name</strong></td>
<td><em>string</em></td>
<td>The name displayed for the user; for UAA users, this is the same as the username. For UAA clients, this is the UAA client ID</td>
</tr>
<tr>
<td><strong>origin</strong></td>
<td><em>string</em></td>
<td>The identity provider for the UAA user; will be <code class="prettyprint">null</code> for UAA clients</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#links"><em>label object</em></a></td>
<td>Labels applied to the user</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#links"><em>annotation object</em></a></td>
<td>Annotations added to the user</td>
</tr>
<tr>
<td><strong>links</strong></td>
<td><a href="#links"><em>links object</em></a></td>
<td>Links to related resources</td>
</tr>
</tbody></table>
<h3 id="create-a-user">Create a user</h3>

<p>Creating a user requires one value, a GUID. This creates a user in the Cloud
Controller database.</p>

<p>Generally, the GUID should match the GUID of an already-created user in the
UAA database, though this is not required.
Creating a user by guid is only permitted by admins.</p>

<p>If CAPI property <code class="prettyprint">cc.allow_user_creation_by_org_manager</code> is enabled, a UAA user will be automatically created if it does not exist yet.
The UAA user will be only created when <code class="prettyprint">username</code> and <code class="prettyprint">origin</code> have been provided instead of a guid. Additionally <code class="prettyprint">origin</code> must be different from <code class="prettyprint">uaa</code>.
Admins and OrgManagers can make use of the UAA user creation.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/users"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "guid": "3a5d3d89-3f89-4f05-8188-8a2b298c79d5"
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"presentation_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uaa"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:{}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Request (by username and origin)
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/users"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "username": "some-user",
    "origin": "some-origin"
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-user"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"presentation_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-user"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-origin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:{}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">POST /v3/users</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guid</strong></td>
<td><em>string</em></td>
<td>Unique identifier for the user. For UAA users this will match the user ID of an existing UAA user&rsquo;s GUID; in the case of UAA clients, this will match the UAA client ID</td>
</tr>
<tr>
<td><strong>username</strong></td>
<td><em>string</em></td>
<td>Username of the user to be created. This can only be provided together with <code class="prettyprint">origin</code>.</td>
</tr>
<tr>
<td><strong>origin</strong></td>
<td><em>string</em></td>
<td>Origin of the user to be created. This can only be provided together with <code class="prettyprint">username</code> and cannot be <code class="prettyprint">uaa</code>.</td>
</tr>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#links"><em>label object</em></a></td>
<td>Labels applied to the user</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#links"><em>annotation object</em></a></td>
<td>Annotations added to the user</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>OrgManager</td>
<td>can only create users by <code class="prettyprint">username</code> and <code class="prettyprint">origin</code> and when CAPI property <code class="prettyprint">cc.allow_user_creation_by_org_manager</code> is enabled</td>
</tr>
</tbody></table>
<h3 id="get-a-user">Get a user</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/users/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"presentation_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uaa"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:{}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/users/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td></td>
</tr>
<tr>
<td>Org Auditor</td>
<td>Can only view users affiliated with their org</td>
</tr>
<tr>
<td>Org Billing Manager</td>
<td>Can only view users affiliated with their org</td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can only view users affiliated with their org</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Can only view users affiliated with their org</td>
</tr>
<tr>
<td>Space Developer</td>
<td>Can only view users affiliated with their org</td>
</tr>
<tr>
<td>Space Manager</td>
<td>Can only view users affiliated with their org</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Can only view users affiliated with their org</td>
</tr>
</tbody></table>

<p><strong>Note:</strong> A user can always see themselves with this endpoint, regardless of role.</p>
<h3 id="list-users">List users</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/users"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_results"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users?page=1&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users?page=2&amp;per_page=2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
     </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client_id"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"presentation_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client_id"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9da93b89-3f89-4f05-7238-8a2b123c79l9"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"presentation_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uaa"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"annotations"</span><span class="p">:{}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/9da93b89-3f89-4f05-7238-8a2b123c79l9"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<p>Retrieve all users that the current user can see.</p>

<h4 id="definition">Definition</h4>

<p><code class="prettyprint">GET /v3/users</code></p>

<h4 id="query-parameters">Query parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>guids</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of user guids to filter by</td>
</tr>
<tr>
<td><strong>usernames</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of usernames to filter by. Mutually exclusive with <strong>partial_usernames</strong></td>
</tr>
<tr>
<td><strong>partial_usernames</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of strings to search by. When using this query parameter, all the users that contain the string provided in their username will be returned. Mutually exclusive with <strong>usernames</strong></td>
</tr>
<tr>
<td><strong>origins</strong></td>
<td><em>list of strings</em></td>
<td>Comma-delimited list of user origins (user stores) to filter by, for example, users authenticated by UAA have the origin &ldquo;uaa&rdquo;; users authenticated by an LDAP provider have the origin &ldquo;ldap&rdquo;; when filtering by origins, usernames must be included</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><em>integer</em></td>
<td>Page to display; valid values are integers &gt;= 1</td>
</tr>
<tr>
<td><strong>per_page</strong></td>
<td><em>integer</em></td>
<td>Number of results per page; <br>valid values are 1 through 5000</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td><em>string</em></td>
<td>Value to sort by. Defaults to ascending; prepend with <code class="prettyprint">-</code> to sort descending<br>Valid values are <code class="prettyprint">created_at</code> and <code class="prettyprint">updated_at</code></td>
</tr>
<tr>
<td><strong>label_selector</strong></td>
<td><em>string</em></td>
<td>A query string containing a list of <a href="#labels-and-selectors">label selector</a> requirements</td>
</tr>
<tr>
<td><strong>created_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
<tr>
<td><strong>updated_ats</strong></td>
<td><em><a href="#timestamps">timestamp</a></em></td>
<td>Timestamp to filter by. When filtering on equality, several comma-delimited timestamps may be passed. Also supports filtering with <a href="#relational-operators">relational operators</a></td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th>Role</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
<td></td>
</tr>
<tr>
<td>Admin Read-Only</td>
<td></td>
</tr>
<tr>
<td>Global Auditor</td>
<td></td>
</tr>
<tr>
<td>Org Auditor</td>
<td>Can only view users affiliated with their org</td>
</tr>
<tr>
<td>Org Billing Manager</td>
<td>Can only view users affiliated with their org</td>
</tr>
<tr>
<td>Org Manager</td>
<td>Can only view users affiliated with their org</td>
</tr>
<tr>
<td>Space Auditor</td>
<td>Can only view users affiliated with their org</td>
</tr>
<tr>
<td>Space Developer</td>
<td>Can only view users affiliated with their org</td>
</tr>
<tr>
<td>Space Manager</td>
<td>Can only view users affiliated with their org</td>
</tr>
<tr>
<td>Space Supporter</td>
<td>Can only view users affiliated with their org</td>
</tr>
</tbody></table>
<h3 id="update-a-user">Update a user</h3>

<p>Update a user&rsquo;s metadata.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/users/24d59a1e-2613-4255-86a2-e0454cc6e261"</span> <span class="se">\</span>
  <span class="nt">-X</span> PATCH <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "metadata": {
      "labels": { "environment": "production" },
      "annotations": { "note": "detailed information" }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"guid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-08T01:06:19Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"presentation_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-name"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uaa"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"enviroment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"detailed information"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.org/v3/users/3a5d3d89-3f89-4f05-8188-8a2b298c79d5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">PATCH /v3/users/:guid</code></p>

<h4 id="required-parameters">Required parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>metadata.labels</strong></td>
<td><a href="#links"><em>label object</em></a></td>
<td>Labels applied to the app</td>
</tr>
<tr>
<td><strong>metadata.annotations</strong></td>
<td><a href="#links"><em>annotation object</em></a></td>
<td>Annotations added to the user</td>
</tr>
</tbody></table>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h3 id="delete-a-user">Delete a user</h3>

<p>All roles associated with a user will be deleted if the user is deleted.</p>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/users/[guid]"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://api.example.org/v3/jobs/[guid]</span>
</code></pre></div>
<h4 id="definition">Definition</h4>

<p><code class="prettyprint">DELETE /v3/users/:guid</code></p>

<h4 id="permitted-roles">Permitted roles</h4>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Admin</td>
</tr>
</tbody></table>
<h1 id="experimental-resources">Experimental Resources</h1>
<h1 id="upgrade-guide">Upgrade Guide</h1>

<p>This document is intended to help client authors upgrade from Cloud Foundry&rsquo;s V2 API to the V3 API.</p>

<p>When moving to the V3 API, it is important to understand that the V3 API is backed by the same database as the V2 API. Though resources may be presented differently and have different interaction patterns, the internal state of CF is the same across both APIs. If you create an organization using the V3 API,
it will be visible to the V2 API, and vice-versa.</p>

<p>If you have questions, need help, or want to chat about the upgrade process, please reach out to us in <a href="https://cloudfoundry.slack.com/messages/C07C04W4Q">Cloud Foundry Slack</a>.</p>
<h2 id="conceptual-changes">Conceptual Changes</h2>
<h3 id="app-sub-resources">App Sub-Resources</h3>

<p>The V2 API rolls up several resources into its representation of an &ldquo;app&rdquo;:</p>

<ol>
<li><strong>Packages:</strong> Source assets for the application</li>
<li><strong>Droplets:</strong> Staged, executable assets for the application</li>
<li><strong>Builds:</strong> Configuration for how to stage the package into a droplet</li>
<li><strong>Processes:</strong> Configuration for how to run the droplet</li>
</ol>

<p>The V3 API exposes these resources on the API to provide more visibility and enable more complicated workflows. For example:</p>

<ol>
<li>Staging a previous package into a new droplet</li>
<li>Rolling back to a previous droplet</li>
<li>Staging a droplet to run a task, without running any processes</li>
<li>Running multiple different processes from a single droplet (for example: a web process and a worker process)</li>
</ol>

<p>Here are some examples of implications for clients:</p>

<ol>
<li>The app resource contains much less information about the application as a whole</li>
<li>An application can have multiple processes, each with their own start command. The processes can be scaled independently, and stats be retrieved independently.</li>
<li>An application might not be running with its most recent package or droplet</li>
</ol>
<h3 id="starting-apps">Starting Apps</h3>

<p>In the V2 API, starting an app (<code class="prettyprint">PUT /v2/apps/:GUID</code> with <code class="prettyprint">state</code>: <code class="prettyprint">STARTED</code>) will automatically stage new packages into droplets. In V3, <a href="#start-an-app">starting an app</a> will only run the app&rsquo;s current droplet. This change gives clients more control over what package to stage and when to stage it.</p>

<p>To reproduce the V2 start behavior in V3:</p>

<p><img src="images/start_diagram.png" alt="Start Diagram" /></p>

<ol>
<li><a href="#list-packages">List packages</a> and filter on package state with value <code class="prettyprint">READY</code> and order by recency.</li>
<li>If a package has been turned into a droplet <a href="#list-droplets-for-a-package">(see this endpoint)</a> this means it has been staged already. In V2 workflows, this would mean this package is what the current droplet is running.</li>
<li>Stage the package by <a href="#create-a-build">creating a build</a>. This turns your package into a droplet.</li>
<li>Update the app’s <a href="#set-current-droplet">current droplet</a> to the selected droplet. This droplet will be run when the app starts.</li>
<li>Change the app’s state to <a href="#start-an-app">started</a></li>
</ol>

<p>This gives V3 users more flexibility when managing applications. The following
diagram shows many different flows for starting an app.</p>

<p><img src="images/start_flows.png" alt="Start Flow" /></p>

<p>Apps can upload multiple packages, stage multiple droplets, roll back to older droplets, and other complicated workflows.</p>
<h3 id="asynchronous-operations">Asynchronous Operations</h3>

<p>Unlike V2, clients cannot opt-in for asynchronous responses from endpoints. 
Instead, endpoints that require asynchronous processing will return <code class="prettyprint">202 Accepted</code> with a Location header pointing to the job resource to poll. 
Endpoints that do not require asynchronous processing will respond synchronously.</p>

<p>For clients that want to report the outcome of an asynchronous operation, poll the job in the Location header until its <code class="prettyprint">state</code> is no longer <code class="prettyprint">PROCESSING</code>. 
If the job&rsquo;s <code class="prettyprint">state</code> is <code class="prettyprint">FAILED</code>, the <code class="prettyprint">errors</code> field will contain any errors that occurred during the operation.</p>

<p>An example of an asynchronous endpoint is the <a href="#delete-an-app">delete app endpoint</a>.</p>

<p>Service related endpoints such as <a href="#service-instances">service instance</a>, <a href="#service-credential-binding">service credential binding</a> and <a href="#service-route-binding">service route binding</a> may create jobs 
that transition to state <code class="prettyprint">POLLING</code> after <code class="prettyprint">PROCESSING</code>. This state reflects the polling of the last operation from the service broker.
For clients that want to report the outcome of this asynchronous operation, poll the job in the Location header until its <code class="prettyprint">state</code> is no longer <code class="prettyprint">POLLING</code>.</p>

<p>Read more about <a href="#jobs">the job resource</a>.</p>
<!-- We need to use plain html here to specify different ids. Otherwise the framework will mess up urls -->

<h3 id="errors-v3">Errors</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v2/apps/not-found"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">404</span> <span class="ne">Not Found</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The app could not be found: not-found"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"error_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CF-AppNotFound"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">100004</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/not-found"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">404</span> <span class="ne">Not Found</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"App not found"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CF-ResourceNotFound"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">10010</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The V3 API returns an array of errors instead of a single error like in V2.</p>

<p>Clients may wish to display all returned errors.</p>
<h3 id="filtering">Filtering</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Filters are specified as individual query parameters in V3
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v2/apps?q=name+IN+dora,broker;stack:cflinuxfs4"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps?names=dora,broker&amp;stacks=cflinuxfs4"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div>
<p>Filtering resources no longer uses V2&rsquo;s query syntax. See the example to the right.</p>

<p>A few common filters have been also renamed in V3:</p>

<table><thead>
<tr>
<th>V2 filter</th>
<th>V3 filter</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">results-per-page</code></td>
<td><code class="prettyprint">per_page</code></td>
</tr>
<tr>
<td><code class="prettyprint">page</code></td>
<td><code class="prettyprint">page</code></td>
</tr>
<tr>
<td><code class="prettyprint">order-by</code></td>
<td><code class="prettyprint">order_by</code></td>
</tr>
<tr>
<td><code class="prettyprint">order-direction</code></td>
<td>N/A<sup>1</sup></td>
</tr>
</tbody></table>

<p><sup>1</sup> In V3, order is ascending by default. Prefix the <code class="prettyprint">order_by</code> value with <code class="prettyprint">-</code> to make it descending. For example, <code class="prettyprint">?order_by=-name</code> would order a list of resources by <code class="prettyprint">name</code> in descending order.</p>

<p>Filtering inequalities has changed in V3: V3 dispenses with the <code class="prettyprint">q=</code> preamble,
uses <code class="prettyprint">created_ats</code> instead of <code class="prettyprint">timestamp</code> and uses bracket operators (<code class="prettyprint">[lt]</code>,
<code class="prettyprint">[gt]</code>, <code class="prettyprint">[lte]</code>, <code class="prettyprint">[gte]</code>). For example, to request all audit events occurring on
New Year&rsquo;s Day, one would use the following query: <code class="prettyprint">GET
/v3/audit_events?created_ats[lt]=2020-01-02T00:00:00Z&amp;created_ats[gt]=2019-12-31T23:59:59Z</code>.</p>

<p>The corresponding V2 query would be <code class="prettyprint">GET
/v2/events?q=timestamp&lt;2020-01-02T00:00:00Z&amp;q=timestamp&gt;2019-12-31T23:59:59Z</code>.</p>

<p>Filtering on equality has also changed: V3 dispenses with the <code class="prettyprint">q=</code> preamble and
uses the pluralized field (e.g. <code class="prettyprint">names</code>) on the left side of the equals sign.
For filtering on inclusion in a set, V3 allows passing multiple values separated
by commas.</p>

<p>For example, to request the organizations by
their name (&ldquo;finance&rdquo; and &ldquo;marketing&rdquo;), one would use the following query:
<code class="prettyprint">/v3/organizations?names=finance,marketing</code></p>

<p>The corresponding V2 query would be <code class="prettyprint">GET
/v2/organizations?q=name%20IN%20finance,marketing</code></p>

<p>Read more about <a href="#filters">filtering in V3</a>.</p>
<h3 id="including-associated-resources">Including Associated Resources</h3>

<p>The <code class="prettyprint">inline-relations-depth</code> parameter is no longer supported on V3. Instead, some resources support the <code class="prettyprint">include</code> parameter to selectively include associated resources in the response body.</p>

<p>For example, to include an app&rsquo;s space in the response:
<code class="prettyprint">
cf curl /v3/apps/:guid?include=space
</code></p>

<p>In addition, some resources provide the possibility of including specified fields of a related resource.</p>

<p>For example, to include the service broker <code class="prettyprint">name</code> and <code class="prettyprint">guid</code> in the service offering&rsquo;s response:
<code class="prettyprint">
cf curl /v3/service_offerings/:guid?fields[service_broker]=name,guid
</code></p>

<p>Read more about <a href="#include">the <code class="prettyprint">include</code> parameter</a> and <a href="#fields">the <code class="prettyprint">fields</code> parameter</a>.</p>
<h3 id="resource-summaries">Resource Summaries</h3>

<p>V2 provided several endpoints that returned rolled-up summaries (e.g.
<code class="prettyprint">/v2/spaces/:guid/summary</code> for a space summary, or
<code class="prettyprint">/v2/organizations/:guid/summary</code> for an organization summary). Although
convenient, these endpoints have been largely removed from V3, for they were
computationally expensive and often returned much more information than
needed.</p>

<p>In V3, to enable better API performance, these usage patterns are
deliberately disallowed. Instead, clients are encouraged to think more carefully
about which information they need and to fetch that information with
multiple API calls and/or by making use of the <a href="#including-associated-resources"><code class="prettyprint">include</code>
parameter</a> or <a href="#fields">the <code class="prettyprint">fields</code> parameter</a> on certain endpoints.</p>

<p>In V2, summary endpoints provided a way to fetch all resources associated with a
parent resource. In V3, fetch the summary though the associated resource and
filter by the parent resource. See below for examples of summaries in V3.</p>

<h4 id="replacing-the-space-summary-endpoint">Replacing the space summary endpoint</h4>

<ul>
<li>To fetch all apps in a space, use <code class="prettyprint">GET /v3/apps?space_guids=&lt;space-guid&gt;</code>.
Passing <code class="prettyprint">include=space</code> will include the space resource in the response body.</li>
<li>To fetch all service offerings in a space use <code class="prettyprint">GET
/v3/service_offerings?space_guids=&lt;space-guid&gt;</code>. Use the
<code class="prettyprint">fields</code> parameter to include related information in the response
body.</li>
<li>To fetch all service instances in a space use <code class="prettyprint">GET
/v3/service_instances?space_guids=&lt;space-guid&gt;</code>. Use the
<code class="prettyprint">fields</code> parameter to include related information in the response
body.</li>
</ul>

<h5 id="replacing-the-space-summary-response-for-service-instances">Replacing the space summary response for service instances</h5>

<p>Similar fields to what <code class="prettyprint">/v2/spaces/:guid/summary</code> was offering for services are available from v3 endpoints.</p>

<p>The table below describes the query parameters needed to retrieve some of those fields using <code class="prettyprint">/v3/service_instances</code> endpoint.
Same query parameters are available on the request for a single resource.</p>

<table><thead>
<tr>
<th><strong>V2 summary fields</strong></th>
<th><strong>V3 query</strong></th>
<th><strong>V3 response fields</strong></th>
</tr>
</thead><tbody>
<tr>
<td>services[].service_plan.guid</td>
<td>fields[service_plan]=guid</td>
<td>resources[].included.service_plans[].guid</td>
</tr>
<tr>
<td>services[].service_plan.name</td>
<td>fields[service_plan]=name</td>
<td>resources[].included.service_plans[].name</td>
</tr>
<tr>
<td>services[].service_plan.service.guid</td>
<td>fields[service_plan.service_offering]=guid</td>
<td>resources[].included.service_offerings[].guid</td>
</tr>
<tr>
<td>services[].service_plan.service.label</td>
<td>fields[service_plan.service_offering]=name</td>
<td>resources[].included.service_offerings[].name</td>
</tr>
<tr>
<td>services[].service_broker_name</td>
<td>fields[service_plan.service_offering.service_broker]=name</td>
<td>resources[].included.service_brokers[].name</td>
</tr>
<tr>
<td>shared_from.space_guid</td>
<td>fields[space]=guid</td>
<td>resources[].included.spaces[].guid</td>
</tr>
<tr>
<td>shared_from.space_name</td>
<td>fields[space]=name</td>
<td>resources[].included.spaces[].name</td>
</tr>
<tr>
<td>shared_from.organization_name</td>
<td>fields[space.organization]=name</td>
<td>resources[].included.organizations[].name</td>
</tr>
</tbody></table>

<p>The table below describes the query parameters needed to retrieve the sharing information using <code class="prettyprint">/v3/service_instances/:guid/relationships/shared_spaces</code> endpoint.</p>

<table><thead>
<tr>
<th><strong>V2 summary fields</strong></th>
<th><strong>V3 query</strong></th>
<th><strong>V3 response fields</strong></th>
</tr>
</thead><tbody>
<tr>
<td>shared_to.space_guid</td>
<td>fields[space]=guid</td>
<td>included.spaces[].guid</td>
</tr>
<tr>
<td>shared_to.space_name</td>
<td>fields[space]=name</td>
<td>included.spaces[].name</td>
</tr>
<tr>
<td>shared_to.organization_name</td>
<td>fields[space.organization]=name</td>
<td>included.organizations[].name</td>
</tr>
</tbody></table>

<p>The existing <code class="prettyprint">bound_app_count</code> field can be found by using the <a href="#get-usage-summary-in-shared-spaces">usage summary endpoint</a></p>

<p>Read more about <a href="#fields">the <code class="prettyprint">fields</code> parameter</a>.</p>

<h4 id="replacing-the-user-summary-endpoint">Replacing the user summary endpoint</h4>

<ul>
<li>The user summary was useful for finding organizations and spaces where a user
had roles. In V3, with the introduction of the role resource, you can use <code class="prettyprint">GET
/v3/roles?user_guids=&lt;user-guid&gt;</code> to list a user&rsquo;s roles. Passing
<code class="prettyprint">include=space,organization</code> will include the relevant spaces and organizations
in the response body.</li>
</ul>

<h4 id="usage-summary-endpoints">Usage summary endpoints</h4>

<p>There are still a couple of endpoints in V3 that provide a basic summary of
instance and memory usage. See the <a href="#get-usage-summary">org summary</a> and
<a href="#get-platform-usage-summary">platform summary</a> endpoints.</p>
<h2 id="new-concepts">New Concepts</h2>
<h3 id="actions">Actions</h3>

<p>Actions are API requests that are expected to immediately initiate change within the Cloud Foundry runtime. This is differentiated from requests which update a record but require additional updates, such as restarting an app, to cause changes to a resource to take effect.</p>

<p>Example:
<code class="prettyprint">
POST /v3/apps/:guid/actions/start
</code></p>
<!-- We need to use plain html here to specify different ids. Otherwise the framework will mess up urls -->

<h3 id="links-v3">Links</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps/:guid"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.example.com/v3/apps/:guid"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"space"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.example.com/v3/spaces/:space_guid"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Links provide URLs to associated resources, relationships, and actions for a resource.
The example links to both the app itself and the space in which it resides.</p>
<!-- We need to use plain html here to specify different ids. Otherwise the framework will mess up urls -->

<h3 id="metadata-v3">Metadata</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/:resource/:guid"</span> <span class="se">\</span>
  <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>Example Response
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"..."</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"labels"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"environment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"internet-facing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"contacts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bill tel(1111111) email(bill@fixme)"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Metadata allows you to tag and query certain API resources with information; metadata does not affect the resource&rsquo;s functionality.</p>

<p>For more details and usage examples, see <a href="#metadata">metadata</a> or <a href="https://docs.cloudfoundry.org/adminguide/metadata.html">official CF docs</a>.</p>

<p>Note that metadata consists of two keys, <code class="prettyprint">labels</code> and <code class="prettyprint">annotations</code>, each of which consists of key-value pairs. API V3 allows filtering by labels (see <a href="#labels-and-selectors">label_selector</a>) but not by annotations.</p>
<!-- We need to use plain html here to specify different ids. Otherwise the framework will mess up urls -->

<h3 id="relationships-v3">Relationships</h3>
<div class="highlight"><pre class="highlight plaintext"><code>Example Request
</code></pre></div><div class="highlight"><pre class="highlight shell"><code>curl <span class="s2">"https://api.example.org/v3/apps"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: bearer [token]"</span>
  <span class="nt">-d</span> <span class="s1">'{
        "name": "testapp",
        "relationships": {
         "space": { "data": { "guid": "1234" }}
        }
      }'</span>
</code></pre></div>
<p>Relationships represent associations between resources: For example, every space belongs in an organization, and every app belongs in a space. The V3 API can create, read, update, and delete these associations.</p>

<p>In the example request we create an app with a relationship to a specific space.</p>

<p>One can retrieve or update a resource&rsquo;s relationships. For example, to retrieve an app&rsquo;s relationship to its space with the <code class="prettyprint">/v3/apps/:app_guid/relationships/space</code> endpoint.</p>

<p>For more information, refer to the <a href="#relationships">relationships</a>.</p>
<h2 id="new-resources">New Resources</h2>

<p>The V3 API introduces new resources that are not available on the V2 API. Below are brief descriptions of these resources. This is not intended to be an exhaustive list and may not be updated as new resources are added to V3.</p>

<p><strong>Note:</strong> Some of these resources may still be experimental and are subject to change or removal without warning. For up to date information on which resources are still experimental see <a href="#experimental-resources">Experimental Resources</a>.</p>
<!-- We need to use plain html here to specify different ids. Otherwise the framework will mess up urls -->

<h3 id="app-features-v3">App Features</h3>

<p>App features support enabling/disabling behaviors for an individual app.</p>

<p>Read more about the <a href="#app-features">app feature resource</a>.</p>
<!-- We need to use plain html here to specify different ids. Otherwise the framework will mess up urls -->

<h3 id="builds-v3">Builds</h3>

<p>Builds increase the flexibility and granularity of control available
to clients crafting stagings workflows. For example:</p>

<ul>
<li>Staging older packages instead of always staging the most recent package</li>
<li>Staging packages without having to stop an application</li>
<li>Staging packages to produce droplets without setting them as the current
droplet for an app</li>
<li>Staging packages into droplets for use in tasks and/or rolling deployments</li>
</ul>

<p>Read more about the <a href="#builds">builds resource</a>.</p>
<!-- We need to use plain html here to specify different ids. Otherwise the framework will mess up urls -->

<h3 id="deployments-v3">Deployments</h3>

<p>Deployments are objects that manage updates to applications with zero downtime.</p>

<p>Read more about the <a href="#deployments">deployments resource</a>.</p>
<!-- We need to use plain html here to specify different ids. Otherwise the framework will mess up urls -->

<h3 id="isolation-segments-v3">Isolation Segments</h3>

<p>Isolation segments provide dedicated pools of resources to which apps can be deployed to isolate workloads.</p>

<p>Read more about the <a href="#isolation-segments">isolation segment resource</a>.</p>
<!-- We need to use plain html here to specify different ids. Otherwise the framework will mess up urls -->

<h3 id="manifests-v3">Manifests</h3>

<p>Manifests are a method for providing bulk configuration to applications and other resources.</p>

<p>Read more about the <a href="#manifests">manifest</a> resource.</p>
<!-- We need to use plain html here to specify different ids. Otherwise the framework will mess up urls -->

<h3 id="revisions-v3">Revisions</h3>

<p>Revisions represent code and configuration used by an application at a specific time. The most recent revision for a running application represents the code and configuration currently running in Cloud Foundry.</p>

<p>Read more about the <a href="#revisions">revision resource</a>.</p>
<h3 id="service-route-bindings">Service Route Bindings</h3>

<p>There is a new resource <code class="prettyprint">service route binding</code> that represents a binding between a route and a service instance.</p>

<p>Creation/Deletion of these bindings is therefore done via that endpoint in v3.</p>

<p>This resource also supports metadata both in create and update requests.
Audit event of type <code class="prettyprint">audit.service_route_binding.update</code> is recorded when metadata update is requested.</p>

<p>It has a nested resource for fetching binding parameters from the broker. Parameters are only set during creation.</p>

<p>Read more about the <a href="#service-route-binding">service route binding resource</a>.</p>
<!-- We need to use plain html here to specify different ids. Otherwise the framework will mess up urls -->

<h3 id="sidecars-v3">Sidecars</h3>

<p>Sidecars are additional programs that are run in the same container as a process.</p>

<p>Read more about the <a href="#sidecars">sidecar resource</a>.</p>
<!-- We need to use plain html here to specify different ids. Otherwise the framework will mess up urls -->

<h3 id="tasks-v3">Tasks</h3>

<p>Tasks are one-off jobs that are intended to execute a droplet, stop, and be cleaned up, freeing up resources.</p>

<p>Examples of this include database migrations and running batch jobs.</p>

<p>Read more about the <a href="#tasks">task resource</a>.</p>
<h2 id="changed-resources">Changed Resources</h2>

<p>This table shows how V2 resources map to their respective V3 counterparts. Note that some V2 resources have split into multiple V3 resources, and some V2 resources have been combined into a single resource on V3. As these resources are currently under active development, these mappings may change.</p>

<table><thead>
<tr>
<th><strong>V2 Resource(s)</strong></th>
<th><strong>V3 Resource(s)</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead><tbody>
<tr>
<td>Apps</td>
<td>Apps, Builds, Droplets, Packages, Processes</td>
<td></td>
</tr>
<tr>
<td>Buildpacks</td>
<td>Buildpacks</td>
<td></td>
</tr>
<tr>
<td>Domains, Shared Domains, Private Domains</td>
<td>Domains</td>
<td><a href="#domains-in-v3">Domains in V3</a></td>
</tr>
<tr>
<td>Environment Variable Groups</td>
<td>Environment Variable Groups</td>
<td></td>
</tr>
<tr>
<td>Events</td>
<td>Audit Events</td>
<td><a href="#audit-events-in-v3">Audit Events in V3</a></td>
</tr>
<tr>
<td>Feature Flags</td>
<td>Feature Flags</td>
<td></td>
</tr>
<tr>
<td>Info</td>
<td>Info</td>
<td><a href="#info-in-v3">Info in V3</a></td>
</tr>
<tr>
<td>Jobs</td>
<td>Jobs</td>
<td></td>
</tr>
<tr>
<td>Organizations</td>
<td>Organizations</td>
<td></td>
</tr>
<tr>
<td>Quota Definitions</td>
<td>Organization Quotas</td>
<td><a href="#organization-quotas-in-v3">Organization Quotas in V3</a></td>
</tr>
<tr>
<td>Resource Matches</td>
<td>Resource Matches</td>
<td></td>
</tr>
<tr>
<td>Routes, Route Mappings</td>
<td>Routes, Destinations</td>
<td><a href="#routes-in-v3">Routes in V3</a></td>
</tr>
<tr>
<td>Security Groups</td>
<td>Security Groups</td>
<td><a href="#security-groups-in-v3">Security Groups in V3</a></td>
</tr>
<tr>
<td>Services</td>
<td>Service Offerings</td>
<td><a href="#service-offerings-in-v3">Service Offerings in V3</a></td>
</tr>
<tr>
<td>Service Bindings, Service Keys</td>
<td>Service Keys</td>
<td></td>
</tr>
<tr>
<td>Service Brokers</td>
<td>Service Brokers</td>
<td><a href="#service-brokers-in-v3">Service Brokers in V3</a></td>
</tr>
<tr>
<td>Service Instances, User-Provided Service Instances</td>
<td>Service Instances</td>
<td></td>
</tr>
<tr>
<td>Service Plans</td>
<td>Service Plans</td>
<td><a href="#service-plans-in-v3">Service Plans in V3</a></td>
</tr>
<tr>
<td>Service Plan Visibilities</td>
<td>Service Plan Visibility</td>
<td><a href="#service-plan-visibility-in-v3">Service Plan Visibility in V3</a></td>
</tr>
<tr>
<td>Spaces</td>
<td>Spaces</td>
<td></td>
</tr>
<tr>
<td>Space Quota Definitions</td>
<td>Space Quotas</td>
<td><a href="#space-quotas-in-v3">Space Quotas in V3</a></td>
</tr>
<tr>
<td>Stacks</td>
<td>Stacks</td>
<td></td>
</tr>
<tr>
<td>Usage Events</td>
<td>Usage Events</td>
<td><a href="#usage-events-in-v3">Usage Events in V3</a></td>
</tr>
<tr>
<td>Users</td>
<td>Roles, Users</td>
<td><a href="#users-and-roles-in-v3">Users and Roles in V3</a></td>
</tr>
</tbody></table>
<h3 id="audit-events-in-v3">Audit Events in V3</h3>

<p>In V2, these were called &ldquo;events&rdquo; (e.g. <code class="prettyprint">/v2/events</code>). In V3, we adopt the term
&ldquo;audit events&rdquo; to better distinguish them from usage events.</p>

<p>V2 audit events contained information about the &ldquo;actee&rdquo; (the resource that the
event affected). V3 audit events refer to the affected resource as the &ldquo;target&rdquo;.</p>

<p>V2 audit events had a <code class="prettyprint">timestamp</code> field. In V3, this field has been renamed to
<code class="prettyprint">created_at</code> for consistency with other resources. The value is the same.</p>

<p>In general, V3 audit events contain all of the same information that they
contained in V2, but the JSON is structured a little differently. In particular:</p>

<ul>
<li>The <code class="prettyprint">metadata</code> field has been renamed to <code class="prettyprint">data</code>.</li>
<li>Actor-related fields have been grouped into an object under the <code class="prettyprint">actor</code> key
(e.g. <code class="prettyprint">actor.type</code> instead of <code class="prettyprint">actor_type</code>).</li>
<li>Actee-related fields have been grouped under the <code class="prettyprint">target</code> key (e.g.
<code class="prettyprint">target.type</code> instead of <code class="prettyprint">actee_type</code>).</li>
</ul>

<p>V3 endpoints attempt to report audit events in the same way as V2 endpoints did.
A notable case where this was not possible is for the <code class="prettyprint">audit.app.restage</code> event.
Read more about <a href="#restage">restaging</a> in V3.</p>

<p>Read more about the <a href="#audit-events">audit event resource</a>.</p>
<h3 id="domains-in-v3">Domains in V3</h3>

<p>In V2, there were two types of domains exposed via different endpoints: private domains and shared domains.</p>

<p>In V3, there is only one domain resource. A domain is &ldquo;private&rdquo; if it has an &ldquo;owning organization&rdquo;, which is the organization in which the domain is accessible. This is represented as a relationship to this organization. A domain is &ldquo;shared&rdquo; if it doesn&rsquo;t have this relationship.</p>

<p>Read more about the <a href="#domains">domain resource</a>.</p>
<h3 id="info-in-v3">Info in V3</h3>

<p>In V2, <code class="prettyprint">/v2/info</code> provides descriptive information about the system and endpoints to external APIs.</p>

<p>In V3, <code class="prettyprint">/v3/info</code> only provides descriptive information about the system.</p>

<p>To access the external APIs in V3, use the root (<code class="prettyprint">/</code>).</p>
<h3 id="organization-quotas-in-v3">Organization Quotas in V3</h3>

<p>In V2, <code class="prettyprint">-1</code> represented an unlimited value for a quota limit.</p>

<p>In V3, <code class="prettyprint">null</code> is used to represent an unlimited value.</p>

<p>The names of the limit fields have changed from V2 to V3.</p>

<table><thead>
<tr>
<th><strong>V2</strong></th>
<th><strong>V3</strong></th>
</tr>
</thead><tbody>
<tr>
<td>non_basic_services_allowed</td>
<td>services.paid_services_allowed</td>
</tr>
<tr>
<td>total_services</td>
<td>services.total_service_instances</td>
</tr>
<tr>
<td>total_service_keys</td>
<td>services.total_service_keys</td>
</tr>
<tr>
<td>total_routes</td>
<td>routes.total_routes</td>
</tr>
<tr>
<td>total_reserved_route_ports</td>
<td>routes.total_reserved_ports</td>
</tr>
<tr>
<td>total_private_domains</td>
<td>domains.total_domains</td>
</tr>
<tr>
<td>memory_limit</td>
<td>apps.total_memory_in_mb</td>
</tr>
<tr>
<td>instance_memory_limit</td>
<td>apps.per_process_memory_in_mb</td>
</tr>
<tr>
<td>app_instance_limit</td>
<td>apps.total_instances</td>
</tr>
<tr>
<td>app_task_limit</td>
<td>apps.per_app_tasks</td>
</tr>
</tbody></table>

<p>Read more about the <a href="#organization-quotas">organization quota resource</a>.</p>
<h3 id="routes-in-v3">Routes in V3</h3>

<p>In V2, the route resource represented a URL that could be mapped to an app, and the route mapping resource represented a mapping between a route and an app.</p>

<p>In V3, these concepts have been collapsed into a single route resource. Now, a route can have one or more &ldquo;destinations&rdquo; listed on it. These represent a mapping from the route to a resource that can serve traffic (e.g. a process of an app).</p>

<p>Read more about <a href="#routes">routes, destinations, and ports</a>.</p>
<h3 id="security-groups-in-v3">Security Groups in V3</h3>

<p>In V2, security groups which apply to <em>all</em> spaces in a Cloud Foundry deployment are termed &ldquo;default&rdquo;, as in &ldquo;default for running apps&rdquo; and &ldquo;default for staging apps&rdquo;. For example, to apply a default security group to all apps in the running lifecycle, one would <code class="prettyprint">PUT /v2/config/running_security_groups/:guid</code></p>

<p>In V3, security groups which apply to <em>all</em> spaces in a Cloud Foundry deployment are termed &ldquo;global&rdquo;, as in &ldquo;globally-enabled running apps&rdquo; and &ldquo;globally-enabled staging apps.&rdquo; For example, to apply a security group globally to all apps in the running lifecycle, one would <code class="prettyprint">PATCH /v3/security_groups/:guid</code> with a body specifying the <code class="prettyprint">globally_enabled</code> key. See <a href="#update-a-security-group">here</a> for an example.</p>

<p>In V2, on creation, one can specify the spaces to which the security group applies, but not whether it applies globally (by default). To set the group globally to all spaces in the foundation one would <code class="prettyprint">PUT /v2/config/running_security_groups/43e0441d-c9c1-4250-b8d5-7fb624379e02</code>.</p>

<p>In V3, on creation, one can both specify the spaces to which it applies and also whether it applies globally (to staging and/or running) by specifying the <code class="prettyprint">globally_enabled</code> key. See <a href="#create-a-security-group">here</a> for more information.</p>

<p>In V2, the endpoint to apply a security group to a space only includes the lifecycle (&ldquo;running&rdquo; or &ldquo;staging&rdquo;) explicitly when applying to &ldquo;staging&rdquo; (&ldquo;running&rdquo; is the default lifecycle). For example, to unbind a security group from the running lifecycle, one would <code class="prettyprint">DELETE /v2/security_groups/:guid/spaces/:space_guid</code>, from the staging lifecycle, <code class="prettyprint">DELETE /v2/security_groups/:guid/staging_spaces/:space_guid</code>.</p>

<p>In V3, the endpoint to apply a security group to a space includes the lifecycle. For example to unbind a security group from the running lifecycle, one would <code class="prettyprint">DELETE /v3/security_groups/:guid/relationships/running_spaces/:space_guid</code>.</p>
<h3 id="service-brokers-in-v3">Service Brokers in V3</h3>

<h4 id="create-update-and-delete">Create, Update and Delete</h4>

<p>In V3 these endpoints are now asynchronous. See <a href="#asynchronous-operations">asynchronous operations</a> and <a href="#service-broker-jobs">service broker jobs</a> for more information.</p>

<p>Read more about the <a href="#service-brokers">service broker resource</a>.</p>
<h3 id="service-instances-in-v3">Service Instances in V3</h3>

<h4 id="combining-managed-and-user-provided-service-instances">Combining managed and user-provided service instances</h4>

<p>In v2, two different endpoints <code class="prettyprint">/v2/service_instances</code> and <code class="prettyprint">/v2/user_provided_service_instances</code>
were used to perform operations on service instances according to their types.</p>

<p>In v3, all service instance operations are performed using the <a href="#service-instances">service instance</a> resource, regardless of the type.
Service instances can be of type <code class="prettyprint">managed</code> when it is an instantiation of a <a href="#service-offerings">service offering</a> registered with CF 
or <code class="prettyprint">user-provided</code> when it describes an instance of an offering that is not registered with CF. 
The <code class="prettyprint">type</code> filter can be used to separately list each type.</p>

<p>The required parameters when <a href="#create-a-service-instance">creating</a> and <a href="#update-a-service-instance">updating</a> 
a service instance are different for each type as defined in their respective documentation. </p>

<h4 id="object">Object</h4>

<p>The structure of the service instances object as well as some attribute names have changed from V2 to V3.
Each service instance type has type specific fields. Certain fields are omitted when they do not apply to the type of the service instance.</p>

<table><thead>
<tr>
<th><strong>V2</strong></th>
<th><strong>V3</strong></th>
</tr>
</thead><tbody>
<tr>
<td>type valid values <code class="prettyprint">managed_service_instance</code> and <code class="prettyprint">user_provided_service_instance</code></td>
<td>type valid values <code class="prettyprint">managed</code> and <code class="prettyprint">user-provided</code></td>
</tr>
<tr>
<td>entity.service_plan_guid</td>
<td>relationships.service_plan.data.guid</td>
</tr>
<tr>
<td>entity.space_guid</td>
<td>relationships.space.data.guid</td>
</tr>
</tbody></table>

<h4 id="user-provided-service-instance-credentials">User provided service instance credentials</h4>

<p>The <code class="prettyprint">credentials</code> field for user provided service instances is not included in the response object of service_instances.
<code class="prettyprint">/v3/service_instances/:guid/credentials</code> can be used to retrieve the credentials. </p>

<p>Read more about the <a href="#get-credentials-for-a-user-provided-service-instance">service instance credential</a>.</p>

<h4 id="response-mode">Response mode</h4>

<p>When operating on service instances of type <code class="prettyprint">user-provided</code> the API will respond synchronously for all operations.</p>

<p>When the service instance type is <code class="prettyprint">managed</code> the API will respond asynchronously and the operation might include communicating to the service broker. Read more about async responses <a href="#asynchronous-operations">here</a>.</p>

<h4 id="listing-bindings">Listing bindings</h4>

<p>In v2, there were specific endpoints <code class="prettyprint">/v2/service_instances/:guid/service_bindings</code>, <code class="prettyprint">/v2/service_instances/:guid/service_keys</code> 
and <code class="prettyprint">/v2/user_provided_service_instances/:guid/service_bindings</code> to retrieve the service bindings and service keys for managed and user-provided service instances.</p>

<p>In v3, the <a href="#list-service-credential-bindings">service credential bindings</a> can be filtered by <code class="prettyprint">service_instance_guids</code> to retrieve the bindings of any service instance. </p>

<h4 id="service-instance-route-bindings">Service instance route bindings</h4>

<p>In v2, binding a service instance to a route was done as a relationship request for the service instance.</p>

<p>In v3, there is a new resource <a href="#service-route-bindings">service route binding</a> that represents a binding between a route and a service instance.
Creation and deletion of route bindings is therefore done via that endpoint in v3.</p>

<p>Audit events for route bindings have changed as follows:</p>

<table><thead>
<tr>
<th><strong>V2</strong></th>
<th><strong>V3</strong></th>
</tr>
</thead><tbody>
<tr>
<td>audit.service_instance.bind_route</td>
<td>audit.service_route_binding.start_create (async only)<br>audit.service_route_binding.create</td>
</tr>
<tr>
<td>audit.service_instance.unbind_route</td>
<td>audit.service_route_binding.start_delete (async only)<br>audit.service_route_binding.delete</td>
</tr>
</tbody></table>

<p>Read more about the <a href="#service-instances">service instance resource</a>.</p>
<h3 id="service-bindings-in-v3">Service Bindings in V3</h3>

<h4 id="combining-service-bindings-and-service-keys">Combining service bindings and service keys</h4>

<p>In v2, two different endpoints <code class="prettyprint">/v2/service_bindings</code> and <code class="prettyprint">/v2/service_keys</code>
were used to perform bindings operations for service instances.</p>

<p>In v3, all service bindings that are not route bindings are performed using the <a href="#service-credential-binding">service credential bindings</a> resource.
Service credential bindings can be of type <code class="prettyprint">app</code> when it is a binding between a <a href="#service-instances">service instance</a> and an <a href="#apps">application</a>
or <code class="prettyprint">key</code> when it only retrieves the credentials of the service instance. 
The <code class="prettyprint">type</code> filter can be used to list separately each type.</p>

<p>The required parameters when <a href="#create-a-service-credential-binding">creating</a> 
a service credential binding are different for each type as defined in the documentation. </p>

<h4 id="object">Object</h4>

<p>The structure of the service credential binding object follows V3 pattern.
If the type is <code class="prettyprint">app</code> the object will contain a relationship to the app.</p>

<h4 id="retrieving-service-credential-bindings-details">Retrieving service credential bindings details</h4>

<p>The <code class="prettyprint">credentials</code>, <code class="prettyprint">syslog_drain_url</code> and <code class="prettyprint">volume_mounts</code> fields for service credential bindings are not included in the response object of service credential bindings.
<code class="prettyprint">/v3/service_credential_bindings/:guid/details</code> can be used to retrieve the credentials. </p>

<p>Read more about the <a href="#get-a-service-credential-binding-details">service credential binding details</a>.</p>

<h4 id="service-key-operations">Service key operations</h4>

<p>In v2, all service keys operations were synchronous.</p>

<p>In v3, all service credential bindings, including those of type <code class="prettyprint">key</code> are asynchronous if possible.</p>

<h4 id="response-mode">Response mode</h4>

<p>When operating on service credential bindings of <code class="prettyprint">user-provided</code> service instances the API will respond synchronously for all operations.</p>

<p>When operating on service credential bindings of <code class="prettyprint">managed</code> service instances the API will respond asynchronously and the operation might include communicating to the service broker. Read more about async responses <a href="#asynchronous-operations">here</a>.</p>

<h4 id="audit-events">Audit events</h4>

<p>Audit events of type <code class="prettyprint">audit.service_key.start_create</code> and  <code class="prettyprint">audit.service_key.start_delete</code> have been added to track when 
an async create or delete <code class="prettyprint">key</code> service credential binding operation has started. </p>

<p>Audit events of type <code class="prettyprint">audit.service_binding.update</code> and <code class="prettyprint">audit.service_key.update</code> are recorded when metadata update is requested. </p>

<p>Read more about the <a href="#service-credential-binding">service credential binding resource</a>.</p>
<h3 id="service-offerings-in-v3">Service Offerings in V3</h3>

<p>Services resource is now replaced by <a href="#service-offerings">service offerings resource</a> at <code class="prettyprint">/v3/service_offerings</code></p>

<p>Some services related endpoints nested in other resources have been translated to filters on <code class="prettyprint">service_offerings</code>, with the advantage that filters accept multiple values and can be combined.</p>

<p><code class="prettyprint">GET /v2/organizations/:guid/services</code> is now <code class="prettyprint">GET /v3/service_offerings?organization_guids=guid</code>.</p>

<p><code class="prettyprint">GET /v2/spaces/:guid/services</code> is now <code class="prettyprint">GET /v3/service_offerings?space_guids=guid</code></p>

<p><code class="prettyprint">GET /v2/services/:guid/service_plans</code> is now a filter on the service plan resource: <code class="prettyprint">GET /v3/service_plans?service_offering_guids=guid</code>. This link can also be found in the object&rsquo;s <code class="prettyprint">links</code> section.</p>

<p>In V2, <code class="prettyprint">service_broker_name</code> was returned in the response. V3 returns this value only if requested using the <a href="#fields"><code class="prettyprint">fields</code> syntax</a>. Refer to <a href="#service-offerings">service offerings resource</a> for further information. A link to the <code class="prettyprint">Service Broker</code> resource is included in the object&rsquo;s <code class="prettyprint">links</code> section.  </p>

<p>The structure of the service offering object as well as some attribute names have changed from V2 to V3:</p>

<table><thead>
<tr>
<th><strong>V2</strong></th>
<th><strong>V3</strong></th>
</tr>
</thead><tbody>
<tr>
<td>label</td>
<td>name</td>
</tr>
<tr>
<td>active</td>
<td>available</td>
</tr>
<tr>
<td>bindable</td>
<td>broker_catalog.features.bindable</td>
</tr>
<tr>
<td>extra</td>
<td>shareable, broker_catalog.metadata</td>
</tr>
<tr>
<td>unique_id</td>
<td>broker_catalog.id</td>
</tr>
<tr>
<td>plan_updateable</td>
<td>broker_catalog.features.plan_updateable</td>
</tr>
<tr>
<td>instances_retrievable</td>
<td>broker_catalog.features.instances_retrievable</td>
</tr>
<tr>
<td>bindings_retrievable</td>
<td>broker_catalog.features.bindings_retrievable</td>
</tr>
<tr>
<td>service_broker_guid</td>
<td>relationships.service_broker.data.guid</td>
</tr>
</tbody></table>

<p>Read more about the <a href="#service-offerings">service offering resource</a>.</p>
<h3 id="service-plans-in-v3">Service Plans in V3</h3>

<p>Some service plans related endpoints nested in other resources have been translated to filters on service plans, with the advantage that filters accept multiple values and can be combined.</p>

<p><code class="prettyprint">GET /v2/services/:guid/service_plans</code> -&gt; <code class="prettyprint">GET /v3/service_plans?service_offering_guids=guid</code></p>

<p>Changing plan visibility to <code class="prettyprint">Public</code> is not a PUT operation anymore. To change visibility use the <a href="#service-plan-visibility">service plan visibility resource</a></p>

<p>The structure of the service plan object as well as some attribute names have changed from V2 to V3:</p>

<table><thead>
<tr>
<th><strong>V2</strong></th>
<th><strong>V3</strong></th>
</tr>
</thead><tbody>
<tr>
<td>active</td>
<td>available</td>
</tr>
<tr>
<td>bindable</td>
<td>broker_catalog.features.bindable</td>
</tr>
<tr>
<td>extra</td>
<td>broker_catalog.metadata</td>
</tr>
<tr>
<td>public</td>
<td><code class="prettyprint">visibility_type == &#39;public&#39;</code> (see <a href="#list-of-visibility-types">visibility types</a>)</td>
</tr>
<tr>
<td>unique_id</td>
<td>broker_catalog.id</td>
</tr>
<tr>
<td>plan_updateable</td>
<td>broker_catalog.features.plan_updateable</td>
</tr>
<tr>
<td>service_instances_url</td>
<td>use <code class="prettyprint">service_plan_guids</code> or <code class="prettyprint">service_plan_names</code> filter on <a href="#service-instances">service instances resource</a></td>
</tr>
<tr>
<td>service_url</td>
<td>links.service_offering.href</td>
</tr>
<tr>
<td>service_guid</td>
<td>relationships.service_offering.data.guid</td>
</tr>
</tbody></table>

<p>Some filters were renamed and changed to accept a list of values:</p>

<table><thead>
<tr>
<th><strong>V2</strong></th>
<th><strong>V3</strong></th>
</tr>
</thead><tbody>
<tr>
<td>service_guid</td>
<td>service_offering_guids</td>
</tr>
<tr>
<td>service_instance_guid</td>
<td>service_instance_guids</td>
</tr>
<tr>
<td>service_broker_guid</td>
<td>service_broker_guids</td>
</tr>
<tr>
<td>unique_id</td>
<td>broker_catalog_ids</td>
</tr>
</tbody></table>

<p>Read more about the <a href="#service-plans">service plan resource</a>.</p>
<h3 id="service-plan-visibility-in-v3">Service Plan Visibility in V3</h3>

<p><code class="prettyprint">v2/service_plan_visibilities</code> has been replaced in v3 with a nested resource <code class="prettyprint">v3/service_plans/:guid/visibility</code></p>

<p>This new resource has a <code class="prettyprint">type</code>, and can have a list of <code class="prettyprint">organizations</code> a <code class="prettyprint">space</code> or be of type <code class="prettyprint">public</code></p>

<p>Read more about the <a href="#service-plan-visibility">service plan visibility resource</a>.</p>
<h3 id="space-quotas-in-v3">Space Quotas in V3</h3>

<p>In V2, <code class="prettyprint">-1</code> represented an unlimited value for a quota limit.</p>

<p>In V3, <code class="prettyprint">null</code> is used to represent an unlimited value.</p>

<p>The names of the limit fields have changed from V2 to V3.</p>

<table><thead>
<tr>
<th><strong>V2</strong></th>
<th><strong>V3</strong></th>
</tr>
</thead><tbody>
<tr>
<td>non_basic_services_allowed</td>
<td>services.paid_services_allowed</td>
</tr>
<tr>
<td>total_services</td>
<td>services.total_service_instances</td>
</tr>
<tr>
<td>total_service_keys</td>
<td>services.total_service_keys</td>
</tr>
<tr>
<td>total_routes</td>
<td>routes.total_routes</td>
</tr>
<tr>
<td>total_reserved_route_ports</td>
<td>routes.total_reserved_ports</td>
</tr>
<tr>
<td>memory_limit</td>
<td>apps.total_memory_in_mb</td>
</tr>
<tr>
<td>instance_memory_limit</td>
<td>apps.per_process_memory_in_mb</td>
</tr>
<tr>
<td>app_instance_limit</td>
<td>apps.total_instances</td>
</tr>
<tr>
<td>app_task_limit</td>
<td>apps.per_app_tasks</td>
</tr>
</tbody></table>

<p>Read more about the <a href="#space-quotas">space quota resource</a>.</p>
<h3 id="usage-events-in-v3">Usage Events in V3</h3>

<p>This section covers changes in both <a href="#app-usage-events">app usage events</a> and <a href="#service-usage-events">service usage events</a>.</p>

<p>The V2 <code class="prettyprint">service_guid</code> field for service usage events is now renamed to <code class="prettyprint">service_offering.guid</code>.</p>

<p>The V2 <code class="prettyprint">service_label</code> field for service usage events is now renamed to <code class="prettyprint">service_offering.label</code>.</p>

<p>The V2 <code class="prettyprint">app_guid</code> field for app usage events is now renamed to <code class="prettyprint">process.guid</code>.</p>

<p>The V2 experimental field <code class="prettyprint">parent_app_guid</code> for app usage events was used to identify a backing V3 app if present. In V3, this field has been renamed to <code class="prettyprint">app.guid</code> and is no longer experimental.</p>
<h3 id="users-and-roles-in-v3">Users and Roles in V3</h3>

<p>The user resource remains largely unchanged from the v2 API. On v2, <code class="prettyprint">GET /v2/users</code> was restricted to admins, and other users needed to use nested endpoints (<code class="prettyprint">GET /v2/organizations/:guid/user</code> and <code class="prettyprint">GET /v2/spaces/:guid/user</code>) to view user resources. On v3, those nested endpoints are carried over, but <code class="prettyprint">GET /v3/users</code> is now available for all users in a similar way to other resources. Note that this does not change what user resources are visible.</p>

<p>In v2, roles were modeled as associations between organization and space endpoints. In V3, roles have a dedicated resource: <code class="prettyprint">/v3/roles</code>. This has changed the manner in which roles are assigned. For example, in V2, to assign a user the <code class="prettyprint">org_manager</code> role, one would <code class="prettyprint">PUT /v2/organizations/:org_guid/managers/:user_id</code>. In V3, one would <code class="prettyprint">POST /v3/roles</code> with the role type and relationships to the user and organization.</p>

<p>In v2, when an Org Manager gives a person an Org or Space role, that person automatically receives Org User status in that org. This is no longer the case in the v3 API.</p>

<p>Read more about <a href="#users">users</a> and <a href="#roles">roles</a>.</p>
<h2 id="deprecated-endpoints">Deprecated Endpoints</h2>

<p>The specialized <code class="prettyprint">/v2/apps/:guid/restage</code> endpoint is replaced by the
<a href="#builds">builds</a> resource. Builds allow finer-grained control and increased
flexibility when staging packages into droplets. The V3 API avoids making
assumptions about which package/droplet to use when staging or running an app
and thus leaves it up to clients.</p>
<h3 id="restage">Restage</h3>

<p>The specialized <code class="prettyprint">/v2/apps/:guid/restage</code> endpoint is replaced by the <a href="#builds">builds</a> resource. Builds allow finer-grained
control and increased flexibility when staging packages into droplets. The V3 API avoids making assumptions about which 
package/droplet to use when staging or running an app and thus leaves it up to clients.</p>

<h4 id="replicating-restage">Replicating Restage</h4>

<ol>
<li><p>Get newest READY package for an app:</p>

<p><code class="prettyprint">
GET /v3/packages?app_guids=:app-guid&amp;order_by=-created_at&amp;states=READY
</code></p></li>
<li><p>Stage the package:</p>

<p><code class="prettyprint">
POST /v3/build
</code></p></li>
<li><p>Poll build until the state is <code class="prettyprint">STAGED</code>:</p>

<p><code class="prettyprint">
GET /v3/builds/build-guid
</code></p></li>
<li><p>Stop the app:</p>

<p><code class="prettyprint">
POST /v3/apps/:guid/actions/stop
</code></p></li>
<li><p>Set the app&rsquo;s current droplet to the build&rsquo;s resulting droplet:</p>

<p><code class="prettyprint">
PATCH /v3/apps/:guid/relationships/current_droplet
</code></p></li>
<li><p>Start app:</p>

<p><code class="prettyprint">
POST /v3/apps/:guid/actions/start
</code></p></li>
</ol>

<p>For a zero-downtime restage, you may wish to use <a href="#deployments">deployments</a> instead of stopping and starting the app.</p>

<h4 id="restage-event">Restage Event</h4>

<p>Since the V3 API has no concept of a &ldquo;restage&rdquo;, the <code class="prettyprint">audit.app.restage</code> audit
event is no longer reported. Instead, the following events can be tracked:</p>

<table><thead>
<tr>
<th>Audit Event</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>audit.build.create</td>
<td>A build is created (staging is initiated)</td>
</tr>
<tr>
<td>audit.droplet.create</td>
<td>A droplet is created (staging finishes successfully)</td>
</tr>
<tr>
<td>audit.app.stop</td>
<td>Stopping an app is initiated</td>
</tr>
<tr>
<td>audit.app.droplet.mapped</td>
<td>A droplet is set as the current droplet for an app</td>
</tr>
<tr>
<td>audit.app.start</td>
<td>Starting an app is initiated</td>
</tr>
<tr>
<td>audit.app.deployment.create</td>
<td>A deployment is initialized</td>
</tr>
</tbody></table>

      </div>
    </main>
  </body>
</html>
